import{m as re,s as P,r as Se,u as Me}from"../chunks/index.C1lEHi1V.js";import{s as oe,y as j,n as ee,c as Z,r as Be,o as we,z as ke,d as ne,f as Le}from"../chunks/scheduler.B2IlTnna.js";import{S as ce,i as ie,e as y,s as M,t as G,c as T,a as U,f as B,b as J,d as b,n as h,g as $,h as f,j as te,y as ue,z as fe,m as _e,A as he,p as ge,o as pe,q as Ce,k as w,u as be,l as A,B as de,C as Ee,w as ye}from"../chunks/index.CH0HSZbu.js";import{N as Ne}from"../chunks/Navbar.CIqcbYE9.js";import{g as He}from"../chunks/entry.yiHAtpIe.js";function Q(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function De(){let l,e;if(re.subscribe(s=>l=s),P.subscribe(s=>e=s),!l||!e)throw Se(307,"/")}const Ze=Object.freeze(Object.defineProperty({__proto__:null,load:De},Symbol.toStringTag,{value:"Module"}));function Te(l){let e;return{c(){e=y("i"),this.h()},l(s){e=T(s,"I",{class:!0}),U(e).forEach(b),this.h()},h(){h(e,"class","fa-solid fa-circle-user svelte-1hfc06y")},m(s,t){$(s,e,t)},d(s){s&&b(e)}}}function Ae(l){let e,s,t,r,o=decodeURI(l[0].username)+"",u,E,m,d,p=l[0].body+"",I,z,S,c=l[0].type!==l[2].BOT&&Te();return{c(){e=y("article"),s=y("div"),c&&c.c(),t=M(),r=y("h4"),u=G(o),E=M(),m=y("div"),d=y("p"),I=G(p),this.h()},l(v){e=T(v,"ARTICLE",{class:!0});var q=U(e);s=T(q,"DIV",{class:!0});var O=U(s);c&&c.l(O),t=B(O),r=T(O,"H4",{class:!0});var R=U(r);u=J(R,o),R.forEach(b),O.forEach(b),E=B(q),m=T(q,"DIV",{class:!0});var V=U(m);d=T(V,"P",{class:!0});var k=U(d);I=J(k,p),k.forEach(b),V.forEach(b),q.forEach(b),this.h()},h(){h(r,"class","montserrat-alternates-bold svelte-1hfc06y"),h(s,"class","username svelte-1hfc06y"),h(d,"class","montserrat-alternates-regular"),h(m,"class",z=j(`body ${l[0].type===l[2].BOT?"typeBot":""}`)+" svelte-1hfc06y"),h(e,"class",S=j(l[1].username===decodeURI(l[0].username)?"me":"")+" svelte-1hfc06y")},m(v,q){$(v,e,q),f(e,s),c&&c.m(s,null),f(s,t),f(s,r),f(r,u),f(e,E),f(e,m),f(m,d),f(d,I)},p(v,[q]){v[0].type!==v[2].BOT?c||(c=Te(),c.c(),c.m(s,t)):c&&(c.d(1),c=null),q&1&&o!==(o=decodeURI(v[0].username)+"")&&te(u,o),q&1&&p!==(p=v[0].body+"")&&te(I,p),q&1&&z!==(z=j(`body ${v[0].type===v[2].BOT?"typeBot":""}`)+" svelte-1hfc06y")&&h(m,"class",z),q&3&&S!==(S=j(v[1].username===decodeURI(v[0].username)?"me":"")+" svelte-1hfc06y")&&h(e,"class",S)},i:ee,o:ee,d(v){v&&b(e),c&&c.d()}}}function Ve(l,e,s){let t;Z(l,re,u=>s(1,t=u));var r=(u=>(u.ROOM="room",u.BOT="bot",u))(r||{});let{data:o}=e;return l.$$set=u=>{"data"in u&&s(0,o=u.data)},[o,t,r]}class xe extends ce{constructor(e){super(),ie(this,e,Ve,Ae,oe,{data:0})}}function je(l){let e,s,t,r,o=decodeURI(l[1].username)+"",u,E,m;return{c(){e=y("article"),s=y("i"),t=M(),r=y("h4"),u=G(o),E=M(),m=y("i"),this.h()},l(d){e=T(d,"ARTICLE",{"data-id":!0,class:!0});var p=U(e);s=T(p,"I",{class:!0}),U(s).forEach(b),t=B(p),r=T(p,"H4",{class:!0});var I=U(r);u=J(I,o),I.forEach(b),E=B(p),m=T(p,"I",{class:!0}),U(m).forEach(b),p.forEach(b),this.h()},h(){h(s,"class","fa-solid fa-circle-user svelte-vv2xs7"),h(r,"class","montserrat-alternates-bold svelte-vv2xs7"),h(m,"class","fa-solid fa-circle-question svelte-vv2xs7"),h(e,"data-id",l[0]),h(e,"class","svelte-vv2xs7")},m(d,p){$(d,e,p),f(e,s),f(e,t),f(e,r),f(r,u),f(e,E),f(e,m)},p(d,[p]){p&2&&o!==(o=decodeURI(d[1].username)+"")&&te(u,o),p&1&&h(e,"data-id",d[0])},i:ee,o:ee,d(d){d&&b(e)}}}function Pe(l,e,s){let{id:t}=e,{data:r}=e;return l.$$set=o=>{"id"in o&&s(0,t=o.id),"data"in o&&s(1,r=o.data)},[t,r]}class Ge extends ce{constructor(e){super(),ie(this,e,Pe,je,oe,{id:0,data:1})}}function Ie(l,e,s){const t=l.slice();return t[12]=e[s][0],t[13]=e[s][1],t}function ze(l,e,s){const t=l.slice();return t[16]=e[s],t}function qe(l){let e,s;return e=new xe({props:{data:l[16]}}),{c(){ue(e.$$.fragment)},l(t){fe(e.$$.fragment,t)},m(t,r){he(e,t,r),s=!0},p(t,r){const o={};r&8&&(o.data=t[16]),e.$set(o)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){A(e.$$.fragment,t),s=!1},d(t){de(e,t)}}}function Ue(l){let e,s;return e=new Ge({props:{id:l[12],data:l[13]}}),{c(){ue(e.$$.fragment)},l(t){fe(e.$$.fragment,t)},m(t,r){he(e,t,r),s=!0},p(t,r){const o={};r&4&&(o.id=t[12]),r&4&&(o.data=t[13]),e.$set(o)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){A(e.$$.fragment,t),s=!1},d(t){de(e,t)}}}function Je(l){let e,s,t,r,o,u,E,m,d='<div class="txtStyle svelte-v6z2xq"><button class="montserrat-alternates-regular activeStyle svelte-v6z2xq">T</button> <button class="montserrat-alternates-medium svelte-v6z2xq">T</button> <button class="montserrat-alternates-bold svelte-v6z2xq">T</button></div>',p,I,z,S,c,v='<i class="fa-solid fa-paper-plane svelte-v6z2xq"></i>',q,O,R,V,k=l[2].size+"",X,se,C,F,x,le,me;e=new Ne({});let N=Q(l[3]),_=[];for(let a=0;a<N.length;a+=1)_[a]=qe(ze(l,N,a));const Oe=a=>A(_[a],1,1,()=>{_[a]=null});let H=Q(l[2].entries()),g=[];for(let a=0;a<H.length;a+=1)g[a]=Ue(Ie(l,H,a));const Re=a=>A(g[a],1,1,()=>{g[a]=null});return{c(){ue(e.$$.fragment),s=M(),t=y("section"),r=y("article"),o=y("div");for(let a=0;a<_.length;a+=1)_[a].c();u=M(),E=y("div"),m=y("div"),m.innerHTML=d,p=M(),I=y("form"),z=y("input"),S=M(),c=y("button"),c.innerHTML=v,q=M(),O=y("article"),R=y("h3"),V=G("Usuarios conectados: "),X=G(k),se=M(),C=y("div");for(let a=0;a<g.length;a+=1)g[a].c();this.h()},l(a){fe(e.$$.fragment,a),s=B(a),t=T(a,"SECTION",{class:!0});var i=U(t);r=T(i,"ARTICLE",{class:!0});var n=U(r);o=T(n,"DIV",{class:!0});var L=U(o);for(let D=0;D<_.length;D+=1)_[D].l(L);L.forEach(b),u=B(n),E=T(n,"DIV",{class:!0});var W=U(E);m=T(W,"DIV",{class:!0,"data-svelte-h":!0}),_e(m)!=="svelte-1vhb3g2"&&(m.innerHTML=d),p=B(W),I=T(W,"FORM",{class:!0});var Y=U(I);z=T(Y,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,minlength:!0}),S=B(Y),c=T(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),_e(c)!=="svelte-1m1u804"&&(c.innerHTML=v),Y.forEach(b),W.forEach(b),n.forEach(b),q=B(i),O=T(i,"ARTICLE",{class:!0});var K=U(O);R=T(K,"H3",{class:!0});var ae=U(R);V=J(ae,"Usuarios conectados: "),X=J(ae,k),ae.forEach(b),se=B(K),C=T(K,"DIV",{class:!0});var ve=U(C);for(let D=0;D<g.length;D+=1)g[D].l(ve);ve.forEach(b),K.forEach(b),i.forEach(b),this.h()},h(){h(o,"class","chat svelte-v6z2xq"),h(m,"class","tools svelte-v6z2xq"),h(z,"class","montserrat-alternates-regular svelte-v6z2xq"),h(z,"type","text"),h(z,"placeholder","Escribe tu mensaje..."),h(z,"maxlength","120"),h(z,"minlength","1"),h(c,"class","svelte-v6z2xq"),h(I,"class","svelte-v6z2xq"),h(E,"class","msg svelte-v6z2xq"),h(r,"class","chatBX svelte-v6z2xq"),h(R,"class","montserrat-alternates-bold svelte-v6z2xq"),h(C,"class","userlist svelte-v6z2xq"),h(O,"class",F=j(`users ${l[4]?"showUserlist":""}`)+" svelte-v6z2xq"),h(t,"class","svelte-v6z2xq")},m(a,i){he(e,a,i),$(a,s,i),$(a,t,i),f(t,r),f(r,o);for(let n=0;n<_.length;n+=1)_[n]&&_[n].m(o,null);l[6](o),f(r,u),f(r,E),f(E,m),f(E,p),f(E,I),f(I,z),ge(z,l[0]),f(I,S),f(I,c),f(t,q),f(t,O),f(O,R),f(R,V),f(R,X),f(O,se),f(O,C);for(let n=0;n<g.length;n+=1)g[n]&&g[n].m(C,null);x=!0,le||(me=[pe(z,"input",l[7]),pe(I,"submit",Ce(l[5]))],le=!0)},p(a,[i]){if(i&8){N=Q(a[3]);let n;for(n=0;n<N.length;n+=1){const L=ze(a,N,n);_[n]?(_[n].p(L,i),w(_[n],1)):(_[n]=qe(L),_[n].c(),w(_[n],1),_[n].m(o,null))}for(ye(),n=N.length;n<_.length;n+=1)Oe(n);be()}if(i&1&&z.value!==a[0]&&ge(z,a[0]),(!x||i&4)&&k!==(k=a[2].size+"")&&te(X,k),i&4){H=Q(a[2].entries());let n;for(n=0;n<H.length;n+=1){const L=Ie(a,H,n);g[n]?(g[n].p(L,i),w(g[n],1)):(g[n]=Ue(L),g[n].c(),w(g[n],1),g[n].m(C,null))}for(ye(),n=H.length;n<g.length;n+=1)Re(n);be()}(!x||i&16&&F!==(F=j(`users ${a[4]?"showUserlist":""}`)+" svelte-v6z2xq"))&&h(O,"class",F)},i(a){if(!x){w(e.$$.fragment,a);for(let i=0;i<N.length;i+=1)w(_[i]);for(let i=0;i<H.length;i+=1)w(g[i]);x=!0}},o(a){A(e.$$.fragment,a),_=_.filter(Boolean);for(let i=0;i<_.length;i+=1)A(_[i]);g=g.filter(Boolean);for(let i=0;i<g.length;i+=1)A(g[i]);x=!1},d(a){a&&(b(s),b(t)),de(e,a),Ee(_,a),l[6](null),Ee(g,a),le=!1,Be(me)}}}function $e(l){l.scroll({top:l.scrollHeight,behavior:"smooth"})}function Xe(l,e,s){let t,r,o;Z(l,P,c=>s(8,t=c)),Z(l,re,c=>s(9,r=c)),Z(l,Me,c=>s(4,o=c));let u="",E=null,m=[],d=[{username:"frensgo :",body:`Bienvenido a la sala ${r.room}`,type:"bot"}];we(()=>{t.send(JSON.stringify({type:"GETUSERLIST"}))}),ke(()=>{t.close(),ne(P,t=null,t)});function p(c,v){switch(c){case"USERLIST":const q=new Map(v);s(2,m=q);break;case"NEW_USER":const O={username:"frensgo :",body:v,type:"bot"};d.push(O),s(3,d);break;case"BYE_USER":const R={username:"frensgo :",body:v,type:"bot"};d.push(R),s(3,d);break;case"ROOM_MSG":d.push(v),s(3,d),d.length>=30&&(d.shift(),s(3,d)),setTimeout(()=>$e(E),.1)}}ne(P,t.onmessage=c=>{const{type:v,msg:q}=JSON.parse(c.data);p(v,q)},t),ne(P,t.onclose=()=>{He("/rooms")},t);function I(){!u||u.length===0||u.length>120||(t.send(JSON.stringify({type:"ROOM_MSG",msg:u.trim()})),s(0,u=""))}function z(c){Le[c?"unshift":"push"](()=>{E=c,s(1,E)})}function S(){u=this.value,s(0,u)}return[u,E,m,d,o,I,z,S]}class et extends ce{constructor(e){super(),ie(this,e,Xe,Je,oe,{})}}export{et as component,Ze as universal};
