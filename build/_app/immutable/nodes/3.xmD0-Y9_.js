import{m as je,s as ae,r as yt,a as Se,b as Ue,p as Me,c as ve,d as ht,e as Le,u as kt}from"../chunks/index.BTx4zEHq.js";import{s as ye,m as It,z as Ae,n as Y,c as J,o as De,d as re,e as Q,r as Ee,A as mt,h as Je}from"../chunks/scheduler.DBTPyL-f.js";import{S as ke,i as Ie,e as y,s as U,t as _e,c as k,a as j,f as L,b as be,d as m,n as c,g as C,h as b,p as D,j as Te,u as ie,D as He,E as fe,m as se,C as we,k as N,w as ne,l as K,v as ce,o as Be,q as pt,y as ue,z as de,A as he,B as me}from"../chunks/index.CQsuM-QA.js";import{e as $,N as wt}from"../chunks/Navbar.BPAJ33Xk.js";import{g as At}from"../chunks/entry.DZ6faHpb.js";const Et=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Tt(){let l,e;if(je.subscribe(i=>l=i),ae.subscribe(i=>e=i),!l||!e)throw yt(307,"/")}const mi=Object.freeze(Object.defineProperty({__proto__:null,load:Tt},Symbol.toStringTag,{value:"Module"}));class Z extends HTMLElement{constructor(){super(),this.isIframeLoaded=!1,this.setupDom()}static get observedAttributes(){return["videoid","playlistid"]}connectedCallback(){this.addEventListener("pointerover",Z.warmConnections,{once:!0}),this.addEventListener("click",()=>this.addIframe())}get videoId(){return encodeURIComponent(this.getAttribute("videoid")||"")}set videoId(e){this.setAttribute("videoid",e)}get playlistId(){return encodeURIComponent(this.getAttribute("playlistid")||"")}set playlistId(e){this.setAttribute("playlistid",e)}get videoTitle(){return this.getAttribute("videotitle")||"Video"}set videoTitle(e){this.setAttribute("videotitle",e)}get videoPlay(){return this.getAttribute("videoPlay")||"Play"}set videoPlay(e){this.setAttribute("videoPlay",e)}get videoStartAt(){return this.getAttribute("videoStartAt")||"0"}get autoLoad(){return this.hasAttribute("autoload")}get noCookie(){return this.hasAttribute("nocookie")}get posterQuality(){return this.getAttribute("posterquality")||"hqdefault"}get posterLoading(){return this.getAttribute("posterloading")||"lazy"}get params(){return`start=${this.videoStartAt}&${this.getAttribute("params")}`}set params(e){this.setAttribute("params",e)}setupDom(){const e=this.attachShadow({mode:"open"});let i="";window.liteYouTubeNonce&&(i=`nonce="${window.liteYouTubeNonce}"`),e.innerHTML=`
      <style ${i}>
        :host {
          contain: content;
          display: block;
          position: relative;
          width: 100%;
          padding-bottom: calc(100% / (16 / 9));
        }

        @media (max-width: 40em) {
          :host([short]) {
            padding-bottom: calc(100% / (9 / 16));
          }
        }

        #frame, #fallbackPlaceholder, iframe {
          position: absolute;
          width: 100%;
          height: 100%;
          left: 0;
        }

        #frame {
          cursor: pointer;
        }

        #fallbackPlaceholder {
          object-fit: cover;
        }

        #frame::before {
          content: '';
          display: block;
          position: absolute;
          top: 0;
          background-image: linear-gradient(180deg, #111 -20%, transparent 90%);
          height: 60px;
          width: 100%;
          z-index: 1;
        }

        #playButton {
          width: 68px;
          height: 48px;
          background-color: transparent;
          background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/><path d="M45 24 27 14v20" fill="white"/></svg>');
          z-index: 1;
          border: 0;
          border-radius: inherit;
        }

        #playButton:before {
          content: '';
          border-style: solid;
          border-width: 11px 0 11px 19px;
          border-color: transparent transparent transparent #fff;
        }

        #playButton,
        #playButton:before {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate3d(-50%, -50%, 0);
          cursor: inherit;
        }

        /* Post-click styles */
        .activated {
          cursor: unset;
        }

        #frame.activated::before,
        #frame.activated > #playButton {
          display: none;
        }
      </style>
      <div id="frame">
        <picture>
          <source id="webpPlaceholder" type="image/webp">
          <source id="jpegPlaceholder" type="image/jpeg">
          <img id="fallbackPlaceholder" referrerpolicy="origin" loading="lazy">
        </picture>
        <button id="playButton"></button>
      </div>
    `,this.domRefFrame=e.querySelector("#frame"),this.domRefImg={fallback:e.querySelector("#fallbackPlaceholder"),webp:e.querySelector("#webpPlaceholder"),jpeg:e.querySelector("#jpegPlaceholder")},this.domRefPlayButton=e.querySelector("#playButton")}setupComponent(){this.initImagePlaceholder(),this.domRefPlayButton.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),this.setAttribute("title",`${this.videoPlay}: ${this.videoTitle}`),(this.autoLoad||this.isYouTubeShort())&&this.initIntersectionObserver()}attributeChangedCallback(e,i,t){switch(e){case"videoid":case"playlistid":case"videoTitle":case"videoPlay":{i!==t&&(this.setupComponent(),this.domRefFrame.classList.contains("activated")&&(this.domRefFrame.classList.remove("activated"),this.shadowRoot.querySelector("iframe").remove(),this.isIframeLoaded=!1));break}}}addIframe(e=!1){if(!this.isIframeLoaded){let i=e?0:1;const t=this.noCookie?"-nocookie":"";let s;this.playlistId?s=`?listType=playlist&list=${this.playlistId}&`:s=`${this.videoId}?`,this.isYouTubeShort()&&(this.params=`loop=1&mute=1&modestbranding=1&playsinline=1&rel=0&enablejsapi=1&playlist=${this.videoId}`,i=1);const n=`
<iframe frameborder="0" title="${this.videoTitle}"
  allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen
  src="https://www.youtube${t}.com/embed/${s}autoplay=${i}&${this.params}"
></iframe>`;this.domRefFrame.insertAdjacentHTML("beforeend",n),this.domRefFrame.classList.add("activated"),this.isIframeLoaded=!0,this.attemptShortAutoPlay(),this.dispatchEvent(new CustomEvent("liteYoutubeIframeLoaded",{detail:{videoId:this.videoId},bubbles:!0,cancelable:!0}))}}initImagePlaceholder(){var t,s;const e=`https://i.ytimg.com/vi_webp/${this.videoId}/${this.posterQuality}.webp`,i=`https://i.ytimg.com/vi/${this.videoId}/${this.posterQuality}.jpg`;this.domRefImg.fallback.loading=this.posterLoading,this.domRefImg.webp.srcset=e,this.domRefImg.jpeg.srcset=i,this.domRefImg.fallback.src=i,this.domRefImg.fallback.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),(s=(t=this.domRefImg)==null?void 0:t.fallback)==null||s.setAttribute("alt",`${this.videoPlay}: ${this.videoTitle}`)}initIntersectionObserver(){const e={root:null,rootMargin:"0px",threshold:0};new IntersectionObserver((t,s)=>{t.forEach(n=>{n.isIntersecting&&!this.isIframeLoaded&&(Z.warmConnections(),this.addIframe(!0),s.unobserve(this))})},e).observe(this)}attemptShortAutoPlay(){this.isYouTubeShort()&&setTimeout(()=>{var e,i;(i=(e=this.shadowRoot.querySelector("iframe"))==null?void 0:e.contentWindow)==null||i.postMessage('{"event":"command","func":"playVideo","args":""}',"*")},2e3)}isYouTubeShort(){return this.getAttribute("short")===""&&window.matchMedia("(max-width: 40em)").matches}static addPrefetch(e,i){const t=document.createElement("link");t.rel=e,t.href=i,t.crossOrigin="true",document.head.append(t)}static warmConnections(){Z.isPreconnected||window.liteYouTubeIsPreconnected||(Z.addPrefetch("preconnect","https://i.ytimg.com/"),Z.addPrefetch("preconnect","https://s.ytimg.com"),Z.addPrefetch("preconnect","https://www.youtube.com"),Z.addPrefetch("preconnect","https://www.google.com"),Z.addPrefetch("preconnect","https://googleads.g.doubleclick.net"),Z.addPrefetch("preconnect","https://static.doubleclick.net"),Z.isPreconnected=!0,window.liteYouTubeIsPreconnected=!0)}}Z.isPreconnected=!1;customElements.define("lite-youtube",Z);function qe(l){let e;function i(n,o){return n[0].avatar?Mt:St}let t=i(l),s=t(l);return{c(){s.c(),e=ie()},l(n){s.l(n),e=ie()},m(n,o){s.m(n,o),C(n,e,o)},p(n,o){t===(t=i(n))&&s?s.p(n,o):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){n&&m(e),s.d(n)}}}function St(l){let e;return{c(){e=y("i"),this.h()},l(i){e=k(i,"I",{class:!0}),j(e).forEach(m),this.h()},h(){c(e,"class","fa-solid fa-circle-user svelte-nia2w9")},m(i,t){C(i,e,t)},p:Y,d(i){i&&m(e)}}}function Mt(l){let e;function i(n,o){return n[0].avatar.length>0?Ot:jt}let t=i(l),s=t(l);return{c(){s.c(),e=ie()},l(n){s.l(n),e=ie()},m(n,o){s.m(n,o),C(n,e,o)},p(n,o){t===(t=i(n))&&s?s.p(n,o):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){n&&m(e),s.d(n)}}}function jt(l){let e;return{c(){e=y("i"),this.h()},l(i){e=k(i,"I",{class:!0}),j(e).forEach(m),this.h()},h(){c(e,"class","fa-solid fa-circle-user svelte-nia2w9")},m(i,t){C(i,e,t)},p:Y,d(i){i&&m(e)}}}function Ot(l){let e,i;return{c(){e=y("img"),this.h()},l(t){e=k(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Q(e.src,i=l[0].avatar)||c(e,"src",i),c(e,"alt","avatar of user"),c(e,"class","svelte-nia2w9")},m(t,s){C(t,e,s)},p(t,s){s&1&&!Q(e.src,i=t[0].avatar)&&c(e,"src",i)},d(t){t&&m(e)}}}function Pt(l){let e;return{c(){e=y("lite-youtube"),this.h()},l(i){e=k(i,"LITE-YOUTUBE",{class:!0,videoid:!0}),j(e).forEach(m),this.h()},h(){He(e,"class","ytFrame svelte-nia2w9"),He(e,"videoid",l[1])},m(i,t){C(i,e,t)},p(i,t){t&2&&He(e,"videoid",i[1])},d(i){i&&m(e)}}}function Ct(l){let e,i,t,s,n;return{c(){e=y("img"),this.h()},l(o){e=k(o,"IMG",{src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){Q(e.src,i=l[0].body)||c(e,"src",i),c(e,"alt","Imagen subida Por un usuario"),c(e,"style",t=`cursor:pointer;${l[0].type===l[3].STICKER?"width:150px;":""}`),c(e,"class","svelte-nia2w9")},m(o,r){C(o,e,r),s||(n=D(e,"click",l[9]),s=!0)},p(o,r){r&1&&!Q(e.src,i=o[0].body)&&c(e,"src",i),r&1&&t!==(t=`cursor:pointer;${o[0].type===o[3].STICKER?"width:150px;":""}`)&&c(e,"style",t)},d(o){o&&m(e),s=!1,n()}}}function Rt(l){let e,i;return{c(){e=y("audio"),this.h()},l(t){e=k(t,"AUDIO",{src:!0}),j(e).forEach(m),this.h()},h(){Q(e.src,i=l[0].body)||c(e,"src",i),e.controls=!0},m(t,s){C(t,e,s)},p(t,s){s&1&&!Q(e.src,i=t[0].body)&&c(e,"src",i)},d(t){t&&m(e)}}}function Nt(l){let e,i=l[0].body+"",t;return{c(){e=y("p"),t=_e(i),this.h()},l(s){e=k(s,"P",{class:!0});var n=j(e);t=be(n,i),n.forEach(m),this.h()},h(){c(e,"class","montserrat-alternates-regular svelte-nia2w9")},m(s,n){C(s,e,n),b(e,t)},p(s,n){n&1&&i!==(i=s[0].body+"")&&Te(t,i)},d(s){s&&m(e)}}}function Ut(l){let e,i,t,s,n=decodeURI(l[0].username)+"",o,r,u,p,E,M,T;It(l[8]);let a=l[0].type!==l[3].BOT&&qe(l);function d(g,w){if(g[0].type===g[3].ROOM||g[0].type===g[3].BOT||g[0].type===g[3].PV)return Nt;if(g[0].type===g[3].AUDIO)return Rt;if(g[0].type===g[3].IMAGE||g[0].type===g[3].STICKER)return Ct;if(g[0].type===g[3].YT)return Pt}let h=d(l),f=h&&h(l);return{c(){e=y("article"),i=y("div"),a&&a.c(),t=U(),s=y("h4"),o=_e(n),r=U(),u=y("div"),p=y("div"),f&&f.c(),this.h()},l(g){e=k(g,"ARTICLE",{class:!0,style:!0});var w=j(e);i=k(w,"DIV",{class:!0});var B=j(i);a&&a.l(B),t=L(B),s=k(B,"H4",{class:!0});var _=j(s);o=be(_,n),_.forEach(m),B.forEach(m),r=L(w),u=k(w,"DIV",{class:!0});var I=j(u);p=k(I,"DIV",{class:!0});var S=j(p);f&&f.l(S),S.forEach(m),I.forEach(m),w.forEach(m),this.h()},h(){c(s,"class","montserrat-alternates-bold svelte-nia2w9"),c(i,"class","username svelte-nia2w9"),c(p,"class",Ae(`body ${l[7]()}`)+" svelte-nia2w9"),c(u,"class","bodyBX"),c(e,"class",Ae(`${l[4]?"me":""}`)+" svelte-nia2w9"),c(e,"style",E=l[6](l[2]))},m(g,w){C(g,e,w),b(e,i),a&&a.m(i,null),b(i,t),b(i,s),b(s,o),b(e,r),b(e,u),b(u,p),f&&f.m(p,null),M||(T=D(window,"resize",l[8]),M=!0)},p(g,[w]){g[0].type!==g[3].BOT?a?a.p(g,w):(a=qe(g),a.c(),a.m(i,t)):a&&(a.d(1),a=null),w&1&&n!==(n=decodeURI(g[0].username)+"")&&Te(o,n),h===(h=d(g))&&f?f.p(g,w):(f&&f.d(1),f=h&&h(g),f&&(f.c(),f.m(p,null))),w&4&&E!==(E=g[6](g[2]))&&c(e,"style",E)},i:Y,o:Y,d(g){g&&m(e),a&&a.d(),f&&f.d(),M=!1,T()}}}function Lt(l,e,i){let t,s,n;J(l,Se,f=>i(10,t=f)),J(l,Ue,f=>i(11,s=f)),J(l,je,f=>i(12,n=f));var o=(f=>(f.ROOM="room",f.BOT="bot",f.AUDIO="audio",f.IMAGE="image",f.YT="yt",f.STICKER="sticker",f.PV="pv",f))(o||{});let{data:r}=e,u=null;De(()=>{if(/^https:\/\/(www\.)?youtu.+\//.test(r.body)){const f=r.body.match(/(\.be\/|v=).{11}/);i(1,u=f[0].replace(f[1],"")),i(0,r.type="yt",r)}});const p=n.username===decodeURI(r.username);let E;function M(f){re(Ue,s=f.src,s),re(Se,t=!0,t)}function T(f){if(r.type==="bot")return"";let g="";return E<500&&(g+="flex-direction:column;gap:0.4rem !important;",p?g+="align-items:end;":g+="align-items:start;"),g}function a(){switch(r.type){case"bot":return"typeBot";case"audio":return"typeAudio";case"image":return"typeImg";case"sticker":return"typeBot";case"pv":return"typePv";default:return""}}function d(){i(2,E=window.outerWidth)}const h=f=>M(f.target);return l.$$set=f=>{"data"in f&&i(0,r=f.data)},[r,u,E,o,p,M,T,a,d,h]}class gt extends ke{constructor(e){super(),Ie(this,e,Lt,Ut,ye,{data:0})}}function Bt(l){let e;return{c(){e=y("i"),this.h()},l(i){e=k(i,"I",{class:!0}),j(e).forEach(m),this.h()},h(){c(e,"class","fa-solid fa-circle-user svelte-16fo0sk")},m(i,t){C(i,e,t)},p:Y,d(i){i&&m(e)}}}function Dt(l){let e,i;return{c(){e=y("img"),this.h()},l(t){e=k(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Q(e.src,i=l[1].avatar)||c(e,"src",i),c(e,"alt","my avatar"),c(e,"class","svelte-16fo0sk")},m(t,s){C(t,e,s)},p(t,s){s&2&&!Q(e.src,i=t[1].avatar)&&c(e,"src",i)},d(t){t&&m(e)}}}function Ge(l){let e,i,t,s='<p class="montserrat-alternates-bold">Privado</p> <i class="fa-solid fa-message"></i>',n,o,r='<p class="montserrat-alternates-bold">cancelar</p> <i class="fas fa-times"></i>',u,p;function E(a,d){return a[3]?Ht:Vt}let M=E(l),T=M(l);return{c(){e=y("ul"),T.c(),i=U(),t=y("li"),t.innerHTML=s,n=U(),o=y("li"),o.innerHTML=r,this.h()},l(a){e=k(a,"UL",{class:!0});var d=j(e);T.l(d),i=L(d),t=k(d,"LI",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-1y20pd9"&&(t.innerHTML=s),n=L(d),o=k(d,"LI",{class:!0,"data-svelte-h":!0}),se(o)!=="svelte-v7ez2z"&&(o.innerHTML=r),d.forEach(m),this.h()},h(){c(t,"class","cancel svelte-16fo0sk"),c(o,"class","cancel svelte-16fo0sk"),c(e,"class","opts svelte-16fo0sk")},m(a,d){C(a,e,d),T.m(e,null),b(e,i),b(e,t),b(e,n),b(e,o),u||(p=[D(t,"click",l[7]),D(o,"click",l[4])],u=!0)},p(a,d){M===(M=E(a))&&T?T.p(a,d):(T.d(1),T=M(a),T&&(T.c(),T.m(e,i)))},d(a){a&&m(e),T.d(),u=!1,Ee(p)}}}function Vt(l){let e,i='<p class="montserrat-alternates-bold">silenciar</p> <i class="fas fa-volume-mute"></i>',t,s;return{c(){e=y("li"),e.innerHTML=i,this.h()},l(n){e=k(n,"LI",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-nq1i3d"&&(e.innerHTML=i),this.h()},h(){c(e,"class","silence svelte-16fo0sk")},m(n,o){C(n,e,o),t||(s=D(e,"click",l[9]),t=!0)},p:Y,d(n){n&&m(e),t=!1,s()}}}function Ht(l){let e,i='<p class="montserrat-alternates-bold">quitar silencio</p> <i class="fas fa-volume-up"></i>',t,s;return{c(){e=y("li"),e.innerHTML=i,this.h()},l(n){e=k(n,"LI",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1kkyzxq"&&(e.innerHTML=i),this.h()},h(){c(e,"class","silence svelte-16fo0sk")},m(n,o){C(n,e,o),t||(s=D(e,"click",l[8]),t=!0)},p:Y,d(n){n&&m(e),t=!1,s()}}}function Jt(l){let e,i,t,s=decodeURI(l[1].username)+"",n,o,r,u,p,E,M;function T(f,g){return f[1].avatar.length>0?Dt:Bt}let a=T(l),d=a(l),h=l[2]&&Ge(l);return{c(){e=y("article"),d.c(),i=U(),t=y("h4"),n=_e(s),o=U(),r=y("i"),u=U(),h&&h.c(),p=ie(),this.h()},l(f){e=k(f,"ARTICLE",{"data-id":!0,class:!0});var g=j(e);d.l(g),i=L(g),t=k(g,"H4",{class:!0});var w=j(t);n=be(w,s),w.forEach(m),o=L(g),r=k(g,"I",{class:!0}),j(r).forEach(m),g.forEach(m),u=L(f),h&&h.l(f),p=ie(),this.h()},h(){c(t,"class","montserrat-alternates-bold svelte-16fo0sk"),c(r,"class","fa-solid fa-circle-question svelte-16fo0sk"),c(e,"data-id",l[0]),c(e,"class","svelte-16fo0sk"),fe(e,"muted",l[3])},m(f,g){C(f,e,g),d.m(e,null),b(e,i),b(e,t),b(t,n),b(e,o),b(e,r),C(f,u,g),h&&h.m(f,g),C(f,p,g),E||(M=D(e,"click",l[4]),E=!0)},p(f,[g]){a===(a=T(f))&&d?d.p(f,g):(d.d(1),d=a(f),d&&(d.c(),d.m(e,i))),g&2&&s!==(s=decodeURI(f[1].username)+"")&&Te(n,s),g&1&&c(e,"data-id",f[0]),g&8&&fe(e,"muted",f[3]),f[2]?h?h.p(f,g):(h=Ge(f),h.c(),h.m(p.parentNode,p)):h&&(h.d(1),h=null)},i:Y,o:Y,d(f){f&&(m(e),m(u),m(p)),d.d(),h&&h.d(f),E=!1,M()}}}function zt(l,e,i){let t,s,n,o,r;J(l,Me,w=>i(10,t=w)),J(l,ve,w=>i(11,s=w)),J(l,je,w=>i(12,n=w)),J(l,ae,w=>i(13,o=w)),J(l,ht,w=>i(14,r=w));let{id:u}=e,{data:p}=e,E=!1;function M(){n.username!==p.username&&i(2,E=!E)}let T=!1;r.has(p.username)&&(T=!0);function a(w){n.username!==w&&(r.add(w),i(3,T=!0),i(2,E=!1))}function d(w){n.username===w||!r.delete(w)||(i(3,T=!1),i(2,E=!1))}function h(){o.send(JSON.stringify({type:"OPEN_PV",msg:{to:u}}));const w={id:u,nick:p.username,me:n.id,avatar:p.avatar};s.add(JSON.stringify(w)),ve.set(s),t.set(u,[]),i(2,E=!1)}const f=()=>d(p.username),g=()=>a(p.username);return l.$$set=w=>{"id"in w&&i(0,u=w.id),"data"in w&&i(1,p=w.data)},[u,p,E,T,M,a,d,h,f,g]}class qt extends ke{constructor(e){super(),Ie(this,e,zt,Jt,ye,{id:0,data:1})}}function Gt(l){let e,i,t,s;return{c(){e=y("section"),i=y("article"),t=y("h4"),s=_e(l[0]),this.h()},l(n){e=k(n,"SECTION",{class:!0});var o=j(e);i=k(o,"ARTICLE",{class:!0});var r=j(i);t=k(r,"H4",{class:!0});var u=j(t);s=be(u,l[0]),u.forEach(m),r.forEach(m),o.forEach(m),this.h()},h(){c(t,"class","montserrat-alternates-medium svelte-1wtc119"),c(i,"class","svelte-1wtc119"),c(e,"class","svelte-1wtc119")},m(n,o){C(n,e,o),b(e,i),b(i,t),b(t,s)},p(n,[o]){o&1&&Te(s,n[0])},i:Y,o:Y,d(n){n&&m(e)}}}function Kt(l,e,i){let t;J(l,Le,o=>i(2,t=o));let{msg:s}=e,{time:n}=e;return De(()=>{document.onkeydown=()=>!1}),mt(()=>{document.onkeydown=null}),setTimeout(()=>re(Le,t=!1,t),n),l.$$set=o=>{"msg"in o&&i(0,s=o.msg),"time"in o&&i(1,n=o.time)},[s,n]}class Ft extends ke{constructor(e){super(),Ie(this,e,Kt,Gt,ye,{msg:0,time:1})}}const Ke=["https://i.pinimg.com/564x/26/01/7e/26017ea921bf3f92ee09017d7a008c4c.jpg","https://i.pinimg.com/564x/b2/a5/22/b2a522fa576b9e883e8040d9f4971d57.jpg","https://i.pinimg.com/564x/e1/68/df/e168df965c1300c16a78fa6479f0f84b.jpg","https://i.pinimg.com/236x/3b/c1/90/3bc190d0fe1e5ab694eb48bb679617d6.jpg","https://i.pinimg.com/236x/0e/c5/26/0ec526b2677e3f4b59575b39e0c80c1a.jpg","https://i.pinimg.com/236x/f4/b6/ed/f4b6ed6ed97a5d568d18d9466b517e4d.jpg","https://i.pinimg.com/236x/c5/cb/6f/c5cb6fb8e5e9c0121c35bb63703553ff.jpg","https://i.pinimg.com/236x/3b/6a/f0/3b6af08fc3770a8323787a98b2295046.jpg","https://i.pinimg.com/236x/8e/a8/4a/8ea84ae43f94280f0f88b7a6bb640ca5.jpg","https://i.pinimg.com/236x/58/f6/a9/58f6a9167e1374a4ae98f560fb6bef08.jpg","https://i.pinimg.com/236x/6e/74/df/6e74df3fb594f746693d43aef71e7c20.jpg","https://i.pinimg.com/236x/81/04/79/8104795db0b5220f331b51b089aa1edb.jpg","https://i.pinimg.com/236x/4e/3c/47/4e3c47cb9ad9d86968ea5b1a8eee761f.jpg","https://i.pinimg.com/236x/f0/96/05/f09605c6a782601c5a516dc513fec8ab.jpg","https://i.pinimg.com/236x/ab/e5/28/abe528cc836c08c02ed39b4264bbfa2a.jpg","https://i.pinimg.com/236x/ae/e2/a0/aee2a0b025b7e676d491c58e64c0c0e0.jpg","https://i.pinimg.com/236x/ab/0f/f7/ab0ff72902f0ed5be507bb542f14e04c.jpg","https://i.pinimg.com/236x/5e/50/d3/5e50d303bff603bac964e9e1d70cc263.jpg","https://i.pinimg.com/236x/9e/1f/03/9e1f03aa60d4e8919484de08c4741c7d.jpg","https://i.pinimg.com/236x/4b/8c/f1/4b8cf19584ede706ad857b998cc39332.jpg","https://i.pinimg.com/236x/df/59/34/df5934ad681ad29edc0bc2a88ab538dc.jpg","https://i.pinimg.com/236x/b9/d2/4a/b9d24af77da570a5d304950974f5269e.jpg","https://media.tenor.com/Eet92-jhr3MAAAAj/hasher-happy-sticker.gif","https://media.tenor.com/rOZE9d6XIWIAAAAi/line.gif","https://media.tenor.com/eM0K9-K-hcUAAAAi/crying.gif","https://media.tenor.com/7VE1yyfi5CIAAAAi/fighting-addoil.gif","https://media.tenor.com/rXbN_gwjc7AAAAAi/alice-sticker-alice-animated.gif","https://media.tenor.com/5Ada5-x6Vz8AAAAj/cute.gif","https://media.tenor.com/OY6bIk0asR4AAAAj/quby.gif","https://media.tenor.com/pB8dRaVDsBwAAAAj/tkthao219-quby.gif","https://media.tenor.com/J2bPcmfvfaUAAAAj/tkthao219-quby.gif","https://media.tenor.com/JtV9gaxyavAAAAAj/peach-cat.gif","https://media.tenor.com/GTjXEnuTUUMAAAAj/loved-love.gif","https://media.tenor.com/7r6lLYznnTsAAAAj/sticker-cartoon.gif","https://media.tenor.com/Ck3Q6OuFmzQAAAAj/animated-stickers-good-morning.gif","https://media.tenor.com/nQUJSVnPH8sAAAAj/tkthao219-quby.gif","https://media.tenor.com/senzjQZHOZwAAAAj/hasher-sticker.gif","https://media.tenor.com/b87Ur_ijFF0AAAAj/char.gif","https://media.tenor.com/xPDDnUtYMS0AAAAj/line-sticker-thank-you-sticker.gif","https://media.tenor.com/ua3mX1agSvoAAAAj/hasher-sticker.gif","https://media.tenor.com/83rrChRnhVwAAAAj/tkthao219-quby.gif"],Fe=["https://cdn-icons-gif.flaticon.com/11175/11175766.gif","https://cdn-icons-gif.flaticon.com/11175/11175756.gif","https://cdn-icons-gif.flaticon.com/11175/11175791.gif","https://cdn-icons-gif.flaticon.com/11175/11175758.gif","https://cdn-icons-gif.flaticon.com/11175/11175773.gif","https://cdn-icons-gif.flaticon.com/11175/11175734.gif","https://cdn-icons-gif.flaticon.com/14662/14662094.gif","https://cdn-icons-gif.flaticon.com/11175/11175789.gif","https://cdn-icons-gif.flaticon.com/11175/11175746.gif","https://cdn-icons-gif.flaticon.com/11175/11175743.gif","https://cdn-icons-gif.flaticon.com/11186/11186841.gif","https://cdn-icons-gif.flaticon.com/12761/12761197.gif","https://cdn-icons-gif.flaticon.com/11175/11175772.gif","https://cdn-icons-gif.flaticon.com/11175/11175744.gif","https://cdn-icons-gif.flaticon.com/15600/15600673.gif","https://cdn-icons-gif.flaticon.com/11175/11175739.gif","https://cdn-icons-gif.flaticon.com/11175/11175774.gif","https://cdn-icons-gif.flaticon.com/11175/11175774.gif","https://cdn-icons-gif.flaticon.com/11175/11175795.gif","https://cdn-icons-gif.flaticon.com/11175/11175729.gif","https://cdn-icons-gif.flaticon.com/11175/11175745.gif","https://cdn-icons-gif.flaticon.com/11175/11175775.gif","https://cdn-icons-gif.flaticon.com/11175/11175768.gif","https://cdn-icons-gif.flaticon.com/7158/7158913.gif","https://cdn-icons-gif.flaticon.com/7158/7158942.gif","https://cdn-icons-gif.flaticon.com/11175/11175748.gif","https://cdn-icons-gif.flaticon.com/7158/7158899.gif","https://cdn-icons-gif.flaticon.com/11175/11175770.gif","https://cdn-icons-gif.flaticon.com/7159/7159012.gif","https://cdn-icons-gif.flaticon.com/11175/11175737.gif","https://cdn-icons-gif.flaticon.com/15747/15747195.gif","https://cdn-icons-gif.flaticon.com/11175/11175760.gif","https://cdn-icons-gif.flaticon.com/15541/15541996.gif","https://cdn-icons-gif.flaticon.com/7158/7158926.gif","https://cdn-icons-gif.flaticon.com/8121/8121321.gif","https://cdn-icons-gif.flaticon.com/11175/11175754.gif","https://cdn-icons-gif.flaticon.com/11175/11175793.gif","https://cdn-icons-gif.flaticon.com/11175/11175741.gif","https://cdn-icons-gif.flaticon.com/11175/11175749.gif","https://cdn-icons-gif.flaticon.com/11175/11175761.gif","https://cdn-icons-gif.flaticon.com/11175/11175776.gif","https://cdn-icons-gif.flaticon.com/11175/11175763.gif","https://cdn-icons-gif.flaticon.com/11175/11175747.gif","https://cdn-icons-gif.flaticon.com/12761/12761156.gif","https://cdn-icons-gif.flaticon.com/11175/11175757.gif","https://cdn-icons-gif.flaticon.com/11633/11633770.gif","https://cdn-icons-gif.flaticon.com/7158/7158896.gif","https://cdn-icons-gif.flaticon.com/11260/11260696.gif","https://cdn-icons-gif.flaticon.com/11255/11255987.gif","https://cdn-icons-gif.flaticon.com/7158/7158986.gif","https://cdn-icons-gif.flaticon.com/11175/11175786.gif","https://cdn-icons-gif.flaticon.com/11175/11175753.gif","https://cdn-icons-gif.flaticon.com/11175/11175750.gif","https://cdn-icons-gif.flaticon.com/11175/11175762.gif","https://cdn-icons-gif.flaticon.com/11175/11175731.gif","https://cdn-icons-gif.flaticon.com/11175/11175765.gif","https://cdn-icons-gif.flaticon.com/11175/11175771.gif","https://cdn-icons-gif.flaticon.com/11175/11175798.gif","https://cdn-icons-gif.flaticon.com/7158/7158960.gif","https://cdn-icons-gif.flaticon.com/7158/7158864.gif","https://cdn-icons-gif.flaticon.com/7159/7159000.gif","https://cdn-icons-gif.flaticon.com/11175/11175782.gif","https://cdn-icons-gif.flaticon.com/7159/7159004.gif","https://cdn-icons-gif.flaticon.com/11175/11175752.gif","https://cdn-icons-gif.flaticon.com/7158/7158953.gif","https://cdn-icons-gif.flaticon.com/11175/11175780.gif","https://cdn-icons-gif.flaticon.com/14240/14240874.gif","https://cdn-icons-gif.flaticon.com/7158/7158911.gif","https://cdn-icons-gif.flaticon.com/7159/7159011.gif","https://cdn-icons-gif.flaticon.com/7158/7158902.gif","https://cdn-icons-gif.flaticon.com/7158/7158906.gif","https://cdn-icons-gif.flaticon.com/11175/11175767.gif","https://cdn-icons-gif.flaticon.com/11175/11175784.gif","https://cdn-icons-gif.flaticon.com/12817/12817619.gif","https://cdn-icons-gif.flaticon.com/15579/15579038.gif","https://cdn-icons-gif.flaticon.com/15600/15600699.gif","https://cdn-icons-gif.flaticon.com/11255/11255986.gif","https://cdn-icons-gif.flaticon.com/14662/14662091.gif","https://cdn-icons-gif.flaticon.com/14676/14676105.gif","https://cdn-icons-gif.flaticon.com/14676/14676110.gif","https://cdn-icons-gif.flaticon.com/15578/15578976.gif","https://cdn-icons-gif.flaticon.com/16678/16678032.gif","https://cdn-icons-gif.flaticon.com/7158/7158990.gif"];function Xe(l,e,i){const t=l.slice();return t[17]=e[i],t}function Ye(l,e,i){const t=l.slice();return t[20]=e[i],t}function We(l){let e,i,t,s="Emojis",n,o,r="stickers",u,p,E,M,T,a=l[1]===l[3].EMOJI&&Qe(l),d=l[1]===l[3].STICKER&&$e(l);return{c(){e=y("div"),i=y("div"),t=y("h5"),t.textContent=s,n=U(),o=y("h5"),o.textContent=r,u=U(),p=y("div"),a&&a.c(),E=U(),d&&d.c(),this.h()},l(h){e=k(h,"DIV",{class:!0});var f=j(e);i=k(f,"DIV",{class:!0});var g=j(i);t=k(g,"H5",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-la7pmz"&&(t.textContent=s),n=L(g),o=k(g,"H5",{class:!0,"data-svelte-h":!0}),se(o)!=="svelte-15vafyv"&&(o.textContent=r),g.forEach(m),u=L(f),p=k(f,"DIV",{class:!0});var w=j(p);a&&a.l(w),E=L(w),d&&d.l(w),w.forEach(m),f.forEach(m),this.h()},h(){c(t,"class","activeTab montserrat-alternates-bold svelte-1s5h8gr"),fe(t,"activeTab",l[1]===l[3].EMOJI),c(o,"class","montserrat-alternates-bold svelte-1s5h8gr"),fe(o,"activeTab",l[1]===l[3].STICKER),c(i,"class","tab svelte-1s5h8gr"),c(p,"class","mojis svelte-1s5h8gr"),c(e,"class","emojisBX svelte-1s5h8gr")},m(h,f){C(h,e,f),b(e,i),b(i,t),b(i,n),b(i,o),b(e,u),b(e,p),a&&a.m(p,null),b(p,E),d&&d.m(p,null),M||(T=[D(t,"click",l[9]),D(o,"click",l[10])],M=!0)},p(h,f){f&10&&fe(t,"activeTab",h[1]===h[3].EMOJI),f&10&&fe(o,"activeTab",h[1]===h[3].STICKER),h[1]===h[3].EMOJI?a?a.p(h,f):(a=Qe(h),a.c(),a.m(p,E)):a&&(a.d(1),a=null),h[1]===h[3].STICKER?d?d.p(h,f):(d=$e(h),d.c(),d.m(p,null)):d&&(d.d(1),d=null)},d(h){h&&m(e),a&&a.d(),d&&d.d(),M=!1,Ee(T)}}}function Qe(l){let e,i=$(Fe),t=[];for(let s=0;s<i.length;s+=1)t[s]=Ze(Ye(l,i,s));return{c(){e=y("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=k(s,"DIV",{class:!0});var n=j(e);for(let o=0;o<t.length;o+=1)t[o].l(n);n.forEach(m),this.h()},h(){c(e,"class","caritasBX svelte-1s5h8gr")},m(s,n){C(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(s,n){if(n&32){i=$(Fe);let o;for(o=0;o<i.length;o+=1){const r=Ye(s,i,o);t[o]?t[o].p(r,n):(t[o]=Ze(r),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=i.length}},d(s){s&&m(e),we(t,s)}}}function Ze(l){let e,i,t,s;function n(){return l[11](l[20])}return{c(){e=y("img"),this.h()},l(o){e=k(o,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Q(e.src,i=l[20])||c(e,"src",i),c(e,"alt","sticker"),c(e,"class","svelte-1s5h8gr")},m(o,r){C(o,e,r),t||(s=D(e,"click",n),t=!0)},p(o,r){l=o},d(o){o&&m(e),t=!1,s()}}}function $e(l){let e,i=$(Ke),t=[];for(let s=0;s<i.length;s+=1)t[s]=xe(Xe(l,i,s));return{c(){e=y("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=k(s,"DIV",{class:!0});var n=j(e);for(let o=0;o<t.length;o+=1)t[o].l(n);n.forEach(m),this.h()},h(){c(e,"class","stickersBX svelte-1s5h8gr")},m(s,n){C(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(s,n){if(n&32){i=$(Ke);let o;for(o=0;o<i.length;o+=1){const r=Xe(s,i,o);t[o]?t[o].p(r,n):(t[o]=xe(r),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=i.length}},d(s){s&&m(e),we(t,s)}}}function xe(l){let e,i,t,s;function n(){return l[12](l[17])}return{c(){e=y("img"),this.h()},l(o){e=k(o,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Q(e.src,i=l[17])||c(e,"src",i),c(e,"alt","sticker"),c(e,"class","svelte-1s5h8gr")},m(o,r){C(o,e,r),t||(s=D(e,"click",n),t=!0)},p(o,r){l=o},d(o){o&&m(e),t=!1,s()}}}function Xt(l){let e,i,t,s='<button class="montserrat-alternates-bold svelte-1s5h8gr" style="font-size:1.3rem;">T</button>',n,o,r,u,p,E='<i class="fa-solid fa-image svelte-1s5h8gr"></i>',M,T,a,d,h,f,g,w,B,_,I,S=l[0]&&We(l);return{c(){e=y("div"),i=y("div"),t=y("div"),t.innerHTML=s,n=U(),o=y("div"),r=y("input"),u=U(),p=y("label"),p.innerHTML=E,M=U(),T=y("div"),a=y("button"),d=y("i"),f=U(),g=y("div"),w=y("i"),B=U(),S&&S.c(),this.h()},l(R){e=k(R,"DIV",{class:!0});var V=j(e);i=k(V,"DIV",{class:!0});var H=j(i);t=k(H,"DIV",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-1j7ahwz"&&(t.innerHTML=s),n=L(H),o=k(H,"DIV",{class:!0});var W=j(o);r=k(W,"INPUT",{type:!0,accept:!0,id:!0}),u=L(W),p=k(W,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),se(p)!=="svelte-r2pi9w"&&(p.innerHTML=E),W.forEach(m),M=L(H),T=k(H,"DIV",{class:!0});var X=j(T);a=k(X,"BUTTON",{class:!0});var oe=j(a);d=k(oe,"I",{class:!0}),j(d).forEach(m),oe.forEach(m),X.forEach(m),H.forEach(m),f=L(V),g=k(V,"DIV",{class:!0});var le=j(g);w=k(le,"I",{class:!0}),j(w).forEach(m),B=L(le),S&&S.l(le),le.forEach(m),V.forEach(m),this.h()},h(){c(t,"class","txtStyle svelte-1s5h8gr"),c(r,"type","file"),c(r,"accept","image/*"),r.hidden=!0,c(r,"id","upImg"),c(p,"for","upImg"),c(p,"class","svelte-1s5h8gr"),c(o,"class","sendImg svelte-1s5h8gr"),c(d,"class",h=Ae(`fa-solid fa-microphone ${l[2]?"rec":"stop"}`)+" svelte-1s5h8gr"),c(a,"class","svelte-1s5h8gr"),c(T,"class","sendAudio svelte-1s5h8gr"),c(i,"class","main svelte-1s5h8gr"),c(w,"class","fa-solid fa-face-grin-beam svelte-1s5h8gr"),c(g,"class","emojis svelte-1s5h8gr"),c(e,"class","tools svelte-1s5h8gr")},m(R,V){C(R,e,V),b(e,i),b(i,t),b(i,n),b(i,o),b(o,r),b(o,u),b(o,p),b(i,M),b(i,T),b(T,a),b(a,d),b(e,f),b(e,g),b(g,w),b(g,B),S&&S.m(g,null),_||(I=[D(r,"change",l[7]),D(a,"click",l[6]),D(w,"click",l[8])],_=!0)},p(R,[V]){V&4&&h!==(h=Ae(`fa-solid fa-microphone ${R[2]?"rec":"stop"}`)+" svelte-1s5h8gr")&&c(d,"class",h),R[0]?S?S.p(R,V):(S=We(R),S.c(),S.m(g,null)):S&&(S.d(1),S=null)},i:Y,o:Y,d(R){R&&m(e),S&&S.d(),_=!1,Ee(I)}}}const et="https://frensgo.lat";function Yt(l,e,i){let t;J(l,ae,_=>i(14,t=_));var s=(_=>(_.EMOJI="emoji",_.STICKER="sticker",_))(s||{});let n=!1,o="emoji";function r(_){o!==_&&i(1,o=_)}function u(_){t.send(JSON.stringify({type:"STICKER",msg:_})),i(0,n=!1)}let p=null,E=!1;function M(){p||E||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia({audio:!0}).then(_=>{p=new MediaRecorder(_);let I=[];p.ondataavailable=S=>{I.push(S.data)},p.onstop=async()=>{const S=new Blob(I,{type:"audio/ogg;codecs=opus"});I=[];const R=new FormData;R.append("audio",S);const H=await(await fetch(`${et}/audio`,{method:"POST",body:R})).text();t.send(JSON.stringify({type:"AUDIO",msg:H}))},p.start(),i(2,E=!0)}).catch(_=>console.log(_))}function T(){p&&E&&(p.stop(),p=null,i(2,E=!1))}function a(){E?T():M()}async function d(_){const I=_.target.files[0];if(I.size>5e6){alert("La imágen es muy pesada");return}if(!/^image\/....?$/.test(I.type)){alert("Por favor elija una imágen válida");return}const S=new FormData;S.append("image",I);const V=await(await fetch(`${et}/upImg`,{method:"POST",body:S})).text();t.send(JSON.stringify({type:"IMG",msg:V}))}return[n,o,E,s,r,u,a,d,()=>i(0,n=!n),()=>{r(s.EMOJI)},()=>{r(s.STICKER)},_=>u(_),_=>u(_)]}class Wt extends ke{constructor(e){super(),Ie(this,e,Yt,Xt,ye,{})}}function Qt(l){let e,i,t,s,n,o,r;return{c(){e=y("div"),i=y("i"),t=U(),s=y("img"),this.h()},l(u){e=k(u,"DIV",{class:!0});var p=j(e);i=k(p,"I",{class:!0}),j(i).forEach(m),t=L(p),s=k(p,"IMG",{src:!0,alt:!0,class:!0}),p.forEach(m),this.h()},h(){c(i,"class","fas fa-times svelte-a6okt0"),Q(s.src,n=l[1])||c(s,"src",n),c(s,"alt","Una imagen"),c(s,"class","svelte-a6okt0"),c(e,"class","modal svelte-a6okt0")},m(u,p){C(u,e,p),b(e,i),b(e,t),b(e,s),o||(r=D(i,"click",l[2]),o=!0)},p(u,[p]){p&2&&!Q(s.src,n=u[1])&&c(s,"src",n)},i:Y,o:Y,d(u){u&&m(e),o=!1,r()}}}function Zt(l,e,i){let t,s;return J(l,Se,o=>i(0,t=o)),J(l,Ue,o=>i(1,s=o)),[t,s,()=>re(Se,t=!1,t)]}class $t extends ke{constructor(e){super(),Ie(this,e,Zt,Qt,ye,{})}}const{window:Re}=Et;function tt(l,e,i){const t=l.slice();return t[29]=e[i],t}function xt(l){let e;return{c(){e=y("i"),this.h()},l(i){e=k(i,"I",{class:!0}),j(e).forEach(m),this.h()},h(){c(e,"class","fa-solid fa-circle-user svelte-yyv3x1")},m(i,t){C(i,e,t)},p:Y,d(i){i&&m(e)}}}function ei(l){let e;function i(n,o){return n[2].length>0?ii:ti}let t=i(l),s=t(l);return{c(){s.c(),e=ie()},l(n){s.l(n),e=ie()},m(n,o){s.m(n,o),C(n,e,o)},p(n,o){t===(t=i(n))&&s?s.p(n,o):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){n&&m(e),s.d(n)}}}function ti(l){let e;return{c(){e=y("i"),this.h()},l(i){e=k(i,"I",{class:!0}),j(e).forEach(m),this.h()},h(){c(e,"class","fa-solid fa-circle-user svelte-yyv3x1")},m(i,t){C(i,e,t)},p:Y,d(i){i&&m(e)}}}function ii(l){let e,i;return{c(){e=y("img"),this.h()},l(t){e=k(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Q(e.src,i=l[2])||c(e,"src",i),c(e,"alt","avatar of user"),c(e,"class","svelte-yyv3x1")},m(t,s){C(t,e,s)},p(t,s){s[0]&4&&!Q(e.src,i=t[2])&&c(e,"src",i)},d(t){t&&m(e)}}}function it(l){let e,i=l[10].get(l[1]).length>0,t,s,n,o,r,u,p='<i class="fa-solid fa-paper-plane svelte-yyv3x1"></i>',E,M,T,a=i&&st(l);return{c(){e=y("div"),a&&a.c(),t=U(),s=y("div"),n=y("form"),o=y("input"),r=U(),u=y("button"),u.innerHTML=p,this.h()},l(d){e=k(d,"DIV",{class:!0});var h=j(e);a&&a.l(h),h.forEach(m),t=L(d),s=k(d,"DIV",{class:!0});var f=j(s);n=k(f,"FORM",{class:!0});var g=j(n);o=k(g,"INPUT",{type:!0,placeholder:!0,minlength:!0,maxlength:!0,class:!0}),r=L(g),u=k(g,"BUTTON",{class:!0,"data-svelte-h":!0}),se(u)!=="svelte-1m1u804"&&(u.innerHTML=p),g.forEach(m),f.forEach(m),this.h()},h(){c(e,"class","body svelte-yyv3x1"),c(o,"type","text"),c(o,"placeholder","Escribe tu mensaje..."),c(o,"minlength","1"),c(o,"maxlength","120"),o.required=!0,c(o,"class","montserrat-alternates-regular svelte-yyv3x1"),c(u,"class","svelte-yyv3x1"),c(n,"class","svelte-yyv3x1"),c(s,"class","footer svelte-yyv3x1")},m(d,h){C(d,e,h),a&&a.m(e,null),l[19](e),C(d,t,h),C(d,s,h),b(s,n),b(n,o),Be(o,l[9]),b(n,r),b(n,u),E=!0,M||(T=[D(o,"input",l[20]),D(n,"submit",pt(l[16]))],M=!0)},p(d,h){h[0]&1026&&(i=d[10].get(d[1]).length>0),i?a?(a.p(d,h),h[0]&1026&&N(a,1)):(a=st(d),a.c(),N(a,1),a.m(e,null)):a&&(ne(),K(a,1,1,()=>{a=null}),ce()),h[0]&512&&o.value!==d[9]&&Be(o,d[9])},i(d){E||(N(a),E=!0)},o(d){K(a),E=!1},d(d){d&&(m(e),m(t),m(s)),a&&a.d(),l[19](null),M=!1,Ee(T)}}}function st(l){let e,i,t=$([...l[10]][0][1]),s=[];for(let o=0;o<t.length;o+=1)s[o]=lt(tt(l,t,o));const n=o=>K(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=ie()},l(o){for(let r=0;r<s.length;r+=1)s[r].l(o);e=ie()},m(o,r){for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(o,r);C(o,e,r),i=!0},p(o,r){if(r[0]&1024){t=$([...o[10]][0][1]);let u;for(u=0;u<t.length;u+=1){const p=tt(o,t,u);s[u]?(s[u].p(p,r),N(s[u],1)):(s[u]=lt(p),s[u].c(),N(s[u],1),s[u].m(e.parentNode,e))}for(ne(),u=t.length;u<s.length;u+=1)n(u);ce()}},i(o){if(!i){for(let r=0;r<t.length;r+=1)N(s[r]);i=!0}},o(o){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)K(s[r]);i=!1},d(o){o&&m(e),we(s,o)}}}function lt(l){let e,i;return e=new gt({props:{data:l[29]}}),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,s){he(e,t,s),i=!0},p(t,s){const n={};s[0]&1024&&(n.data=t[29]),e.$set(n)},i(t){i||(N(e.$$.fragment,t),i=!0)},o(t){K(e.$$.fragment,t),i=!1},d(t){me(e,t)}}}function si(l){let e,i,t,s,n,o,r,u,p,E,M,T,a,d,h,f,g;function w(S,R){return S[2]?ei:xt}let B=w(l),_=B(l),I=!l[8]&&it(l);return{c(){e=y("div"),i=y("div"),t=y("div"),_.c(),s=U(),n=y("h3"),o=_e(l[0]),r=U(),u=y("div"),p=y("i"),E=U(),M=y("i"),T=U(),I&&I.c(),this.h()},l(S){e=k(S,"DIV",{class:!0,id:!0,style:!0});var R=j(e);i=k(R,"DIV",{class:!0});var V=j(i);t=k(V,"DIV",{class:!0});var H=j(t);_.l(H),s=L(H),n=k(H,"H3",{class:!0});var W=j(n);o=be(W,l[0]),W.forEach(m),H.forEach(m),r=L(V),u=k(V,"DIV",{class:!0});var X=j(u);p=k(X,"I",{class:!0}),j(p).forEach(m),E=L(X),M=k(X,"I",{class:!0}),j(M).forEach(m),X.forEach(m),V.forEach(m),T=L(R),I&&I.l(R),R.forEach(m),this.h()},h(){c(n,"class","montserrat-alternates-bold"),c(t,"class","left svelte-yyv3x1"),c(p,"class","fa-solid fa-down-left-and-up-right-to-center svelte-yyv3x1"),c(M,"class","fas fa-times svelte-yyv3x1"),c(u,"class","right svelte-yyv3x1"),c(i,"class","header svelte-yyv3x1"),c(e,"class","pvWindow svelte-yyv3x1"),c(e,"id",a=l[1].toString()),c(e,"style",d=`left:${l[6]}px; top:${l[7]}px; z-index:${l[5]}`),fe(e,"minimize",l[8])},m(S,R){C(S,e,R),b(e,i),b(i,t),_.m(t,null),b(t,s),b(t,n),b(n,o),b(i,r),b(i,u),b(u,p),b(u,E),b(u,M),b(e,T),I&&I.m(e,null),l[21](e),h=!0,f||(g=[D(Re,"mouseup",l[13]),D(Re,"mousemove",l[14]),D(Re,"touchend",l[13]),D(Re,"touchmove",l[15]),D(p,"click",l[18]),D(M,"click",l[11]),D(i,"mousedown",l[12]),D(i,"touchstart",l[12],{passive:!0})],f=!0)},p(S,R){B===(B=w(S))&&_?_.p(S,R):(_.d(1),_=B(S),_&&(_.c(),_.m(t,s))),(!h||R[0]&1)&&Te(o,S[0]),S[8]?I&&(ne(),K(I,1,1,()=>{I=null}),ce()):I?(I.p(S,R),R[0]&256&&N(I,1)):(I=it(S),I.c(),N(I,1),I.m(e,null)),(!h||R[0]&2&&a!==(a=S[1].toString()))&&c(e,"id",a),(!h||R[0]&224&&d!==(d=`left:${S[6]}px; top:${S[7]}px; z-index:${S[5]}`))&&c(e,"style",d),(!h||R[0]&256)&&fe(e,"minimize",S[8])},i(S){h||(N(I),h=!0)},o(S){K(I),h=!1},d(S){S&&m(e),_.d(),I&&I.d(),l[21](null),f=!1,Ee(g)}}}function li(l){l.scroll({top:l.scrollHeight,behavior:"smooth"})}function oi(l,e,i){let t,s,n,o;J(l,Me,O=>i(10,t=O)),J(l,je,O=>i(25,s=O)),J(l,ae,O=>i(26,n=O)),J(l,ve,O=>i(27,o=O));let{nick:r}=e,{fromId:u}=e,{me:p}=e,{avatar:E}=e,M,T,a=100,d=300,h=Math.round(Math.random()*400),f=!1,g=!1,w;De(()=>{window.outerWidth<500&&i(6,d=0)});function B(){const O=JSON.stringify({id:u,nick:r,me:p,avatar:E});o.has(O)&&(o.delete(O),ve.set(o),t.delete(u),n.send(JSON.stringify({type:"CLOSE_PV",msg:{to:u,nick:r}})))}let _=0;function I(){const{top:O}=T.getBoundingClientRect();_=O,i(5,a++,a),f=!0}function S(){f=!1}function R(O){f&&(i(6,d+=O.movementX),i(7,h+=O.movementY))}function V(O){if(f){const{clientY:F}=O.touches[0],te=F-_;if(isNaN(te))return;i(7,h=h+te),_=F}}function H(){console.log(s.avatar),!(!w||w.length===0||w.length>120)&&(n.send(JSON.stringify({type:"PV",msg:{to:u,body:w.trim()}})),t.get(u).push({username:s.username,body:w,type:"pv",avatar:s.avatar}),Me.set(t),setTimeout(()=>li(M),.1),i(9,w=""))}const W=()=>i(8,g=!g);function X(O){Je[O?"unshift":"push"](()=>{M=O,i(3,M)})}function oe(){w=this.value,i(9,w)}function le(O){Je[O?"unshift":"push"](()=>{T=O,i(4,T)})}return l.$$set=O=>{"nick"in O&&i(0,r=O.nick),"fromId"in O&&i(1,u=O.fromId),"me"in O&&i(17,p=O.me),"avatar"in O&&i(2,E=O.avatar)},[r,u,E,M,T,a,d,h,g,w,t,B,I,S,R,V,H,p,W,X,oe,le]}class ni extends ke{constructor(e){super(),Ie(this,e,oi,si,ye,{nick:0,fromId:1,me:17,avatar:2},null,[-1,-1])}}function ot(l,e,i){const t=l.slice();return t[18]=e[i][0],t[19]=e[i][1],t}function nt(l,e,i){const t=l.slice();return t[22]=e[i],t}function ct(l,e,i){const t=l.slice();return t[25]=e[i],t}function at(l){let e,i;return e=new Ft({props:{msg:"Aver si nos calmamos un poquito :)",time:5e3}}),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,s){he(e,t,s),i=!0},i(t){i||(N(e.$$.fragment,t),i=!0)},o(t){K(e.$$.fragment,t),i=!1},d(t){me(e,t)}}}function rt(l){let e,i;return e=new $t({}),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,s){he(e,t,s),i=!0},i(t){i||(N(e.$$.fragment,t),i=!0)},o(t){K(e.$$.fragment,t),i=!1},d(t){me(e,t)}}}function ft(l){let e,i;return e=new ni({props:{nick:JSON.parse(l[25]).nick,fromId:JSON.parse(l[25]).id,me:JSON.parse(l[25]).me,avatar:JSON.parse(l[25]).avatar}}),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,s){he(e,t,s),i=!0},p(t,s){const n={};s&16&&(n.nick=JSON.parse(t[25]).nick),s&16&&(n.fromId=JSON.parse(t[25]).id),s&16&&(n.me=JSON.parse(t[25]).me),s&16&&(n.avatar=JSON.parse(t[25]).avatar),e.$set(n)},i(t){i||(N(e.$$.fragment,t),i=!0)},o(t){K(e.$$.fragment,t),i=!1},d(t){me(e,t)}}}function ut(l){let e,i;return e=new gt({props:{data:l[22]}}),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,s){he(e,t,s),i=!0},p(t,s){const n={};s&8&&(n.data=t[22]),e.$set(n)},i(t){i||(N(e.$$.fragment,t),i=!0)},o(t){K(e.$$.fragment,t),i=!1},d(t){me(e,t)}}}function dt(l){let e,i;return e=new qt({props:{id:l[18],data:l[19]}}),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,s){he(e,t,s),i=!0},p(t,s){const n={};s&4&&(n.id=t[18]),s&4&&(n.data=t[19]),e.$set(n)},i(t){i||(N(e.$$.fragment,t),i=!0)},o(t){K(e.$$.fragment,t),i=!1},d(t){me(e,t)}}}function ci(l){let e,i,t,s,n,o,r,u,p,E,M,T,a,d,h,f,g='<i class="fa-solid fa-paper-plane svelte-1vmv3y4"></i>',w,B,_,I,S=l[2].size+"",R,V,H,W,X,oe,le,O=l[5]&&at(),F=l[6]&&l[7]&&rt(),te=$(l[4]),z=[];for(let v=0;v<te.length;v+=1)z[v]=ft(ct(l,te,v));const vt=v=>K(z[v],1,1,()=>{z[v]=null});s=new wt({});let pe=$(l[3]),q=[];for(let v=0;v<pe.length;v+=1)q[v]=ut(nt(l,pe,v));const _t=v=>K(q[v],1,1,()=>{q[v]=null});M=new Wt({});let ge=$(l[2].entries()),G=[];for(let v=0;v<ge.length;v+=1)G[v]=dt(ot(l,ge,v));const bt=v=>K(G[v],1,1,()=>{G[v]=null});return{c(){O&&O.c(),e=U(),F&&F.c(),i=U();for(let v=0;v<z.length;v+=1)z[v].c();t=U(),ue(s.$$.fragment),n=U(),o=y("section"),r=y("article"),u=y("div");for(let v=0;v<q.length;v+=1)q[v].c();p=U(),E=y("div"),ue(M.$$.fragment),T=U(),a=y("form"),d=y("input"),h=U(),f=y("button"),f.innerHTML=g,w=U(),B=y("article"),_=y("h3"),I=_e("Usuarios conectados: "),R=_e(S),V=U(),H=y("div");for(let v=0;v<G.length;v+=1)G[v].c();this.h()},l(v){O&&O.l(v),e=L(v),F&&F.l(v),i=L(v);for(let ee=0;ee<z.length;ee+=1)z[ee].l(v);t=L(v),de(s.$$.fragment,v),n=L(v),o=k(v,"SECTION",{class:!0});var P=j(o);r=k(P,"ARTICLE",{class:!0});var A=j(r);u=k(A,"DIV",{class:!0});var x=j(u);for(let ee=0;ee<q.length;ee+=1)q[ee].l(x);x.forEach(m),p=L(A),E=k(A,"DIV",{class:!0});var Oe=j(E);de(M.$$.fragment,Oe),T=L(Oe),a=k(Oe,"FORM",{class:!0});var Pe=j(a);d=k(Pe,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,minlength:!0}),h=L(Pe),f=k(Pe,"BUTTON",{class:!0,"data-svelte-h":!0}),se(f)!=="svelte-1m1u804"&&(f.innerHTML=g),Pe.forEach(m),Oe.forEach(m),A.forEach(m),w=L(P),B=k(P,"ARTICLE",{class:!0});var Ce=j(B);_=k(Ce,"H3",{class:!0});var Ve=j(_);I=be(Ve,"Usuarios conectados: "),R=be(Ve,S),Ve.forEach(m),V=L(Ce),H=k(Ce,"DIV",{class:!0});var ze=j(H);for(let ee=0;ee<G.length;ee+=1)G[ee].l(ze);ze.forEach(m),Ce.forEach(m),P.forEach(m),this.h()},h(){c(u,"class","chat svelte-1vmv3y4"),c(d,"class","montserrat-alternates-regular svelte-1vmv3y4"),c(d,"type","text"),c(d,"placeholder","Escribe tu mensaje..."),c(d,"maxlength","120"),c(d,"minlength","1"),c(f,"class","svelte-1vmv3y4"),c(a,"class","svelte-1vmv3y4"),c(E,"class","msg svelte-1vmv3y4"),c(r,"class","chatBX svelte-1vmv3y4"),c(_,"class","montserrat-alternates-bold svelte-1vmv3y4"),c(H,"class","userlist svelte-1vmv3y4"),c(B,"class",W=Ae(`users ${l[8]?"showUserlist":""}`)+" svelte-1vmv3y4"),c(o,"class","svelte-1vmv3y4")},m(v,P){O&&O.m(v,P),C(v,e,P),F&&F.m(v,P),C(v,i,P);for(let A=0;A<z.length;A+=1)z[A]&&z[A].m(v,P);C(v,t,P),he(s,v,P),C(v,n,P),C(v,o,P),b(o,r),b(r,u);for(let A=0;A<q.length;A+=1)q[A]&&q[A].m(u,null);l[10](u),b(r,p),b(r,E),he(M,E,null),b(E,T),b(E,a),b(a,d),Be(d,l[0]),b(a,h),b(a,f),b(o,w),b(o,B),b(B,_),b(_,I),b(_,R),b(B,V),b(B,H);for(let A=0;A<G.length;A+=1)G[A]&&G[A].m(H,null);X=!0,oe||(le=[D(d,"input",l[11]),D(a,"submit",pt(l[9]))],oe=!0)},p(v,[P]){if(v[5]?O?P&32&&N(O,1):(O=at(),O.c(),N(O,1),O.m(e.parentNode,e)):O&&(ne(),K(O,1,1,()=>{O=null}),ce()),v[6]&&v[7]?F?P&192&&N(F,1):(F=rt(),F.c(),N(F,1),F.m(i.parentNode,i)):F&&(ne(),K(F,1,1,()=>{F=null}),ce()),P&16){te=$(v[4]);let A;for(A=0;A<te.length;A+=1){const x=ct(v,te,A);z[A]?(z[A].p(x,P),N(z[A],1)):(z[A]=ft(x),z[A].c(),N(z[A],1),z[A].m(t.parentNode,t))}for(ne(),A=te.length;A<z.length;A+=1)vt(A);ce()}if(P&8){pe=$(v[3]);let A;for(A=0;A<pe.length;A+=1){const x=nt(v,pe,A);q[A]?(q[A].p(x,P),N(q[A],1)):(q[A]=ut(x),q[A].c(),N(q[A],1),q[A].m(u,null))}for(ne(),A=pe.length;A<q.length;A+=1)_t(A);ce()}if(P&1&&d.value!==v[0]&&Be(d,v[0]),(!X||P&4)&&S!==(S=v[2].size+"")&&Te(R,S),P&4){ge=$(v[2].entries());let A;for(A=0;A<ge.length;A+=1){const x=ot(v,ge,A);G[A]?(G[A].p(x,P),N(G[A],1)):(G[A]=dt(x),G[A].c(),N(G[A],1),G[A].m(H,null))}for(ne(),A=ge.length;A<G.length;A+=1)bt(A);ce()}(!X||P&256&&W!==(W=Ae(`users ${v[8]?"showUserlist":""}`)+" svelte-1vmv3y4"))&&c(B,"class",W)},i(v){if(!X){N(O),N(F);for(let P=0;P<te.length;P+=1)N(z[P]);N(s.$$.fragment,v);for(let P=0;P<pe.length;P+=1)N(q[P]);N(M.$$.fragment,v);for(let P=0;P<ge.length;P+=1)N(G[P]);X=!0}},o(v){K(O),K(F),z=z.filter(Boolean);for(let P=0;P<z.length;P+=1)K(z[P]);K(s.$$.fragment,v),q=q.filter(Boolean);for(let P=0;P<q.length;P+=1)K(q[P]);K(M.$$.fragment,v),G=G.filter(Boolean);for(let P=0;P<G.length;P+=1)K(G[P]);X=!1},d(v){v&&(m(e),m(i),m(t),m(n),m(o)),O&&O.d(v),F&&F.d(v),we(z,v),me(s,v),we(q,v),l[10](null),me(M),we(G,v),oe=!1,Ee(le)}}}function Ne(l){l.scroll({top:l.scrollHeight,behavior:"smooth"})}function ai(l,e,i){let t,s,n,o,r,u,p,E,M;J(l,ae,_=>i(12,t=_)),J(l,Me,_=>i(13,s=_)),J(l,ht,_=>i(14,n=_)),J(l,ve,_=>i(4,o=_)),J(l,Le,_=>i(5,r=_)),J(l,je,_=>i(15,u=_)),J(l,Se,_=>i(6,p=_)),J(l,Ue,_=>i(7,E=_)),J(l,kt,_=>i(8,M=_));let T="",a=null,d=[],h=[{username:"frensgo :",body:`Bienvenido a la sala ${u.room}`,type:"bot"}];De(()=>{t.send(JSON.stringify({type:"GETUSERLIST"}))}),mt(()=>{t.close(),re(ae,t=null,t)});function f(_,I){switch(_){case"USERLIST":const S=new Map(I);i(2,d=S);break;case"NEW_USER":const R={username:"frensgo :",body:I,type:"bot"};h.push(R),i(3,h);break;case"BYE_USER":const V={username:"frensgo :",body:I,type:"bot"};h.push(V),i(3,h);break;case"ROOM_MSG":if(n.has(I.username))return;if(h.push({...I,type:"room"}),i(3,h),h.length>=100){i(3,h=[]);const X={username:"frensgo :",body:"Limpieza automática activada",type:"bot"};h.push(X),i(3,h)}setTimeout(()=>Ne(a),.1);break;case"CALM":re(Le,r=!0,r);break;case"AUDIO":if(n.has(I.username))return;h.push({...I,type:"audio"}),i(3,h),setTimeout(()=>Ne(a),.1);break;case"IMG":if(n.has(I.username))return;h.push({...I,type:"image"}),i(3,h),setTimeout(()=>Ne(a),.1);break;case"STICKER":if(n.has(I.username))return;h.push({...I,type:"sticker"}),i(3,h),setTimeout(()=>Ne(a),.1);break;case"OPEN_PV":if(n.has(I.nick))return;const H={id:I.from,nick:I.nick,me:I.me,avatar:I.avatar};o.add(JSON.stringify(H)),ve.set(o),s.set(I.from,[]);break;case"CLOSE_PV":if(n.has(I.nick))return;const W={id:I.from,nick:I.nick,me:I.to,avatar:I.avatar};o.delete(JSON.stringify(W)),ve.set(o),s.delete(I.from);break;case"PV":if(n.has(I.fromNick)||!s.has(I.fromId))return;s.get(I.fromId).push({username:I.fromNick,body:I.body,type:"pv",avatar:I.fromAvatar}),Me.set(s)}}re(ae,t.onmessage=_=>{const{type:I,msg:S}=JSON.parse(_.data);f(I,S)},t),re(ae,t.onclose=()=>{At("/rooms")},t);function g(){!T||T.length===0||T.length>120||(t.send(JSON.stringify({type:"ROOM_MSG",msg:T.trim()})),i(0,T=""))}function w(_){Je[_?"unshift":"push"](()=>{a=_,i(1,a)})}function B(){T=this.value,i(0,T)}return[T,a,d,h,o,r,p,E,M,g,w,B]}class pi extends ke{constructor(e){super(),Ie(this,e,ai,ci,ye,{})}}export{pi as component,mi as universal};
