import{m as C,s as N}from"../chunks/store.CmeRZi7J.js";import{r as j}from"../chunks/index.CR9QXQgq.js";import{s as D,n as I,c as P,d as w}from"../chunks/scheduler.DBTPyL-f.js";import{S as J,i as x,e as g,t as E,s as H,c as v,a as p,b as S,d,f as L,n as y,g as q,h as _,p as G,j as z,y as M,z as V,A as W,k as U,v as K,l as O,B as F,C as Q,w as X}from"../chunks/index.CQsuM-QA.js";import{N as Y,e as R}from"../chunks/Navbar.8KTizEzA.js";import{g as Z}from"../chunks/entry.By95yAw0.js";const $="https://frensgo.lat";async function ee(){let o;C.subscribe(l=>o=l),N.subscribe(l=>l);const t=await fetch(`${$}/getRooms`);if(!t.ok)throw j(307,"/");const r=await t.text(),e=JSON.parse(r);if(o)return{data:e};throw j(307,"/")}const he=Object.freeze(Object.defineProperty({__proto__:null,load:ee},Symbol.toStringTag,{value:"Module"}));function te(o){let t,r,e,l,i,s,h,a,c,n,m;return{c(){t=g("article"),r=g("h2"),e=E(o[0]),l=H(),i=g("div"),s=g("p"),h=E(o[2]),a=E(" / "),c=E(o[1]),this.h()},l(u){t=v(u,"ARTICLE",{class:!0});var f=p(t);r=v(f,"H2",{class:!0});var b=p(r);e=S(b,o[0]),b.forEach(d),l=L(f),i=v(f,"DIV",{});var T=p(i);s=v(T,"P",{class:!0});var k=p(s);h=S(k,o[2]),a=S(k," / "),c=S(k,o[1]),k.forEach(d),T.forEach(d),f.forEach(d),this.h()},h(){y(r,"class","montserrat-alternates-bold svelte-zk5aq3"),y(s,"class","montserrat-alternates-bold svelte-zk5aq3"),y(t,"class","svelte-zk5aq3")},m(u,f){q(u,t,f),_(t,r),_(r,e),_(t,l),_(t,i),_(i,s),_(s,h),_(s,a),_(s,c),n||(m=G(t,"click",o[5]),n=!0)},p(u,[f]){f&1&&z(e,u[0]),f&4&&z(h,u[2]),f&2&&z(c,u[1])},i:I,o:I,d(u){u&&d(t),n=!1,m()}}}const ae="wss://frensgo.lat";function se(o,t,r){let e,l;P(o,C,m=>r(6,e=m)),P(o,N,m=>r(7,l=m));let{name:i}=t,{maxUsers:s}=t,{connectedUsers:h}=t,{value:a}=t;function c(m){e&&(w(C,e={...e,room:m},e),w(N,l=new WebSocket(`${ae}/chat?room=${e.room}&nick=${e.username}&avatar=${e.avatar?e.avatar:""}`),l),w(N,l.onmessage=u=>{const{type:f,id:b}=JSON.parse(u.data);e.id||w(C,e={...e,id:b},e),f&&f==="CONNECTED"&&Z("/chat")},l))}const n=()=>c(a);return o.$$set=m=>{"name"in m&&r(0,i=m.name),"maxUsers"in m&&r(1,s=m.maxUsers),"connectedUsers"in m&&r(2,h=m.connectedUsers),"value"in m&&r(3,a=m.value)},[i,s,h,a,c,n]}class ne extends J{constructor(t){super(),x(this,t,se,te,D,{name:0,maxUsers:1,connectedUsers:2,value:3})}}function A(o,t,r){const e=o.slice();return e[1]=t[r],e}function B(o){let t,r;return t=new ne({props:{name:o[1].name,value:o[1].value,maxUsers:o[1].maxUsers,connectedUsers:o[1].connectedUsers}}),{c(){M(t.$$.fragment)},l(e){V(t.$$.fragment,e)},m(e,l){W(t,e,l),r=!0},p(e,l){const i={};l&1&&(i.name=e[1].name),l&1&&(i.value=e[1].value),l&1&&(i.maxUsers=e[1].maxUsers),l&1&&(i.connectedUsers=e[1].connectedUsers),t.$set(i)},i(e){r||(U(t.$$.fragment,e),r=!0)},o(e){O(t.$$.fragment,e),r=!1},d(e){F(t,e)}}}function re(o){let t,r,e,l;t=new Y({});let i=R(o[0].data),s=[];for(let a=0;a<i.length;a+=1)s[a]=B(A(o,i,a));const h=a=>O(s[a],1,1,()=>{s[a]=null});return{c(){M(t.$$.fragment),r=H(),e=g("section");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){V(t.$$.fragment,a),r=L(a),e=v(a,"SECTION",{class:!0});var c=p(e);for(let n=0;n<s.length;n+=1)s[n].l(c);c.forEach(d),this.h()},h(){y(e,"class","svelte-1alcno")},m(a,c){W(t,a,c),q(a,r,c),q(a,e,c);for(let n=0;n<s.length;n+=1)s[n]&&s[n].m(e,null);l=!0},p(a,[c]){if(c&1){i=R(a[0].data);let n;for(n=0;n<i.length;n+=1){const m=A(a,i,n);s[n]?(s[n].p(m,c),U(s[n],1)):(s[n]=B(m),s[n].c(),U(s[n],1),s[n].m(e,null))}for(X(),n=i.length;n<s.length;n+=1)h(n);K()}},i(a){if(!l){U(t.$$.fragment,a);for(let c=0;c<i.length;c+=1)U(s[c]);l=!0}},o(a){O(t.$$.fragment,a),s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)O(s[c]);l=!1},d(a){a&&(d(r),d(e)),F(t,a),Q(s,a)}}}function oe(o,t,r){let{data:e}=t;return o.$$set=l=>{"data"in l&&r(0,e=l.data)},[e]}class _e extends J{constructor(t){super(),x(this,t,oe,re,D,{data:0})}}export{_e as component,he as universal};
