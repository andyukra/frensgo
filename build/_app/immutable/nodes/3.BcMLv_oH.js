import{m as le,s as te,r as Re}from"../chunks/index.DUnBcuqq.js";import{s as ae,y as de,n as Y,c as se,r as Me,o as ye,d as Oe,f as Le}from"../chunks/scheduler.Hg06gspx.js";import{S as ne,i as re,e as _,s as O,t as P,c as p,a as U,d as g,f as L,b as q,n as u,g as K,h as o,j as Q,y as ce,z as oe,m as ve,A as ie,o as me,p as ge,q as Be,k as B,u as _e,l as D,B as ue,C as pe,w as be}from"../chunks/index.D1W0QcSA.js";import{N as Ce}from"../chunks/Navbar.BALJosle.js";function W(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Ne(){let l,e;if(le.subscribe(s=>l=s),te.subscribe(s=>e=s),!l||!e)throw Re(307,"/")}const Fe=Object.freeze(Object.defineProperty({__proto__:null,load:Ne},Symbol.toStringTag,{value:"Module"}));function ke(l){let e,s,t,c,n,T=decodeURI(l[0].username)+"",b,h,E,d,I=l[0].body+"",j,S;return{c(){e=_("article"),s=_("div"),t=_("i"),c=O(),n=_("h4"),b=P(T),h=O(),E=_("div"),d=_("p"),j=P(I),this.h()},l(f){e=p(f,"ARTICLE",{class:!0});var R=U(e);s=p(R,"DIV",{class:!0});var C=U(s);t=p(C,"I",{class:!0}),U(t).forEach(g),c=L(C),n=p(C,"H4",{class:!0});var M=U(n);b=q(M,T),M.forEach(g),C.forEach(g),h=L(R),E=p(R,"DIV",{class:!0});var y=U(E);d=p(y,"P",{class:!0});var V=U(d);j=q(V,I),V.forEach(g),y.forEach(g),R.forEach(g),this.h()},h(){u(t,"class","fa-solid fa-circle-user svelte-134al0i"),u(n,"class","montserrat-alternates-bold svelte-134al0i"),u(s,"class","username svelte-134al0i"),u(d,"class","montserrat-alternates-regular"),u(E,"class","body svelte-134al0i"),u(e,"class",S=de(l[1].username===decodeURI(l[0].username)?"me":"")+" svelte-134al0i")},m(f,R){K(f,e,R),o(e,s),o(s,t),o(s,c),o(s,n),o(n,b),o(e,h),o(e,E),o(E,d),o(d,j)},p(f,[R]){R&1&&T!==(T=decodeURI(f[0].username)+"")&&Q(b,T),R&1&&I!==(I=f[0].body+"")&&Q(j,I),R&3&&S!==(S=de(f[1].username===decodeURI(f[0].username)?"me":"")+" svelte-134al0i")&&u(e,"class",S)},i:Y,o:Y,d(f){f&&g(e)}}}function we(l,e,s){let t;se(l,le,n=>s(1,t=n));let{data:c}=e;return l.$$set=n=>{"data"in n&&s(0,c=n.data)},[c,t]}class He extends ne{constructor(e){super(),re(this,e,we,ke,ae,{data:0})}}function Ae(l){let e,s,t,c,n=decodeURI(l[1].username)+"",T,b,h;return{c(){e=_("article"),s=_("i"),t=O(),c=_("h4"),T=P(n),b=O(),h=_("i"),this.h()},l(E){e=p(E,"ARTICLE",{"data-id":!0,class:!0});var d=U(e);s=p(d,"I",{class:!0}),U(s).forEach(g),t=L(d),c=p(d,"H4",{class:!0});var I=U(c);T=q(I,n),I.forEach(g),b=L(d),h=p(d,"I",{class:!0}),U(h).forEach(g),d.forEach(g),this.h()},h(){u(s,"class","fa-solid fa-circle-user svelte-vv2xs7"),u(c,"class","montserrat-alternates-bold svelte-vv2xs7"),u(h,"class","fa-solid fa-circle-question svelte-vv2xs7"),u(e,"data-id",l[0]),u(e,"class","svelte-vv2xs7")},m(E,d){K(E,e,d),o(e,s),o(e,t),o(e,c),o(c,T),o(e,b),o(e,h)},p(E,[d]){d&2&&n!==(n=decodeURI(E[1].username)+"")&&Q(T,n),d&1&&u(e,"data-id",E[0])},i:Y,o:Y,d(E){E&&g(e)}}}function De(l,e,s){let{id:t}=e,{data:c}=e;return l.$$set=n=>{"id"in n&&s(0,t=n.id),"data"in n&&s(1,c=n.data)},[t,c]}class Ve extends ne{constructor(e){super(),re(this,e,De,Ae,ae,{id:0,data:1})}}function Ee(l,e,s){const t=l.slice();return t[10]=e[s][0],t[11]=e[s][1],t}function Ie(l,e,s){const t=l.slice();return t[14]=e[s],t}function Te(l){let e,s;return e=new He({props:{data:l[14]}}),{c(){ce(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,c){ie(e,t,c),s=!0},p(t,c){const n={};c&8&&(n.data=t[14]),e.$set(n)},i(t){s||(B(e.$$.fragment,t),s=!0)},o(t){D(e.$$.fragment,t),s=!1},d(t){ue(e,t)}}}function je(l){let e,s;return e=new Ve({props:{id:l[10],data:l[11]}}),{c(){ce(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,c){ie(e,t,c),s=!0},p(t,c){const n={};c&4&&(n.id=t[10]),c&4&&(n.data=t[11]),e.$set(n)},i(t){s||(B(e.$$.fragment,t),s=!0)},o(t){D(e.$$.fragment,t),s=!1},d(t){ue(e,t)}}}function $e(l){let e,s,t,c,n,T,b,h,E='<div class="txtStyle svelte-ghgvcj"><button class="montserrat-alternates-regular activeStyle svelte-ghgvcj">T</button> <button class="montserrat-alternates-medium svelte-ghgvcj">T</button> <button class="montserrat-alternates-bold svelte-ghgvcj">T</button></div>',d,I,j,S,f,R='<i class="fa-solid fa-paper-plane svelte-ghgvcj"></i>',C,M,y,V,$=l[2].size+"",G,Z,k,z,x,fe;e=new Ce({});let w=W(l[3]),v=[];for(let a=0;a<w.length;a+=1)v[a]=Te(Ie(l,w,a));const Se=a=>D(v[a],1,1,()=>{v[a]=null});let H=W(l[2].entries()),m=[];for(let a=0;a<H.length;a+=1)m[a]=je(Ee(l,H,a));const Ue=a=>D(m[a],1,1,()=>{m[a]=null});return{c(){ce(e.$$.fragment),s=O(),t=_("section"),c=_("article"),n=_("div");for(let a=0;a<v.length;a+=1)v[a].c();T=O(),b=_("div"),h=_("div"),h.innerHTML=E,d=O(),I=_("form"),j=_("input"),S=O(),f=_("button"),f.innerHTML=R,C=O(),M=_("article"),y=_("h3"),V=P("Usuarios conectados: "),G=P($),Z=O(),k=_("div");for(let a=0;a<m.length;a+=1)m[a].c();this.h()},l(a){oe(e.$$.fragment,a),s=L(a),t=p(a,"SECTION",{class:!0});var i=U(t);c=p(i,"ARTICLE",{class:!0});var r=U(c);n=p(r,"DIV",{class:!0});var N=U(n);for(let A=0;A<v.length;A+=1)v[A].l(N);N.forEach(g),T=L(r),b=p(r,"DIV",{class:!0});var J=U(b);h=p(J,"DIV",{class:!0,"data-svelte-h":!0}),ve(h)!=="svelte-1vhb3g2"&&(h.innerHTML=E),d=L(J),I=p(J,"FORM",{class:!0});var X=U(I);j=p(X,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,minlength:!0}),S=L(X),f=p(X,"BUTTON",{class:!0,"data-svelte-h":!0}),ve(f)!=="svelte-1m1u804"&&(f.innerHTML=R),X.forEach(g),J.forEach(g),r.forEach(g),C=L(i),M=p(i,"ARTICLE",{class:!0});var F=U(M);y=p(F,"H3",{class:!0});var ee=U(y);V=q(ee,"Usuarios conectados: "),G=q(ee,$),ee.forEach(g),Z=L(F),k=p(F,"DIV",{class:!0});var he=U(k);for(let A=0;A<m.length;A+=1)m[A].l(he);he.forEach(g),F.forEach(g),i.forEach(g),this.h()},h(){u(n,"class","chat svelte-ghgvcj"),u(h,"class","tools svelte-ghgvcj"),u(j,"class","montserrat-alternates-regular svelte-ghgvcj"),u(j,"type","text"),u(j,"placeholder","Escribe tu mensaje..."),u(j,"maxlength","120"),u(j,"minlength","1"),u(f,"class","svelte-ghgvcj"),u(I,"class","svelte-ghgvcj"),u(b,"class","msg svelte-ghgvcj"),u(c,"class","chatBX svelte-ghgvcj"),u(y,"class","montserrat-alternates-bold svelte-ghgvcj"),u(k,"class","userlist svelte-ghgvcj"),u(M,"class","users svelte-ghgvcj"),u(t,"class","svelte-ghgvcj")},m(a,i){ie(e,a,i),K(a,s,i),K(a,t,i),o(t,c),o(c,n);for(let r=0;r<v.length;r+=1)v[r]&&v[r].m(n,null);l[5](n),o(c,T),o(c,b),o(b,h),o(b,d),o(b,I),o(I,j),me(j,l[0]),o(I,S),o(I,f),o(t,C),o(t,M),o(M,y),o(y,V),o(y,G),o(M,Z),o(M,k);for(let r=0;r<m.length;r+=1)m[r]&&m[r].m(k,null);z=!0,x||(fe=[ge(j,"input",l[6]),ge(I,"submit",Be(l[4]))],x=!0)},p(a,[i]){if(i&8){w=W(a[3]);let r;for(r=0;r<w.length;r+=1){const N=Ie(a,w,r);v[r]?(v[r].p(N,i),B(v[r],1)):(v[r]=Te(N),v[r].c(),B(v[r],1),v[r].m(n,null))}for(be(),r=w.length;r<v.length;r+=1)Se(r);_e()}if(i&1&&j.value!==a[0]&&me(j,a[0]),(!z||i&4)&&$!==($=a[2].size+"")&&Q(G,$),i&4){H=W(a[2].entries());let r;for(r=0;r<H.length;r+=1){const N=Ee(a,H,r);m[r]?(m[r].p(N,i),B(m[r],1)):(m[r]=je(N),m[r].c(),B(m[r],1),m[r].m(k,null))}for(be(),r=H.length;r<m.length;r+=1)Ue(r);_e()}},i(a){if(!z){B(e.$$.fragment,a);for(let i=0;i<w.length;i+=1)B(v[i]);for(let i=0;i<H.length;i+=1)B(m[i]);z=!0}},o(a){D(e.$$.fragment,a),v=v.filter(Boolean);for(let i=0;i<v.length;i+=1)D(v[i]);m=m.filter(Boolean);for(let i=0;i<m.length;i+=1)D(m[i]);z=!1},d(a){a&&(g(s),g(t)),ue(e,a),pe(v,a),l[5](null),pe(m,a),x=!1,Me(fe)}}}function ze(l){l.scroll({top:l.scrollHeight,behavior:"smooth"})}function Pe(l,e,s){let t,c;se(l,te,S=>s(7,t=S)),se(l,le,S=>s(8,c=S));let n="",T=null,b=[],h=[{username:"frensgo",body:`Bienvenido a la sala ${c.room}`}];ye(()=>{t.send(JSON.stringify({type:"GETUSERLIST"}))});function E(S,f){switch(S){case"USERLIST":const R=new Map(f);s(2,b=R);break;case"NEW_USER":console.log(f);break;case"BYE_USER":console.log(f);break;case"ROOM_MSG":h.push(f),s(3,h),h.length>=30&&(h.shift(),s(3,h)),setTimeout(()=>ze(T),.1)}}Oe(te,t.onmessage=S=>{const{type:f,msg:R}=JSON.parse(S.data);E(f,R)},t);function d(){!n||n.length===0||n.length>120||(t.send(JSON.stringify({type:"ROOM_MSG",msg:n.trim()})),s(0,n=""))}function I(S){Le[S?"unshift":"push"](()=>{T=S,s(1,T)})}function j(){n=this.value,s(0,n)}return[n,T,b,h,d,I,j]}class We extends ne{constructor(e){super(),re(this,e,Pe,$e,ae,{})}}export{We as component,Fe as universal};
