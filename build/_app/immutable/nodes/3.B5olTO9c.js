import{m as Re,s as se,r as We,a as pe,b as we,d as Ee,u as Ze}from"../chunks/index.Dc_QPecx.js";import{s as de,l as xe,y as ie,n as X,c as J,o as Me,d as Y,z as ee,A as Xe,r as Pe,f as et}from"../chunks/scheduler.CHVDA16w.js";import{S as fe,i as he,e as g,s as j,t as ae,c as v,a as E,f as U,b as le,d as p,n,g as N,h as m,p as G,j as ve,D as Se,m as ge,E as Ae,C as Ce,y as oe,z as ne,A as ce,o as je,q as tt,k as $,l as q,u as ke,B as ue,w as Ie}from"../chunks/index.Dae8QIfg.js";import{e as re,N as st}from"../chunks/Navbar.oY7L4dWG.js";import{g as rt}from"../chunks/entry.BbYxsvYN.js";function it(){let r,e;if(Re.subscribe(s=>r=s),se.subscribe(s=>e=s),!r||!e)throw We(307,"/")}const Ot=Object.freeze(Object.defineProperty({__proto__:null,load:it},Symbol.toStringTag,{value:"Module"}));class H extends HTMLElement{constructor(){super(),this.isIframeLoaded=!1,this.setupDom()}static get observedAttributes(){return["videoid","playlistid"]}connectedCallback(){this.addEventListener("pointerover",H.warmConnections,{once:!0}),this.addEventListener("click",()=>this.addIframe())}get videoId(){return encodeURIComponent(this.getAttribute("videoid")||"")}set videoId(e){this.setAttribute("videoid",e)}get playlistId(){return encodeURIComponent(this.getAttribute("playlistid")||"")}set playlistId(e){this.setAttribute("playlistid",e)}get videoTitle(){return this.getAttribute("videotitle")||"Video"}set videoTitle(e){this.setAttribute("videotitle",e)}get videoPlay(){return this.getAttribute("videoPlay")||"Play"}set videoPlay(e){this.setAttribute("videoPlay",e)}get videoStartAt(){return this.getAttribute("videoStartAt")||"0"}get autoLoad(){return this.hasAttribute("autoload")}get noCookie(){return this.hasAttribute("nocookie")}get posterQuality(){return this.getAttribute("posterquality")||"hqdefault"}get posterLoading(){return this.getAttribute("posterloading")||"lazy"}get params(){return`start=${this.videoStartAt}&${this.getAttribute("params")}`}set params(e){this.setAttribute("params",e)}setupDom(){const e=this.attachShadow({mode:"open"});let s="";window.liteYouTubeNonce&&(s=`nonce="${window.liteYouTubeNonce}"`),e.innerHTML=`
      <style ${s}>
        :host {
          contain: content;
          display: block;
          position: relative;
          width: 100%;
          padding-bottom: calc(100% / (16 / 9));
        }

        @media (max-width: 40em) {
          :host([short]) {
            padding-bottom: calc(100% / (9 / 16));
          }
        }

        #frame, #fallbackPlaceholder, iframe {
          position: absolute;
          width: 100%;
          height: 100%;
          left: 0;
        }

        #frame {
          cursor: pointer;
        }

        #fallbackPlaceholder {
          object-fit: cover;
        }

        #frame::before {
          content: '';
          display: block;
          position: absolute;
          top: 0;
          background-image: linear-gradient(180deg, #111 -20%, transparent 90%);
          height: 60px;
          width: 100%;
          z-index: 1;
        }

        #playButton {
          width: 68px;
          height: 48px;
          background-color: transparent;
          background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/><path d="M45 24 27 14v20" fill="white"/></svg>');
          z-index: 1;
          border: 0;
          border-radius: inherit;
        }

        #playButton:before {
          content: '';
          border-style: solid;
          border-width: 11px 0 11px 19px;
          border-color: transparent transparent transparent #fff;
        }

        #playButton,
        #playButton:before {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate3d(-50%, -50%, 0);
          cursor: inherit;
        }

        /* Post-click styles */
        .activated {
          cursor: unset;
        }

        #frame.activated::before,
        #frame.activated > #playButton {
          display: none;
        }
      </style>
      <div id="frame">
        <picture>
          <source id="webpPlaceholder" type="image/webp">
          <source id="jpegPlaceholder" type="image/jpeg">
          <img id="fallbackPlaceholder" referrerpolicy="origin" loading="lazy">
        </picture>
        <button id="playButton"></button>
      </div>
    `,this.domRefFrame=e.querySelector("#frame"),this.domRefImg={fallback:e.querySelector("#fallbackPlaceholder"),webp:e.querySelector("#webpPlaceholder"),jpeg:e.querySelector("#jpegPlaceholder")},this.domRefPlayButton=e.querySelector("#playButton")}setupComponent(){this.initImagePlaceholder(),this.domRefPlayButton.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),this.setAttribute("title",`${this.videoPlay}: ${this.videoTitle}`),(this.autoLoad||this.isYouTubeShort())&&this.initIntersectionObserver()}attributeChangedCallback(e,s,t){switch(e){case"videoid":case"playlistid":case"videoTitle":case"videoPlay":{s!==t&&(this.setupComponent(),this.domRefFrame.classList.contains("activated")&&(this.domRefFrame.classList.remove("activated"),this.shadowRoot.querySelector("iframe").remove(),this.isIframeLoaded=!1));break}}}addIframe(e=!1){if(!this.isIframeLoaded){let s=e?0:1;const t=this.noCookie?"-nocookie":"";let i;this.playlistId?i=`?listType=playlist&list=${this.playlistId}&`:i=`${this.videoId}?`,this.isYouTubeShort()&&(this.params=`loop=1&mute=1&modestbranding=1&playsinline=1&rel=0&enablejsapi=1&playlist=${this.videoId}`,s=1);const l=`
<iframe frameborder="0" title="${this.videoTitle}"
  allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen
  src="https://www.youtube${t}.com/embed/${i}autoplay=${s}&${this.params}"
></iframe>`;this.domRefFrame.insertAdjacentHTML("beforeend",l),this.domRefFrame.classList.add("activated"),this.isIframeLoaded=!0,this.attemptShortAutoPlay(),this.dispatchEvent(new CustomEvent("liteYoutubeIframeLoaded",{detail:{videoId:this.videoId},bubbles:!0,cancelable:!0}))}}initImagePlaceholder(){var t,i;const e=`https://i.ytimg.com/vi_webp/${this.videoId}/${this.posterQuality}.webp`,s=`https://i.ytimg.com/vi/${this.videoId}/${this.posterQuality}.jpg`;this.domRefImg.fallback.loading=this.posterLoading,this.domRefImg.webp.srcset=e,this.domRefImg.jpeg.srcset=s,this.domRefImg.fallback.src=s,this.domRefImg.fallback.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),(i=(t=this.domRefImg)==null?void 0:t.fallback)==null||i.setAttribute("alt",`${this.videoPlay}: ${this.videoTitle}`)}initIntersectionObserver(){const e={root:null,rootMargin:"0px",threshold:0};new IntersectionObserver((t,i)=>{t.forEach(l=>{l.isIntersecting&&!this.isIframeLoaded&&(H.warmConnections(),this.addIframe(!0),i.unobserve(this))})},e).observe(this)}attemptShortAutoPlay(){this.isYouTubeShort()&&setTimeout(()=>{var e,s;(s=(e=this.shadowRoot.querySelector("iframe"))==null?void 0:e.contentWindow)==null||s.postMessage('{"event":"command","func":"playVideo","args":""}',"*")},2e3)}isYouTubeShort(){return this.getAttribute("short")===""&&window.matchMedia("(max-width: 40em)").matches}static addPrefetch(e,s){const t=document.createElement("link");t.rel=e,t.href=s,t.crossOrigin="true",document.head.append(t)}static warmConnections(){H.isPreconnected||window.liteYouTubeIsPreconnected||(H.addPrefetch("preconnect","https://i.ytimg.com/"),H.addPrefetch("preconnect","https://s.ytimg.com"),H.addPrefetch("preconnect","https://www.youtube.com"),H.addPrefetch("preconnect","https://www.google.com"),H.addPrefetch("preconnect","https://googleads.g.doubleclick.net"),H.addPrefetch("preconnect","https://static.doubleclick.net"),H.isPreconnected=!0,window.liteYouTubeIsPreconnected=!0)}}H.isPreconnected=!1;customElements.define("lite-youtube",H);function Ue(r){let e;return{c(){e=g("i"),this.h()},l(s){e=v(s,"I",{class:!0}),E(e).forEach(p),this.h()},h(){n(e,"class","fa-solid fa-circle-user svelte-15m58t")},m(s,t){N(s,e,t)},d(s){s&&p(e)}}}function at(r){let e;return{c(){e=g("lite-youtube"),this.h()},l(s){e=v(s,"LITE-YOUTUBE",{class:!0,videoid:!0}),E(e).forEach(p),this.h()},h(){Se(e,"class","ytFrame svelte-15m58t"),Se(e,"videoid",r[1])},m(s,t){N(s,e,t)},p(s,t){t&2&&Se(e,"videoid",s[1])},d(s){s&&p(e)}}}function lt(r){let e,s,t,i,l;return{c(){e=g("img"),this.h()},l(a){e=v(a,"IMG",{src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){ee(e.src,s=r[0].body)||n(e,"src",s),n(e,"alt","Imagen subida Por un usuario"),n(e,"style",t=`cursor:pointer;${r[0].type===r[3].STICKER?"width:150px;":""}`),n(e,"class","svelte-15m58t")},m(a,d){N(a,e,d),i||(l=G(e,"click",r[9]),i=!0)},p(a,d){d&1&&!ee(e.src,s=a[0].body)&&n(e,"src",s),d&1&&t!==(t=`cursor:pointer;${a[0].type===a[3].STICKER?"width:150px;":""}`)&&n(e,"style",t)},d(a){a&&p(e),i=!1,l()}}}function ot(r){let e,s;return{c(){e=g("audio"),this.h()},l(t){e=v(t,"AUDIO",{src:!0}),E(e).forEach(p),this.h()},h(){ee(e.src,s=r[0].body)||n(e,"src",s),e.controls=!0},m(t,i){N(t,e,i)},p(t,i){i&1&&!ee(e.src,s=t[0].body)&&n(e,"src",s)},d(t){t&&p(e)}}}function nt(r){let e,s=r[0].body+"",t;return{c(){e=g("p"),t=ae(s),this.h()},l(i){e=v(i,"P",{class:!0});var l=E(e);t=le(l,s),l.forEach(p),this.h()},h(){n(e,"class","montserrat-alternates-regular")},m(i,l){N(i,e,l),m(e,t)},p(i,l){l&1&&s!==(s=i[0].body+"")&&ve(t,s)},d(i){i&&p(e)}}}function ct(r){let e,s,t,i,l=decodeURI(r[0].username)+"",a,d,y,o,b,R,A;xe(r[8]);let h=r[0].type!==r[3].BOT&&Ue();function S(c,k){if(c[0].type===c[3].ROOM||c[0].type===c[3].BOT)return nt;if(c[0].type===c[3].AUDIO)return ot;if(c[0].type===c[3].IMAGE||c[0].type===c[3].STICKER)return lt;if(c[0].type===c[3].YT)return at}let I=S(r),f=I&&I(r);return{c(){e=g("article"),s=g("div"),h&&h.c(),t=j(),i=g("h4"),a=ae(l),d=j(),y=g("div"),o=g("div"),f&&f.c(),this.h()},l(c){e=v(c,"ARTICLE",{class:!0,style:!0});var k=E(e);s=v(k,"DIV",{class:!0});var w=E(s);h&&h.l(w),t=U(w),i=v(w,"H4",{class:!0});var D=E(i);a=le(D,l),D.forEach(p),w.forEach(p),d=U(k),y=v(k,"DIV",{class:!0});var B=E(y);o=v(B,"DIV",{class:!0});var C=E(o);f&&f.l(C),C.forEach(p),B.forEach(p),k.forEach(p),this.h()},h(){n(i,"class","montserrat-alternates-bold svelte-15m58t"),n(s,"class","username svelte-15m58t"),n(o,"class",ie(`body ${r[7]()}`)+" svelte-15m58t"),n(y,"class","bodyBX"),n(e,"class",ie(`${r[4]?"me":""}`)+" svelte-15m58t"),n(e,"style",b=r[6](r[2]))},m(c,k){N(c,e,k),m(e,s),h&&h.m(s,null),m(s,t),m(s,i),m(i,a),m(e,d),m(e,y),m(y,o),f&&f.m(o,null),R||(A=G(window,"resize",r[8]),R=!0)},p(c,[k]){c[0].type!==c[3].BOT?h||(h=Ue(),h.c(),h.m(s,t)):h&&(h.d(1),h=null),k&1&&l!==(l=decodeURI(c[0].username)+"")&&ve(a,l),I===(I=S(c))&&f?f.p(c,k):(f&&f.d(1),f=I&&I(c),f&&(f.c(),f.m(o,null))),k&4&&b!==(b=c[6](c[2]))&&n(e,"style",b)},i:X,o:X,d(c){c&&p(e),h&&h.d(),f&&f.d(),R=!1,A()}}}function ut(r,e,s){let t,i,l;J(r,pe,f=>s(10,t=f)),J(r,we,f=>s(11,i=f)),J(r,Re,f=>s(12,l=f));var a=(f=>(f.ROOM="room",f.BOT="bot",f.AUDIO="audio",f.IMAGE="image",f.YT="yt",f.STICKER="sticker",f))(a||{});let{data:d}=e,y=null;Me(()=>{if(/^https:\/\/(www\.)?youtu.+\//.test(d.body)){const f=d.body.match(/(\.be\/|v=).{11}/);s(1,y=f[0].replace(f[1],"")),s(0,d.type="yt",d)}});const o=l.username===decodeURI(d.username);let b;function R(f){Y(we,i=f.src,i),Y(pe,t=!0,t)}function A(f){if(d.type==="bot")return"";let c="";return b<500&&(c+="flex-direction:column;gap:0.4rem !important;",o?c+="align-items:end;":c+="align-items:start;"),c}function h(){switch(console.log(d.type),d.type){case"bot":return"typeBot";case"audio":return"typeAudio";case"image":return"typeImg";case"sticker":return"typeBot";default:return""}}function S(){s(2,b=window.outerWidth)}const I=f=>R(f.target);return r.$$set=f=>{"data"in f&&s(0,d=f.data)},[d,y,b,a,o,R,A,h,S,I]}class dt extends fe{constructor(e){super(),he(this,e,ut,ct,de,{data:0})}}function ft(r){let e,s,t,i,l=decodeURI(r[1].username)+"",a,d,y;return{c(){e=g("article"),s=g("i"),t=j(),i=g("h4"),a=ae(l),d=j(),y=g("i"),this.h()},l(o){e=v(o,"ARTICLE",{"data-id":!0,class:!0});var b=E(e);s=v(b,"I",{class:!0}),E(s).forEach(p),t=U(b),i=v(b,"H4",{class:!0});var R=E(i);a=le(R,l),R.forEach(p),d=U(b),y=v(b,"I",{class:!0}),E(y).forEach(p),b.forEach(p),this.h()},h(){n(s,"class","fa-solid fa-circle-user svelte-vv2xs7"),n(i,"class","montserrat-alternates-bold svelte-vv2xs7"),n(y,"class","fa-solid fa-circle-question svelte-vv2xs7"),n(e,"data-id",r[0]),n(e,"class","svelte-vv2xs7")},m(o,b){N(o,e,b),m(e,s),m(e,t),m(e,i),m(i,a),m(e,d),m(e,y)},p(o,[b]){b&2&&l!==(l=decodeURI(o[1].username)+"")&&ve(a,l),b&1&&n(e,"data-id",o[0])},i:X,o:X,d(o){o&&p(e)}}}function ht(r,e,s){let{id:t}=e,{data:i}=e;return r.$$set=l=>{"id"in l&&s(0,t=l.id),"data"in l&&s(1,i=l.data)},[t,i]}class mt extends fe{constructor(e){super(),he(this,e,ht,ft,de,{id:0,data:1})}}function pt(r){let e,s,t,i;return{c(){e=g("section"),s=g("article"),t=g("h4"),i=ae(r[0]),this.h()},l(l){e=v(l,"SECTION",{class:!0});var a=E(e);s=v(a,"ARTICLE",{class:!0});var d=E(s);t=v(d,"H4",{class:!0});var y=E(t);i=le(y,r[0]),y.forEach(p),d.forEach(p),a.forEach(p),this.h()},h(){n(t,"class","montserrat-alternates-medium svelte-1b74fp1"),n(s,"class","svelte-1b74fp1"),n(e,"class","svelte-1b74fp1")},m(l,a){N(l,e,a),m(e,s),m(s,t),m(t,i)},p(l,[a]){a&1&&ve(i,l[0])},i:X,o:X,d(l){l&&p(e)}}}function gt(r,e,s){let t;J(r,Ee,a=>s(2,t=a));let{msg:i}=e,{time:l}=e;return Me(()=>{document.onkeydown=()=>!1}),Xe(()=>{document.onkeydown=null}),setTimeout(()=>Y(Ee,t=!1,t),l),r.$$set=a=>{"msg"in a&&s(0,i=a.msg),"time"in a&&s(1,l=a.time)},[i,l]}class vt extends fe{constructor(e){super(),he(this,e,gt,pt,de,{msg:0,time:1})}}const De=["https://media.tenor.com/Eet92-jhr3MAAAAj/hasher-happy-sticker.gif","https://media.tenor.com/rOZE9d6XIWIAAAAi/line.gif","https://media.tenor.com/eM0K9-K-hcUAAAAi/crying.gif","https://media.tenor.com/7VE1yyfi5CIAAAAi/fighting-addoil.gif","https://media.tenor.com/rXbN_gwjc7AAAAAi/alice-sticker-alice-animated.gif","https://media.tenor.com/5Ada5-x6Vz8AAAAj/cute.gif","https://media.tenor.com/OY6bIk0asR4AAAAj/quby.gif","https://media.tenor.com/pB8dRaVDsBwAAAAj/tkthao219-quby.gif","https://media.tenor.com/J2bPcmfvfaUAAAAj/tkthao219-quby.gif","https://media.tenor.com/JtV9gaxyavAAAAAj/peach-cat.gif","https://media.tenor.com/GTjXEnuTUUMAAAAj/loved-love.gif","https://media.tenor.com/7r6lLYznnTsAAAAj/sticker-cartoon.gif","https://media.tenor.com/Ck3Q6OuFmzQAAAAj/animated-stickers-good-morning.gif","https://media.tenor.com/nQUJSVnPH8sAAAAj/tkthao219-quby.gif","https://media.tenor.com/senzjQZHOZwAAAAj/hasher-sticker.gif","https://media.tenor.com/b87Ur_ijFF0AAAAj/char.gif","https://media.tenor.com/xPDDnUtYMS0AAAAj/line-sticker-thank-you-sticker.gif","https://media.tenor.com/ua3mX1agSvoAAAAj/hasher-sticker.gif","https://media.tenor.com/83rrChRnhVwAAAAj/tkthao219-quby.gif"];function Be(r,e,s){const t=r.slice();return t[16]=e[s],t}function Le(r){let e,s,t,i="Emojis",l,a,d="stickers",y,o,b,R,A,h=r[1]===r[3].EMOJI&&Ve(),S=r[1]===r[3].STICKER&&$e(r);return{c(){e=g("div"),s=g("div"),t=g("h5"),t.textContent=i,l=j(),a=g("h5"),a.textContent=d,y=j(),o=g("div"),h&&h.c(),b=j(),S&&S.c(),this.h()},l(I){e=v(I,"DIV",{class:!0});var f=E(e);s=v(f,"DIV",{class:!0});var c=E(s);t=v(c,"H5",{class:!0,"data-svelte-h":!0}),ge(t)!=="svelte-wn67si"&&(t.textContent=i),l=U(c),a=v(c,"H5",{class:!0,"data-svelte-h":!0}),ge(a)!=="svelte-1gj1sgi"&&(a.textContent=d),c.forEach(p),y=U(f),o=v(f,"DIV",{class:!0});var k=E(o);h&&h.l(k),b=U(k),S&&S.l(k),k.forEach(p),f.forEach(p),this.h()},h(){n(t,"class","montserrat-alternates-bold svelte-1s5h8gr"),Ae(t,"activeTab",r[1]===r[3].EMOJI),n(a,"class","activeTab montserrat-alternates-bold svelte-1s5h8gr"),Ae(a,"activeTab",r[1]===r[3].STICKER),n(s,"class","tab svelte-1s5h8gr"),n(o,"class","mojis svelte-1s5h8gr"),n(e,"class","emojisBX svelte-1s5h8gr")},m(I,f){N(I,e,f),m(e,s),m(s,t),m(s,l),m(s,a),m(e,y),m(e,o),h&&h.m(o,null),m(o,b),S&&S.m(o,null),R||(A=[G(t,"click",r[9]),G(a,"click",r[10])],R=!0)},p(I,f){f&10&&Ae(t,"activeTab",I[1]===I[3].EMOJI),f&10&&Ae(a,"activeTab",I[1]===I[3].STICKER),I[1]===I[3].EMOJI?h||(h=Ve(),h.c(),h.m(o,b)):h&&(h.d(1),h=null),I[1]===I[3].STICKER?S?S.p(I,f):(S=$e(I),S.c(),S.m(o,null)):S&&(S.d(1),S=null)},d(I){I&&p(e),h&&h.d(),S&&S.d(),R=!1,Pe(A)}}}function Ve(r){let e;return{c(){e=g("div"),this.h()},l(s){e=v(s,"DIV",{class:!0}),E(e).forEach(p),this.h()},h(){n(e,"class","caritasBX svelte-1s5h8gr")},m(s,t){N(s,e,t)},d(s){s&&p(e)}}}function $e(r){let e,s=re(De),t=[];for(let i=0;i<s.length;i+=1)t[i]=Ne(Be(r,s,i));return{c(){e=g("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=v(i,"DIV",{class:!0});var l=E(e);for(let a=0;a<t.length;a+=1)t[a].l(l);l.forEach(p),this.h()},h(){n(e,"class","stickersBX svelte-1s5h8gr")},m(i,l){N(i,e,l);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(i,l){if(l&32){s=re(De);let a;for(a=0;a<s.length;a+=1){const d=Be(i,s,a);t[a]?t[a].p(d,l):(t[a]=Ne(d),t[a].c(),t[a].m(e,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=s.length}},d(i){i&&p(e),Ce(t,i)}}}function Ne(r){let e,s,t,i;function l(){return r[11](r[16])}return{c(){e=g("img"),this.h()},l(a){e=v(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ee(e.src,s=r[16])||n(e,"src",s),n(e,"alt","sticker"),n(e,"class","svelte-1s5h8gr")},m(a,d){N(a,e,d),t||(i=G(e,"click",l),t=!0)},p(a,d){r=a},d(a){a&&p(e),t=!1,i()}}}function bt(r){let e,s,t,i='<button class="montserrat-alternates-bold svelte-1s5h8gr" style="font-size:1.3rem;">T</button>',l,a,d,y,o,b='<i class="fa-solid fa-image svelte-1s5h8gr"></i>',R,A,h,S,I,f,c,k,w,D,B,C=r[0]&&Le(r);return{c(){e=g("div"),s=g("div"),t=g("div"),t.innerHTML=i,l=j(),a=g("div"),d=g("input"),y=j(),o=g("label"),o.innerHTML=b,R=j(),A=g("div"),h=g("button"),S=g("i"),f=j(),c=g("div"),k=g("i"),w=j(),C&&C.c(),this.h()},l(z){e=v(z,"DIV",{class:!0});var L=E(e);s=v(L,"DIV",{class:!0});var K=E(s);t=v(K,"DIV",{class:!0,"data-svelte-h":!0}),ge(t)!=="svelte-1j7ahwz"&&(t.innerHTML=i),l=U(K),a=v(K,"DIV",{class:!0});var F=E(a);d=v(F,"INPUT",{type:!0,accept:!0,id:!0}),y=U(F),o=v(F,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ge(o)!=="svelte-r2pi9w"&&(o.innerHTML=b),F.forEach(p),R=U(K),A=v(K,"DIV",{class:!0});var te=E(A);h=v(te,"BUTTON",{class:!0});var me=E(h);S=v(me,"I",{class:!0}),E(S).forEach(p),me.forEach(p),te.forEach(p),K.forEach(p),f=U(L),c=v(L,"DIV",{class:!0});var M=E(c);k=v(M,"I",{class:!0}),E(k).forEach(p),w=U(M),C&&C.l(M),M.forEach(p),L.forEach(p),this.h()},h(){n(t,"class","txtStyle svelte-1s5h8gr"),n(d,"type","file"),n(d,"accept","image/*"),d.hidden=!0,n(d,"id","upImg"),n(o,"for","upImg"),n(o,"class","svelte-1s5h8gr"),n(a,"class","sendImg svelte-1s5h8gr"),n(S,"class",I=ie(`fa-solid fa-microphone ${r[2]?"rec":"stop"}`)+" svelte-1s5h8gr"),n(h,"class","svelte-1s5h8gr"),n(A,"class","sendAudio svelte-1s5h8gr"),n(s,"class","main svelte-1s5h8gr"),n(k,"class","fa-solid fa-face-grin-beam svelte-1s5h8gr"),n(c,"class","emojis svelte-1s5h8gr"),n(e,"class","tools svelte-1s5h8gr")},m(z,L){N(z,e,L),m(e,s),m(s,t),m(s,l),m(s,a),m(a,d),m(a,y),m(a,o),m(s,R),m(s,A),m(A,h),m(h,S),m(e,f),m(e,c),m(c,k),m(c,w),C&&C.m(c,null),D||(B=[G(d,"change",r[7]),G(h,"click",r[6]),G(k,"click",r[8])],D=!0)},p(z,[L]){L&4&&I!==(I=ie(`fa-solid fa-microphone ${z[2]?"rec":"stop"}`)+" svelte-1s5h8gr")&&n(S,"class",I),z[0]?C?C.p(z,L):(C=Le(z),C.c(),C.m(c,null)):C&&(C.d(1),C=null)},i:X,o:X,d(z){z&&p(e),C&&C.d(),D=!1,Pe(B)}}}const ze="https://frensgo.lat";function _t(r,e,s){let t;J(r,se,w=>s(13,t=w));var i=(w=>(w.EMOJI="emoji",w.STICKER="sticker",w))(i||{});let l=!1,a="sticker";function d(w){a!==w&&s(1,a=w)}function y(w){t.send(JSON.stringify({type:"STICKER",msg:w})),s(0,l=!1)}let o=null,b=!1;function R(){o||b||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia({audio:!0}).then(w=>{o=new MediaRecorder(w);let D=[];o.ondataavailable=B=>{D.push(B.data)},o.onstop=async()=>{const B=new Blob(D,{type:"audio/ogg;codecs=opus"});D=[];const C=new FormData;C.append("audio",B);const L=await(await fetch(`${ze}/audio`,{method:"POST",body:C})).text();t.send(JSON.stringify({type:"AUDIO",msg:L}))},o.start(),s(2,b=!0)}).catch(w=>console.log(w))}function A(){o&&b&&(o.stop(),o=null,s(2,b=!1))}function h(){b?A():R()}async function S(w){const D=w.target.files[0];if(D.size>5e6){alert("La imágen es muy pesada");return}if(!/^image\/....?$/.test(D.type)){alert("Por favor elija una imágen válida");return}const B=new FormData;B.append("image",D);const z=await(await fetch(`${ze}/upImg`,{method:"POST",body:B})).text();t.send(JSON.stringify({type:"IMG",msg:z}))}return[l,a,b,i,d,y,h,S,()=>s(0,l=!l),()=>{d(i.EMOJI)},()=>{d(i.STICKER)},w=>y(w)]}class yt extends fe{constructor(e){super(),he(this,e,_t,bt,de,{})}}function At(r){let e,s,t,i,l,a,d;return{c(){e=g("div"),s=g("i"),t=j(),i=g("img"),this.h()},l(y){e=v(y,"DIV",{class:!0});var o=E(e);s=v(o,"I",{class:!0}),E(s).forEach(p),t=U(o),i=v(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(p),this.h()},h(){n(s,"class","fas fa-times svelte-6bka76"),ee(i.src,l=r[1])||n(i,"src",l),n(i,"alt","Una imagen"),n(i,"class","svelte-6bka76"),n(e,"class","modal svelte-6bka76")},m(y,o){N(y,e,o),m(e,s),m(e,t),m(e,i),a||(d=G(s,"click",r[2]),a=!0)},p(y,[o]){o&2&&!ee(i.src,l=y[1])&&n(i,"src",l)},i:X,o:X,d(y){y&&p(e),a=!1,d()}}}function kt(r,e,s){let t,i;return J(r,pe,a=>s(0,t=a)),J(r,we,a=>s(1,i=a)),[t,i,()=>Y(pe,t=!1,t)]}class It extends fe{constructor(e){super(),he(this,e,kt,At,de,{})}}function qe(r,e,s){const t=r.slice();return t[15]=e[s][0],t[16]=e[s][1],t}function He(r,e,s){const t=r.slice();return t[19]=e[s],t}function Je(r){let e,s;return e=new vt({props:{msg:"Aver si nos calmamos un poquito :)",time:5e3}}),{c(){oe(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,i){ce(e,t,i),s=!0},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){ue(e,t)}}}function Ke(r){let e,s;return e=new It({}),{c(){oe(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,i){ce(e,t,i),s=!0},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){ue(e,t)}}}function Fe(r){let e,s;return e=new dt({props:{data:r[19]}}),{c(){oe(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,i){ce(e,t,i),s=!0},p(t,i){const l={};i&8&&(l.data=t[19]),e.$set(l)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){ue(e,t)}}}function Ge(r){let e,s;return e=new mt({props:{id:r[15],data:r[16]}}),{c(){oe(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,i){ce(e,t,i),s=!0},p(t,i){const l={};i&4&&(l.id=t[15]),i&4&&(l.data=t[16]),e.$set(l)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){ue(e,t)}}}function wt(r){let e,s,t,i,l,a,d,y,o,b,R,A,h,S,I,f='<i class="fa-solid fa-paper-plane svelte-10t8t63"></i>',c,k,w,D,B=r[2].size+"",C,z,L,K,F,te,me,M=r[4]&&Je(),V=r[5]&&r[6]&&Ke();t=new st({});let W=re(r[3]),P=[];for(let u=0;u<W.length;u+=1)P[u]=Fe(He(r,W,u));const Qe=u=>q(P[u],1,1,()=>{P[u]=null});b=new yt({});let Z=re(r[2].entries()),O=[];for(let u=0;u<Z.length;u+=1)O[u]=Ge(qe(r,Z,u));const Ye=u=>q(O[u],1,1,()=>{O[u]=null});return{c(){M&&M.c(),e=j(),V&&V.c(),s=j(),oe(t.$$.fragment),i=j(),l=g("section"),a=g("article"),d=g("div");for(let u=0;u<P.length;u+=1)P[u].c();y=j(),o=g("div"),oe(b.$$.fragment),R=j(),A=g("form"),h=g("input"),S=j(),I=g("button"),I.innerHTML=f,c=j(),k=g("article"),w=g("h3"),D=ae("Usuarios conectados: "),C=ae(B),z=j(),L=g("div");for(let u=0;u<O.length;u+=1)O[u].c();this.h()},l(u){M&&M.l(u),e=U(u),V&&V.l(u),s=U(u),ne(t.$$.fragment,u),i=U(u),l=v(u,"SECTION",{class:!0});var T=E(l);a=v(T,"ARTICLE",{class:!0});var _=E(a);d=v(_,"DIV",{class:!0});var Q=E(d);for(let x=0;x<P.length;x+=1)P[x].l(Q);Q.forEach(p),y=U(_),o=v(_,"DIV",{class:!0});var be=E(o);ne(b.$$.fragment,be),R=U(be),A=v(be,"FORM",{class:!0});var _e=E(A);h=v(_e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,minlength:!0}),S=U(_e),I=v(_e,"BUTTON",{class:!0,"data-svelte-h":!0}),ge(I)!=="svelte-1m1u804"&&(I.innerHTML=f),_e.forEach(p),be.forEach(p),_.forEach(p),c=U(T),k=v(T,"ARTICLE",{class:!0});var ye=E(k);w=v(ye,"H3",{class:!0});var Te=E(w);D=le(Te,"Usuarios conectados: "),C=le(Te,B),Te.forEach(p),z=U(ye),L=v(ye,"DIV",{class:!0});var Oe=E(L);for(let x=0;x<O.length;x+=1)O[x].l(Oe);Oe.forEach(p),ye.forEach(p),T.forEach(p),this.h()},h(){n(d,"class","chat svelte-10t8t63"),n(h,"class","montserrat-alternates-regular svelte-10t8t63"),n(h,"type","text"),n(h,"placeholder","Escribe tu mensaje..."),n(h,"maxlength","120"),n(h,"minlength","1"),n(I,"class","svelte-10t8t63"),n(A,"class","svelte-10t8t63"),n(o,"class","msg svelte-10t8t63"),n(a,"class","chatBX svelte-10t8t63"),n(w,"class","montserrat-alternates-bold svelte-10t8t63"),n(L,"class","userlist svelte-10t8t63"),n(k,"class",K=ie(`users ${r[7]?"showUserlist":""}`)+" svelte-10t8t63"),n(l,"class","svelte-10t8t63")},m(u,T){M&&M.m(u,T),N(u,e,T),V&&V.m(u,T),N(u,s,T),ce(t,u,T),N(u,i,T),N(u,l,T),m(l,a),m(a,d);for(let _=0;_<P.length;_+=1)P[_]&&P[_].m(d,null);r[9](d),m(a,y),m(a,o),ce(b,o,null),m(o,R),m(o,A),m(A,h),je(h,r[0]),m(A,S),m(A,I),m(l,c),m(l,k),m(k,w),m(w,D),m(w,C),m(k,z),m(k,L);for(let _=0;_<O.length;_+=1)O[_]&&O[_].m(L,null);F=!0,te||(me=[G(h,"input",r[10]),G(A,"submit",tt(r[8]))],te=!0)},p(u,[T]){if(u[4]?M?T&16&&$(M,1):(M=Je(),M.c(),$(M,1),M.m(e.parentNode,e)):M&&(Ie(),q(M,1,1,()=>{M=null}),ke()),u[5]&&u[6]?V?T&96&&$(V,1):(V=Ke(),V.c(),$(V,1),V.m(s.parentNode,s)):V&&(Ie(),q(V,1,1,()=>{V=null}),ke()),T&8){W=re(u[3]);let _;for(_=0;_<W.length;_+=1){const Q=He(u,W,_);P[_]?(P[_].p(Q,T),$(P[_],1)):(P[_]=Fe(Q),P[_].c(),$(P[_],1),P[_].m(d,null))}for(Ie(),_=W.length;_<P.length;_+=1)Qe(_);ke()}if(T&1&&h.value!==u[0]&&je(h,u[0]),(!F||T&4)&&B!==(B=u[2].size+"")&&ve(C,B),T&4){Z=re(u[2].entries());let _;for(_=0;_<Z.length;_+=1){const Q=qe(u,Z,_);O[_]?(O[_].p(Q,T),$(O[_],1)):(O[_]=Ge(Q),O[_].c(),$(O[_],1),O[_].m(L,null))}for(Ie(),_=Z.length;_<O.length;_+=1)Ye(_);ke()}(!F||T&128&&K!==(K=ie(`users ${u[7]?"showUserlist":""}`)+" svelte-10t8t63"))&&n(k,"class",K)},i(u){if(!F){$(M),$(V),$(t.$$.fragment,u);for(let T=0;T<W.length;T+=1)$(P[T]);$(b.$$.fragment,u);for(let T=0;T<Z.length;T+=1)$(O[T]);F=!0}},o(u){q(M),q(V),q(t.$$.fragment,u),P=P.filter(Boolean);for(let T=0;T<P.length;T+=1)q(P[T]);q(b.$$.fragment,u),O=O.filter(Boolean);for(let T=0;T<O.length;T+=1)q(O[T]);F=!1},d(u){u&&(p(e),p(s),p(i),p(l)),M&&M.d(u),V&&V.d(u),ue(t,u),Ce(P,u),r[9](null),ue(b),Ce(O,u),te=!1,Pe(me)}}}function Et(r){r.scroll({top:r.scrollHeight,behavior:"smooth"})}function Tt(r,e,s){let t,i,l,a,d,y;J(r,se,c=>s(11,t=c)),J(r,Ee,c=>s(4,i=c)),J(r,Re,c=>s(12,l=c)),J(r,pe,c=>s(5,a=c)),J(r,we,c=>s(6,d=c)),J(r,Ze,c=>s(7,y=c));let o="",b=null,R=[],A=[{username:"frensgo :",body:`Bienvenido a la sala ${l.room}`,type:"bot"}];Me(()=>{t.send(JSON.stringify({type:"GETUSERLIST"}))}),Xe(()=>{t.close(),Y(se,t=null,t)});function h(c,k){switch(c){case"USERLIST":const w=new Map(k);s(2,R=w);break;case"NEW_USER":const D={username:"frensgo :",body:k,type:"bot"};A.push(D),s(3,A);break;case"BYE_USER":const B={username:"frensgo :",body:k,type:"bot"};A.push(B),s(3,A);break;case"ROOM_MSG":if(A.push({...k,type:"room"}),s(3,A),A.length>=100){s(3,A=[]);const C={username:"frensgo :",body:"Limpieza automática activada",type:"bot"};A.push(C),s(3,A)}setTimeout(()=>Et(b),.1);break;case"CALM":Y(Ee,i=!0,i);break;case"AUDIO":A.push({...k,type:"audio"}),s(3,A);break;case"IMG":A.push({...k,type:"image"}),s(3,A);break;case"STICKER":A.push({...k,type:"sticker"}),s(3,A);break}}Y(se,t.onmessage=c=>{const{type:k,msg:w}=JSON.parse(c.data);h(k,w)},t),Y(se,t.onclose=()=>{rt("/rooms")},t);function S(){!o||o.length===0||o.length>120||(t.send(JSON.stringify({type:"ROOM_MSG",msg:o.trim()})),s(0,o=""))}function I(c){et[c?"unshift":"push"](()=>{b=c,s(1,b)})}function f(){o=this.value,s(0,o)}return[o,b,R,A,i,a,d,y,S,I,f]}class jt extends fe{constructor(e){super(),he(this,e,Tt,wt,de,{})}}export{jt as component,Ot as universal};
