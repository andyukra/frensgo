import{m as Se,s as re,r as vt,a as Te,b as Ue,p as je,c as pe,d as ft,e as Le,u as bt}from"../chunks/index.DP4uLY8N.js";import{s as _e,l as _t,y as Ie,n as Z,c as V,o as De,d as ae,z as ge,r as Ae,A as ut,f as He}from"../chunks/scheduler.CHVDA16w.js";import{S as ye,i as ke,e as I,s as U,t as ve,c as A,a as M,f as L,b as be,d as g,n as u,g as B,h as v,p as D,j as we,D as qe,r as Be,E as oe,m as te,C as Ee,k as R,w as le,l as J,u as ie,o as Ne,q as dt,y as ne,z as ce,A as fe,B as ue}from"../chunks/index.Dae8QIfg.js";import{e as ee,N as yt}from"../chunks/Navbar.DDOghGJX.js";import{g as kt}from"../chunks/entry.BNqPOsFW.js";const It=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function At(){let l,e;if(Se.subscribe(t=>l=t),re.subscribe(t=>e=t),!l||!e)throw vt(307,"/")}const ts=Object.freeze(Object.defineProperty({__proto__:null,load:At},Symbol.toStringTag,{value:"Module"}));class Q extends HTMLElement{constructor(){super(),this.isIframeLoaded=!1,this.setupDom()}static get observedAttributes(){return["videoid","playlistid"]}connectedCallback(){this.addEventListener("pointerover",Q.warmConnections,{once:!0}),this.addEventListener("click",()=>this.addIframe())}get videoId(){return encodeURIComponent(this.getAttribute("videoid")||"")}set videoId(e){this.setAttribute("videoid",e)}get playlistId(){return encodeURIComponent(this.getAttribute("playlistid")||"")}set playlistId(e){this.setAttribute("playlistid",e)}get videoTitle(){return this.getAttribute("videotitle")||"Video"}set videoTitle(e){this.setAttribute("videotitle",e)}get videoPlay(){return this.getAttribute("videoPlay")||"Play"}set videoPlay(e){this.setAttribute("videoPlay",e)}get videoStartAt(){return this.getAttribute("videoStartAt")||"0"}get autoLoad(){return this.hasAttribute("autoload")}get noCookie(){return this.hasAttribute("nocookie")}get posterQuality(){return this.getAttribute("posterquality")||"hqdefault"}get posterLoading(){return this.getAttribute("posterloading")||"lazy"}get params(){return`start=${this.videoStartAt}&${this.getAttribute("params")}`}set params(e){this.setAttribute("params",e)}setupDom(){const e=this.attachShadow({mode:"open"});let t="";window.liteYouTubeNonce&&(t=`nonce="${window.liteYouTubeNonce}"`),e.innerHTML=`
      <style ${t}>
        :host {
          contain: content;
          display: block;
          position: relative;
          width: 100%;
          padding-bottom: calc(100% / (16 / 9));
        }

        @media (max-width: 40em) {
          :host([short]) {
            padding-bottom: calc(100% / (9 / 16));
          }
        }

        #frame, #fallbackPlaceholder, iframe {
          position: absolute;
          width: 100%;
          height: 100%;
          left: 0;
        }

        #frame {
          cursor: pointer;
        }

        #fallbackPlaceholder {
          object-fit: cover;
        }

        #frame::before {
          content: '';
          display: block;
          position: absolute;
          top: 0;
          background-image: linear-gradient(180deg, #111 -20%, transparent 90%);
          height: 60px;
          width: 100%;
          z-index: 1;
        }

        #playButton {
          width: 68px;
          height: 48px;
          background-color: transparent;
          background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/><path d="M45 24 27 14v20" fill="white"/></svg>');
          z-index: 1;
          border: 0;
          border-radius: inherit;
        }

        #playButton:before {
          content: '';
          border-style: solid;
          border-width: 11px 0 11px 19px;
          border-color: transparent transparent transparent #fff;
        }

        #playButton,
        #playButton:before {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate3d(-50%, -50%, 0);
          cursor: inherit;
        }

        /* Post-click styles */
        .activated {
          cursor: unset;
        }

        #frame.activated::before,
        #frame.activated > #playButton {
          display: none;
        }
      </style>
      <div id="frame">
        <picture>
          <source id="webpPlaceholder" type="image/webp">
          <source id="jpegPlaceholder" type="image/jpeg">
          <img id="fallbackPlaceholder" referrerpolicy="origin" loading="lazy">
        </picture>
        <button id="playButton"></button>
      </div>
    `,this.domRefFrame=e.querySelector("#frame"),this.domRefImg={fallback:e.querySelector("#fallbackPlaceholder"),webp:e.querySelector("#webpPlaceholder"),jpeg:e.querySelector("#jpegPlaceholder")},this.domRefPlayButton=e.querySelector("#playButton")}setupComponent(){this.initImagePlaceholder(),this.domRefPlayButton.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),this.setAttribute("title",`${this.videoPlay}: ${this.videoTitle}`),(this.autoLoad||this.isYouTubeShort())&&this.initIntersectionObserver()}attributeChangedCallback(e,t,s){switch(e){case"videoid":case"playlistid":case"videoTitle":case"videoPlay":{t!==s&&(this.setupComponent(),this.domRefFrame.classList.contains("activated")&&(this.domRefFrame.classList.remove("activated"),this.shadowRoot.querySelector("iframe").remove(),this.isIframeLoaded=!1));break}}}addIframe(e=!1){if(!this.isIframeLoaded){let t=e?0:1;const s=this.noCookie?"-nocookie":"";let i;this.playlistId?i=`?listType=playlist&list=${this.playlistId}&`:i=`${this.videoId}?`,this.isYouTubeShort()&&(this.params=`loop=1&mute=1&modestbranding=1&playsinline=1&rel=0&enablejsapi=1&playlist=${this.videoId}`,t=1);const a=`
<iframe frameborder="0" title="${this.videoTitle}"
  allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen
  src="https://www.youtube${s}.com/embed/${i}autoplay=${t}&${this.params}"
></iframe>`;this.domRefFrame.insertAdjacentHTML("beforeend",a),this.domRefFrame.classList.add("activated"),this.isIframeLoaded=!0,this.attemptShortAutoPlay(),this.dispatchEvent(new CustomEvent("liteYoutubeIframeLoaded",{detail:{videoId:this.videoId},bubbles:!0,cancelable:!0}))}}initImagePlaceholder(){var s,i;const e=`https://i.ytimg.com/vi_webp/${this.videoId}/${this.posterQuality}.webp`,t=`https://i.ytimg.com/vi/${this.videoId}/${this.posterQuality}.jpg`;this.domRefImg.fallback.loading=this.posterLoading,this.domRefImg.webp.srcset=e,this.domRefImg.jpeg.srcset=t,this.domRefImg.fallback.src=t,this.domRefImg.fallback.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),(i=(s=this.domRefImg)==null?void 0:s.fallback)==null||i.setAttribute("alt",`${this.videoPlay}: ${this.videoTitle}`)}initIntersectionObserver(){const e={root:null,rootMargin:"0px",threshold:0};new IntersectionObserver((s,i)=>{s.forEach(a=>{a.isIntersecting&&!this.isIframeLoaded&&(Q.warmConnections(),this.addIframe(!0),i.unobserve(this))})},e).observe(this)}attemptShortAutoPlay(){this.isYouTubeShort()&&setTimeout(()=>{var e,t;(t=(e=this.shadowRoot.querySelector("iframe"))==null?void 0:e.contentWindow)==null||t.postMessage('{"event":"command","func":"playVideo","args":""}',"*")},2e3)}isYouTubeShort(){return this.getAttribute("short")===""&&window.matchMedia("(max-width: 40em)").matches}static addPrefetch(e,t){const s=document.createElement("link");s.rel=e,s.href=t,s.crossOrigin="true",document.head.append(s)}static warmConnections(){Q.isPreconnected||window.liteYouTubeIsPreconnected||(Q.addPrefetch("preconnect","https://i.ytimg.com/"),Q.addPrefetch("preconnect","https://s.ytimg.com"),Q.addPrefetch("preconnect","https://www.youtube.com"),Q.addPrefetch("preconnect","https://www.google.com"),Q.addPrefetch("preconnect","https://googleads.g.doubleclick.net"),Q.addPrefetch("preconnect","https://static.doubleclick.net"),Q.isPreconnected=!0,window.liteYouTubeIsPreconnected=!0)}}Q.isPreconnected=!1;customElements.define("lite-youtube",Q);function Je(l){let e;return{c(){e=I("i"),this.h()},l(t){e=A(t,"I",{class:!0}),M(e).forEach(g),this.h()},h(){u(e,"class","fa-solid fa-circle-user svelte-1ta0gjj")},m(t,s){B(t,e,s)},d(t){t&&g(e)}}}function wt(l){let e;return{c(){e=I("lite-youtube"),this.h()},l(t){e=A(t,"LITE-YOUTUBE",{class:!0,videoid:!0}),M(e).forEach(g),this.h()},h(){qe(e,"class","ytFrame svelte-1ta0gjj"),qe(e,"videoid",l[1])},m(t,s){B(t,e,s)},p(t,s){s&2&&qe(e,"videoid",t[1])},d(t){t&&g(e)}}}function Et(l){let e,t,s,i,a;return{c(){e=I("img"),this.h()},l(r){e=A(r,"IMG",{src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){ge(e.src,t=l[0].body)||u(e,"src",t),u(e,"alt","Imagen subida Por un usuario"),u(e,"style",s=`cursor:pointer;${l[0].type===l[3].STICKER?"width:150px;":""}`),u(e,"class","svelte-1ta0gjj")},m(r,c){B(r,e,c),i||(a=D(e,"click",l[9]),i=!0)},p(r,c){c&1&&!ge(e.src,t=r[0].body)&&u(e,"src",t),c&1&&s!==(s=`cursor:pointer;${r[0].type===r[3].STICKER?"width:150px;":""}`)&&u(e,"style",s)},d(r){r&&g(e),i=!1,a()}}}function Tt(l){let e,t;return{c(){e=I("audio"),this.h()},l(s){e=A(s,"AUDIO",{src:!0}),M(e).forEach(g),this.h()},h(){ge(e.src,t=l[0].body)||u(e,"src",t),e.controls=!0},m(s,i){B(s,e,i)},p(s,i){i&1&&!ge(e.src,t=s[0].body)&&u(e,"src",t)},d(s){s&&g(e)}}}function jt(l){let e,t=l[0].body+"",s;return{c(){e=I("p"),s=ve(t),this.h()},l(i){e=A(i,"P",{class:!0});var a=M(e);s=be(a,t),a.forEach(g),this.h()},h(){u(e,"class","montserrat-alternates-regular svelte-1ta0gjj")},m(i,a){B(i,e,a),v(e,s)},p(i,a){a&1&&t!==(t=i[0].body+"")&&we(s,t)},d(i){i&&g(e)}}}function St(l){let e,t,s,i,a=decodeURI(l[0].username)+"",r,c,f,h,_,S,E;_t(l[8]);let o=l[0].type!==l[3].BOT&&Je();function n(b,T){if(b[0].type===b[3].ROOM||b[0].type===b[3].BOT||b[0].type===b[3].PV)return jt;if(b[0].type===b[3].AUDIO)return Tt;if(b[0].type===b[3].IMAGE||b[0].type===b[3].STICKER)return Et;if(b[0].type===b[3].YT)return wt}let d=n(l),m=d&&d(l);return{c(){e=I("article"),t=I("div"),o&&o.c(),s=U(),i=I("h4"),r=ve(a),c=U(),f=I("div"),h=I("div"),m&&m.c(),this.h()},l(b){e=A(b,"ARTICLE",{class:!0,style:!0});var T=M(e);t=A(T,"DIV",{class:!0});var w=M(t);o&&o.l(w),s=L(w),i=A(w,"H4",{class:!0});var y=M(i);r=be(y,a),y.forEach(g),w.forEach(g),c=L(T),f=A(T,"DIV",{class:!0});var j=M(f);h=A(j,"DIV",{class:!0});var P=M(h);m&&m.l(P),P.forEach(g),j.forEach(g),T.forEach(g),this.h()},h(){u(i,"class","montserrat-alternates-bold svelte-1ta0gjj"),u(t,"class","username svelte-1ta0gjj"),u(h,"class",Ie(`body ${l[7]()}`)+" svelte-1ta0gjj"),u(f,"class","bodyBX"),u(e,"class",Ie(`${l[4]?"me":""}`)+" svelte-1ta0gjj"),u(e,"style",_=l[6](l[2]))},m(b,T){B(b,e,T),v(e,t),o&&o.m(t,null),v(t,s),v(t,i),v(i,r),v(e,c),v(e,f),v(f,h),m&&m.m(h,null),S||(E=D(window,"resize",l[8]),S=!0)},p(b,[T]){b[0].type!==b[3].BOT?o||(o=Je(),o.c(),o.m(t,s)):o&&(o.d(1),o=null),T&1&&a!==(a=decodeURI(b[0].username)+"")&&we(r,a),d===(d=n(b))&&m?m.p(b,T):(m&&m.d(1),m=d&&d(b),m&&(m.c(),m.m(h,null))),T&4&&_!==(_=b[6](b[2]))&&u(e,"style",_)},i:Z,o:Z,d(b){b&&g(e),o&&o.d(),m&&m.d(),S=!1,E()}}}function Mt(l,e,t){let s,i,a;V(l,Te,m=>t(10,s=m)),V(l,Ue,m=>t(11,i=m)),V(l,Se,m=>t(12,a=m));var r=(m=>(m.ROOM="room",m.BOT="bot",m.AUDIO="audio",m.IMAGE="image",m.YT="yt",m.STICKER="sticker",m.PV="pv",m))(r||{});let{data:c}=e,f=null;De(()=>{if(/^https:\/\/(www\.)?youtu.+\//.test(c.body)){const m=c.body.match(/(\.be\/|v=).{11}/);t(1,f=m[0].replace(m[1],"")),t(0,c.type="yt",c)}});const h=a.username===decodeURI(c.username);let _;function S(m){ae(Ue,i=m.src,i),ae(Te,s=!0,s)}function E(m){if(c.type==="bot")return"";let b="";return _<500&&(b+="flex-direction:column;gap:0.4rem !important;",h?b+="align-items:end;":b+="align-items:start;"),b}function o(){switch(c.type){case"bot":return"typeBot";case"audio":return"typeAudio";case"image":return"typeImg";case"sticker":return"typeBot";case"pv":return"typePv";default:return""}}function n(){t(2,_=window.outerWidth)}const d=m=>S(m.target);return l.$$set=m=>{"data"in m&&t(0,c=m.data)},[c,f,_,r,h,S,E,o,n,d]}class ht extends ye{constructor(e){super(),ke(this,e,Mt,St,_e,{data:0})}}function Ke(l){let e,t,s,i='<p class="montserrat-alternates-bold">Privado</p> <i class="fa-solid fa-message"></i>',a,r,c='<p class="montserrat-alternates-bold">cancelar</p> <i class="fas fa-times"></i>',f,h;function _(o,n){return o[3]?Pt:Ot}let S=_(l),E=S(l);return{c(){e=I("ul"),E.c(),t=U(),s=I("li"),s.innerHTML=i,a=U(),r=I("li"),r.innerHTML=c,this.h()},l(o){e=A(o,"UL",{class:!0});var n=M(e);E.l(n),t=L(n),s=A(n,"LI",{class:!0,"data-svelte-h":!0}),te(s)!=="svelte-1y20pd9"&&(s.innerHTML=i),a=L(n),r=A(n,"LI",{class:!0,"data-svelte-h":!0}),te(r)!=="svelte-v7ez2z"&&(r.innerHTML=c),n.forEach(g),this.h()},h(){u(s,"class","cancel svelte-vf38tq"),u(r,"class","cancel svelte-vf38tq"),u(e,"class","opts svelte-vf38tq")},m(o,n){B(o,e,n),E.m(e,null),v(e,t),v(e,s),v(e,a),v(e,r),f||(h=[D(s,"click",l[7]),D(r,"click",l[4])],f=!0)},p(o,n){S===(S=_(o))&&E?E.p(o,n):(E.d(1),E=S(o),E&&(E.c(),E.m(e,t)))},d(o){o&&g(e),E.d(),f=!1,Ae(h)}}}function Ot(l){let e,t='<p class="montserrat-alternates-bold">silenciar</p> <i class="fas fa-volume-mute"></i>',s,i;return{c(){e=I("li"),e.innerHTML=t,this.h()},l(a){e=A(a,"LI",{class:!0,"data-svelte-h":!0}),te(e)!=="svelte-nq1i3d"&&(e.innerHTML=t),this.h()},h(){u(e,"class","silence svelte-vf38tq")},m(a,r){B(a,e,r),s||(i=D(e,"click",l[9]),s=!0)},p:Z,d(a){a&&g(e),s=!1,i()}}}function Pt(l){let e,t='<p class="montserrat-alternates-bold">quitar silencio</p> <i class="fas fa-volume-up"></i>',s,i;return{c(){e=I("li"),e.innerHTML=t,this.h()},l(a){e=A(a,"LI",{class:!0,"data-svelte-h":!0}),te(e)!=="svelte-1kkyzxq"&&(e.innerHTML=t),this.h()},h(){u(e,"class","silence svelte-vf38tq")},m(a,r){B(a,e,r),s||(i=D(e,"click",l[8]),s=!0)},p:Z,d(a){a&&g(e),s=!1,i()}}}function Ct(l){let e,t,s,i,a=decodeURI(l[1].username)+"",r,c,f,h,_,S,E,o=l[2]&&Ke(l);return{c(){e=I("article"),t=I("i"),s=U(),i=I("h4"),r=ve(a),c=U(),f=I("i"),h=U(),o&&o.c(),_=Be(),this.h()},l(n){e=A(n,"ARTICLE",{"data-id":!0,class:!0});var d=M(e);t=A(d,"I",{class:!0}),M(t).forEach(g),s=L(d),i=A(d,"H4",{class:!0});var m=M(i);r=be(m,a),m.forEach(g),c=L(d),f=A(d,"I",{class:!0}),M(f).forEach(g),d.forEach(g),h=L(n),o&&o.l(n),_=Be(),this.h()},h(){u(t,"class","fa-solid fa-circle-user svelte-vf38tq"),u(i,"class","montserrat-alternates-bold svelte-vf38tq"),u(f,"class","fa-solid fa-circle-question svelte-vf38tq"),u(e,"data-id",l[0]),u(e,"class","svelte-vf38tq"),oe(e,"muted",l[3])},m(n,d){B(n,e,d),v(e,t),v(e,s),v(e,i),v(i,r),v(e,c),v(e,f),B(n,h,d),o&&o.m(n,d),B(n,_,d),S||(E=D(e,"click",l[4]),S=!0)},p(n,[d]){d&2&&a!==(a=decodeURI(n[1].username)+"")&&we(r,a),d&1&&u(e,"data-id",n[0]),d&8&&oe(e,"muted",n[3]),n[2]?o?o.p(n,d):(o=Ke(n),o.c(),o.m(_.parentNode,_)):o&&(o.d(1),o=null)},i:Z,o:Z,d(n){n&&(g(e),g(h),g(_)),o&&o.d(n),S=!1,E()}}}function Rt(l,e,t){let s,i,a,r,c;V(l,je,T=>t(10,s=T)),V(l,pe,T=>t(11,i=T)),V(l,Se,T=>t(12,a=T)),V(l,re,T=>t(13,r=T)),V(l,ft,T=>t(14,c=T));let{id:f}=e,{data:h}=e,_=!1;function S(){a.username!==h.username&&t(2,_=!_)}let E=!1;c.has(h.username)&&(E=!0);function o(T){a.username!==T&&(c.add(T),t(3,E=!0),t(2,_=!1))}function n(T){a.username===T||!c.delete(T)||(t(3,E=!1),t(2,_=!1))}function d(){r.send(JSON.stringify({type:"OPEN_PV",msg:{to:f}}));const T={id:f,nick:h.username,me:a.id};i.add(JSON.stringify(T)),pe.set(i),s.set(f,[]),t(2,_=!1)}const m=()=>n(h.username),b=()=>o(h.username);return l.$$set=T=>{"id"in T&&t(0,f=T.id),"data"in T&&t(1,h=T.data)},[f,h,_,E,S,o,n,d,m,b]}class Ut extends ye{constructor(e){super(),ke(this,e,Rt,Ct,_e,{id:0,data:1})}}function Lt(l){let e,t,s,i;return{c(){e=I("section"),t=I("article"),s=I("h4"),i=ve(l[0]),this.h()},l(a){e=A(a,"SECTION",{class:!0});var r=M(e);t=A(r,"ARTICLE",{class:!0});var c=M(t);s=A(c,"H4",{class:!0});var f=M(s);i=be(f,l[0]),f.forEach(g),c.forEach(g),r.forEach(g),this.h()},h(){u(s,"class","montserrat-alternates-medium svelte-1wtc119"),u(t,"class","svelte-1wtc119"),u(e,"class","svelte-1wtc119")},m(a,r){B(a,e,r),v(e,t),v(t,s),v(s,i)},p(a,[r]){r&1&&we(i,a[0])},i:Z,o:Z,d(a){a&&g(e)}}}function Bt(l,e,t){let s;V(l,Le,r=>t(2,s=r));let{msg:i}=e,{time:a}=e;return De(()=>{document.onkeydown=()=>!1}),ut(()=>{document.onkeydown=null}),setTimeout(()=>ae(Le,s=!1,s),a),l.$$set=r=>{"msg"in r&&t(0,i=r.msg),"time"in r&&t(1,a=r.time)},[i,a]}class Nt extends ye{constructor(e){super(),ke(this,e,Bt,Lt,_e,{msg:0,time:1})}}const Fe=["https://i.pinimg.com/564x/26/01/7e/26017ea921bf3f92ee09017d7a008c4c.jpg","https://i.pinimg.com/564x/b2/a5/22/b2a522fa576b9e883e8040d9f4971d57.jpg","https://i.pinimg.com/564x/e1/68/df/e168df965c1300c16a78fa6479f0f84b.jpg","https://i.pinimg.com/236x/3b/c1/90/3bc190d0fe1e5ab694eb48bb679617d6.jpg","https://i.pinimg.com/236x/0e/c5/26/0ec526b2677e3f4b59575b39e0c80c1a.jpg","https://i.pinimg.com/236x/f4/b6/ed/f4b6ed6ed97a5d568d18d9466b517e4d.jpg","https://i.pinimg.com/236x/c5/cb/6f/c5cb6fb8e5e9c0121c35bb63703553ff.jpg","https://i.pinimg.com/236x/3b/6a/f0/3b6af08fc3770a8323787a98b2295046.jpg","https://i.pinimg.com/236x/8e/a8/4a/8ea84ae43f94280f0f88b7a6bb640ca5.jpg","https://i.pinimg.com/236x/58/f6/a9/58f6a9167e1374a4ae98f560fb6bef08.jpg","https://i.pinimg.com/236x/6e/74/df/6e74df3fb594f746693d43aef71e7c20.jpg","https://i.pinimg.com/236x/81/04/79/8104795db0b5220f331b51b089aa1edb.jpg","https://i.pinimg.com/236x/4e/3c/47/4e3c47cb9ad9d86968ea5b1a8eee761f.jpg","https://i.pinimg.com/236x/f0/96/05/f09605c6a782601c5a516dc513fec8ab.jpg","https://i.pinimg.com/236x/ab/e5/28/abe528cc836c08c02ed39b4264bbfa2a.jpg","https://i.pinimg.com/236x/ae/e2/a0/aee2a0b025b7e676d491c58e64c0c0e0.jpg","https://i.pinimg.com/236x/ab/0f/f7/ab0ff72902f0ed5be507bb542f14e04c.jpg","https://i.pinimg.com/236x/5e/50/d3/5e50d303bff603bac964e9e1d70cc263.jpg","https://i.pinimg.com/236x/9e/1f/03/9e1f03aa60d4e8919484de08c4741c7d.jpg","https://i.pinimg.com/236x/4b/8c/f1/4b8cf19584ede706ad857b998cc39332.jpg","https://i.pinimg.com/236x/df/59/34/df5934ad681ad29edc0bc2a88ab538dc.jpg","https://i.pinimg.com/236x/b9/d2/4a/b9d24af77da570a5d304950974f5269e.jpg","https://media.tenor.com/Eet92-jhr3MAAAAj/hasher-happy-sticker.gif","https://media.tenor.com/rOZE9d6XIWIAAAAi/line.gif","https://media.tenor.com/eM0K9-K-hcUAAAAi/crying.gif","https://media.tenor.com/7VE1yyfi5CIAAAAi/fighting-addoil.gif","https://media.tenor.com/rXbN_gwjc7AAAAAi/alice-sticker-alice-animated.gif","https://media.tenor.com/5Ada5-x6Vz8AAAAj/cute.gif","https://media.tenor.com/OY6bIk0asR4AAAAj/quby.gif","https://media.tenor.com/pB8dRaVDsBwAAAAj/tkthao219-quby.gif","https://media.tenor.com/J2bPcmfvfaUAAAAj/tkthao219-quby.gif","https://media.tenor.com/JtV9gaxyavAAAAAj/peach-cat.gif","https://media.tenor.com/GTjXEnuTUUMAAAAj/loved-love.gif","https://media.tenor.com/7r6lLYznnTsAAAAj/sticker-cartoon.gif","https://media.tenor.com/Ck3Q6OuFmzQAAAAj/animated-stickers-good-morning.gif","https://media.tenor.com/nQUJSVnPH8sAAAAj/tkthao219-quby.gif","https://media.tenor.com/senzjQZHOZwAAAAj/hasher-sticker.gif","https://media.tenor.com/b87Ur_ijFF0AAAAj/char.gif","https://media.tenor.com/xPDDnUtYMS0AAAAj/line-sticker-thank-you-sticker.gif","https://media.tenor.com/ua3mX1agSvoAAAAj/hasher-sticker.gif","https://media.tenor.com/83rrChRnhVwAAAAj/tkthao219-quby.gif"];function Ge(l,e,t){const s=l.slice();return s[16]=e[t],s}function Xe(l){let e,t,s,i="Emojis",a,r,c="stickers",f,h,_,S,E,o=l[1]===l[3].EMOJI&&Ye(),n=l[1]===l[3].STICKER&&We(l);return{c(){e=I("div"),t=I("div"),s=I("h5"),s.textContent=i,a=U(),r=I("h5"),r.textContent=c,f=U(),h=I("div"),o&&o.c(),_=U(),n&&n.c(),this.h()},l(d){e=A(d,"DIV",{class:!0});var m=M(e);t=A(m,"DIV",{class:!0});var b=M(t);s=A(b,"H5",{class:!0,"data-svelte-h":!0}),te(s)!=="svelte-wn67si"&&(s.textContent=i),a=L(b),r=A(b,"H5",{class:!0,"data-svelte-h":!0}),te(r)!=="svelte-1gj1sgi"&&(r.textContent=c),b.forEach(g),f=L(m),h=A(m,"DIV",{class:!0});var T=M(h);o&&o.l(T),_=L(T),n&&n.l(T),T.forEach(g),m.forEach(g),this.h()},h(){u(s,"class","montserrat-alternates-bold svelte-1s5h8gr"),oe(s,"activeTab",l[1]===l[3].EMOJI),u(r,"class","activeTab montserrat-alternates-bold svelte-1s5h8gr"),oe(r,"activeTab",l[1]===l[3].STICKER),u(t,"class","tab svelte-1s5h8gr"),u(h,"class","mojis svelte-1s5h8gr"),u(e,"class","emojisBX svelte-1s5h8gr")},m(d,m){B(d,e,m),v(e,t),v(t,s),v(t,a),v(t,r),v(e,f),v(e,h),o&&o.m(h,null),v(h,_),n&&n.m(h,null),S||(E=[D(s,"click",l[9]),D(r,"click",l[10])],S=!0)},p(d,m){m&10&&oe(s,"activeTab",d[1]===d[3].EMOJI),m&10&&oe(r,"activeTab",d[1]===d[3].STICKER),d[1]===d[3].EMOJI?o||(o=Ye(),o.c(),o.m(h,_)):o&&(o.d(1),o=null),d[1]===d[3].STICKER?n?n.p(d,m):(n=We(d),n.c(),n.m(h,null)):n&&(n.d(1),n=null)},d(d){d&&g(e),o&&o.d(),n&&n.d(),S=!1,Ae(E)}}}function Ye(l){let e;return{c(){e=I("div"),this.h()},l(t){e=A(t,"DIV",{class:!0}),M(e).forEach(g),this.h()},h(){u(e,"class","caritasBX svelte-1s5h8gr")},m(t,s){B(t,e,s)},d(t){t&&g(e)}}}function We(l){let e,t=ee(Fe),s=[];for(let i=0;i<t.length;i+=1)s[i]=Qe(Ge(l,t,i));return{c(){e=I("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=A(i,"DIV",{class:!0});var a=M(e);for(let r=0;r<s.length;r+=1)s[r].l(a);a.forEach(g),this.h()},h(){u(e,"class","stickersBX svelte-1s5h8gr")},m(i,a){B(i,e,a);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(i,a){if(a&32){t=ee(Fe);let r;for(r=0;r<t.length;r+=1){const c=Ge(i,t,r);s[r]?s[r].p(c,a):(s[r]=Qe(c),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(i){i&&g(e),Ee(s,i)}}}function Qe(l){let e,t,s,i;function a(){return l[11](l[16])}return{c(){e=I("img"),this.h()},l(r){e=A(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ge(e.src,t=l[16])||u(e,"src",t),u(e,"alt","sticker"),u(e,"class","svelte-1s5h8gr")},m(r,c){B(r,e,c),s||(i=D(e,"click",a),s=!0)},p(r,c){l=r},d(r){r&&g(e),s=!1,i()}}}function Dt(l){let e,t,s,i='<button class="montserrat-alternates-bold svelte-1s5h8gr" style="font-size:1.3rem;">T</button>',a,r,c,f,h,_='<i class="fa-solid fa-image svelte-1s5h8gr"></i>',S,E,o,n,d,m,b,T,w,y,j,P=l[0]&&Xe(l);return{c(){e=I("div"),t=I("div"),s=I("div"),s.innerHTML=i,a=U(),r=I("div"),c=I("input"),f=U(),h=I("label"),h.innerHTML=_,S=U(),E=I("div"),o=I("button"),n=I("i"),m=U(),b=I("div"),T=I("i"),w=U(),P&&P.c(),this.h()},l(N){e=A(N,"DIV",{class:!0});var F=M(e);t=A(F,"DIV",{class:!0});var K=M(t);s=A(K,"DIV",{class:!0,"data-svelte-h":!0}),te(s)!=="svelte-1j7ahwz"&&(s.innerHTML=i),a=L(K),r=A(K,"DIV",{class:!0});var Y=M(r);c=A(Y,"INPUT",{type:!0,accept:!0,id:!0}),f=L(Y),h=A(Y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),te(h)!=="svelte-r2pi9w"&&(h.innerHTML=_),Y.forEach(g),S=L(K),E=A(K,"DIV",{class:!0});var W=M(E);o=A(W,"BUTTON",{class:!0});var se=M(o);n=A(se,"I",{class:!0}),M(n).forEach(g),se.forEach(g),W.forEach(g),K.forEach(g),m=L(F),b=A(F,"DIV",{class:!0});var C=M(b);T=A(C,"I",{class:!0}),M(T).forEach(g),w=L(C),P&&P.l(C),C.forEach(g),F.forEach(g),this.h()},h(){u(s,"class","txtStyle svelte-1s5h8gr"),u(c,"type","file"),u(c,"accept","image/*"),c.hidden=!0,u(c,"id","upImg"),u(h,"for","upImg"),u(h,"class","svelte-1s5h8gr"),u(r,"class","sendImg svelte-1s5h8gr"),u(n,"class",d=Ie(`fa-solid fa-microphone ${l[2]?"rec":"stop"}`)+" svelte-1s5h8gr"),u(o,"class","svelte-1s5h8gr"),u(E,"class","sendAudio svelte-1s5h8gr"),u(t,"class","main svelte-1s5h8gr"),u(T,"class","fa-solid fa-face-grin-beam svelte-1s5h8gr"),u(b,"class","emojis svelte-1s5h8gr"),u(e,"class","tools svelte-1s5h8gr")},m(N,F){B(N,e,F),v(e,t),v(t,s),v(t,a),v(t,r),v(r,c),v(r,f),v(r,h),v(t,S),v(t,E),v(E,o),v(o,n),v(e,m),v(e,b),v(b,T),v(b,w),P&&P.m(b,null),y||(j=[D(c,"change",l[7]),D(o,"click",l[6]),D(T,"click",l[8])],y=!0)},p(N,[F]){F&4&&d!==(d=Ie(`fa-solid fa-microphone ${N[2]?"rec":"stop"}`)+" svelte-1s5h8gr")&&u(n,"class",d),N[0]?P?P.p(N,F):(P=Xe(N),P.c(),P.m(b,null)):P&&(P.d(1),P=null)},i:Z,o:Z,d(N){N&&g(e),P&&P.d(),y=!1,Ae(j)}}}const Ze="https://frensgo.lat";function Vt(l,e,t){let s;V(l,re,w=>t(13,s=w));var i=(w=>(w.EMOJI="emoji",w.STICKER="sticker",w))(i||{});let a=!1,r="sticker";function c(w){r!==w&&t(1,r=w)}function f(w){s.send(JSON.stringify({type:"STICKER",msg:w})),t(0,a=!1)}let h=null,_=!1;function S(){h||_||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia({audio:!0}).then(w=>{h=new MediaRecorder(w);let y=[];h.ondataavailable=j=>{y.push(j.data)},h.onstop=async()=>{const j=new Blob(y,{type:"audio/ogg;codecs=opus"});y=[];const P=new FormData;P.append("audio",j);const F=await(await fetch(`${Ze}/audio`,{method:"POST",body:P})).text();s.send(JSON.stringify({type:"AUDIO",msg:F}))},h.start(),t(2,_=!0)}).catch(w=>console.log(w))}function E(){h&&_&&(h.stop(),h=null,t(2,_=!1))}function o(){_?E():S()}async function n(w){const y=w.target.files[0];if(y.size>5e6){alert("La im치gen es muy pesada");return}if(!/^image\/....?$/.test(y.type)){alert("Por favor elija una im치gen v치lida");return}const j=new FormData;j.append("image",y);const N=await(await fetch(`${Ze}/upImg`,{method:"POST",body:j})).text();s.send(JSON.stringify({type:"IMG",msg:N}))}return[a,r,_,i,c,f,o,n,()=>t(0,a=!a),()=>{c(i.EMOJI)},()=>{c(i.STICKER)},w=>f(w)]}class qt extends ye{constructor(e){super(),ke(this,e,Vt,Dt,_e,{})}}function Ht(l){let e,t,s,i,a,r,c;return{c(){e=I("div"),t=I("i"),s=U(),i=I("img"),this.h()},l(f){e=A(f,"DIV",{class:!0});var h=M(e);t=A(h,"I",{class:!0}),M(t).forEach(g),s=L(h),i=A(h,"IMG",{src:!0,alt:!0,class:!0}),h.forEach(g),this.h()},h(){u(t,"class","fas fa-times svelte-a6okt0"),ge(i.src,a=l[1])||u(i,"src",a),u(i,"alt","Una imagen"),u(i,"class","svelte-a6okt0"),u(e,"class","modal svelte-a6okt0")},m(f,h){B(f,e,h),v(e,t),v(e,s),v(e,i),r||(c=D(t,"click",l[2]),r=!0)},p(f,[h]){h&2&&!ge(i.src,a=f[1])&&u(i,"src",a)},i:Z,o:Z,d(f){f&&g(e),r=!1,c()}}}function zt(l,e,t){let s,i;return V(l,Te,r=>t(0,s=r)),V(l,Ue,r=>t(1,i=r)),[s,i,()=>ae(Te,s=!1,s)]}class Jt extends ye{constructor(e){super(),ke(this,e,zt,Ht,_e,{})}}const{window:Ce}=It;function $e(l,e,t){const s=l.slice();return s[28]=e[t],s}function xe(l){let e,t=l[9].get(l[1]).length>0,s,i,a,r,c,f,h='<i class="fa-solid fa-paper-plane svelte-1hn3r4l"></i>',_,S,E,o=t&&et(l);return{c(){e=I("div"),o&&o.c(),s=U(),i=I("div"),a=I("form"),r=I("input"),c=U(),f=I("button"),f.innerHTML=h,this.h()},l(n){e=A(n,"DIV",{class:!0});var d=M(e);o&&o.l(d),d.forEach(g),s=L(n),i=A(n,"DIV",{class:!0});var m=M(i);a=A(m,"FORM",{class:!0});var b=M(a);r=A(b,"INPUT",{type:!0,placeholder:!0,minlength:!0,maxlength:!0,class:!0}),c=L(b),f=A(b,"BUTTON",{class:!0,"data-svelte-h":!0}),te(f)!=="svelte-1m1u804"&&(f.innerHTML=h),b.forEach(g),m.forEach(g),this.h()},h(){u(e,"class","body svelte-1hn3r4l"),u(r,"type","text"),u(r,"placeholder","Escribe tu mensaje..."),u(r,"minlength","1"),u(r,"maxlength","120"),r.required=!0,u(r,"class","montserrat-alternates-regular svelte-1hn3r4l"),u(f,"class","svelte-1hn3r4l"),u(a,"class","svelte-1hn3r4l"),u(i,"class","footer svelte-1hn3r4l")},m(n,d){B(n,e,d),o&&o.m(e,null),l[18](e),B(n,s,d),B(n,i,d),v(i,a),v(a,r),Ne(r,l[8]),v(a,c),v(a,f),_=!0,S||(E=[D(r,"input",l[19]),D(a,"submit",dt(l[15]))],S=!0)},p(n,d){d&514&&(t=n[9].get(n[1]).length>0),t?o?(o.p(n,d),d&514&&R(o,1)):(o=et(n),o.c(),R(o,1),o.m(e,null)):o&&(le(),J(o,1,1,()=>{o=null}),ie()),d&256&&r.value!==n[8]&&Ne(r,n[8])},i(n){_||(R(o),_=!0)},o(n){J(o),_=!1},d(n){n&&(g(e),g(s),g(i)),o&&o.d(),l[18](null),S=!1,Ae(E)}}}function et(l){let e,t,s=ee([...l[9]][0][1]),i=[];for(let r=0;r<s.length;r+=1)i[r]=tt($e(l,s,r));const a=r=>J(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Be()},l(r){for(let c=0;c<i.length;c+=1)i[c].l(r);e=Be()},m(r,c){for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(r,c);B(r,e,c),t=!0},p(r,c){if(c&512){s=ee([...r[9]][0][1]);let f;for(f=0;f<s.length;f+=1){const h=$e(r,s,f);i[f]?(i[f].p(h,c),R(i[f],1)):(i[f]=tt(h),i[f].c(),R(i[f],1),i[f].m(e.parentNode,e))}for(le(),f=s.length;f<i.length;f+=1)a(f);ie()}},i(r){if(!t){for(let c=0;c<s.length;c+=1)R(i[c]);t=!0}},o(r){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)J(i[c]);t=!1},d(r){r&&g(e),Ee(i,r)}}}function tt(l){let e,t;return e=new ht({props:{data:l[28]}}),{c(){ne(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,i){fe(e,s,i),t=!0},p(s,i){const a={};i&512&&(a.data=s[28]),e.$set(a)},i(s){t||(R(e.$$.fragment,s),t=!0)},o(s){J(e.$$.fragment,s),t=!1},d(s){ue(e,s)}}}function Kt(l){let e,t,s,i,a,r,c,f,h,_,S,E,o,n,d,m,b,T,w=!l[7]&&xe(l);return{c(){e=I("div"),t=I("div"),s=I("div"),i=I("i"),a=U(),r=I("h3"),c=ve(l[0]),f=U(),h=I("div"),_=I("i"),S=U(),E=I("i"),o=U(),w&&w.c(),this.h()},l(y){e=A(y,"DIV",{class:!0,id:!0,style:!0});var j=M(e);t=A(j,"DIV",{class:!0});var P=M(t);s=A(P,"DIV",{class:!0});var N=M(s);i=A(N,"I",{class:!0}),M(i).forEach(g),a=L(N),r=A(N,"H3",{class:!0});var F=M(r);c=be(F,l[0]),F.forEach(g),N.forEach(g),f=L(P),h=A(P,"DIV",{class:!0});var K=M(h);_=A(K,"I",{class:!0}),M(_).forEach(g),S=L(K),E=A(K,"I",{class:!0}),M(E).forEach(g),K.forEach(g),P.forEach(g),o=L(j),w&&w.l(j),j.forEach(g),this.h()},h(){u(i,"class","fa-solid fa-circle-user svelte-1hn3r4l"),u(r,"class","montserrat-alternates-bold"),u(s,"class","left svelte-1hn3r4l"),u(_,"class","fa-solid fa-down-left-and-up-right-to-center svelte-1hn3r4l"),u(E,"class","fas fa-times svelte-1hn3r4l"),u(h,"class","right svelte-1hn3r4l"),u(t,"class","header svelte-1hn3r4l"),u(e,"class","pvWindow svelte-1hn3r4l"),u(e,"id",n=l[1].toString()),u(e,"style",d=`left:${l[5]}px; top:${l[6]}px; z-index:${l[4]}`),oe(e,"minimize",l[7])},m(y,j){B(y,e,j),v(e,t),v(t,s),v(s,i),v(s,a),v(s,r),v(r,c),v(t,f),v(t,h),v(h,_),v(h,S),v(h,E),v(e,o),w&&w.m(e,null),l[20](e),m=!0,b||(T=[D(Ce,"mouseup",l[12]),D(Ce,"mousemove",l[13]),D(Ce,"touchend",l[12]),D(Ce,"touchmove",l[14]),D(_,"click",l[17]),D(E,"click",l[10]),D(t,"mousedown",l[11]),D(t,"touchstart",l[11],{passive:!0})],b=!0)},p(y,[j]){(!m||j&1)&&we(c,y[0]),y[7]?w&&(le(),J(w,1,1,()=>{w=null}),ie()):w?(w.p(y,j),j&128&&R(w,1)):(w=xe(y),w.c(),R(w,1),w.m(e,null)),(!m||j&2&&n!==(n=y[1].toString()))&&u(e,"id",n),(!m||j&112&&d!==(d=`left:${y[5]}px; top:${y[6]}px; z-index:${y[4]}`))&&u(e,"style",d),(!m||j&128)&&oe(e,"minimize",y[7])},i(y){m||(R(w),m=!0)},o(y){J(w),m=!1},d(y){y&&g(e),w&&w.d(),l[20](null),b=!1,Ae(T)}}}function Ft(l){l.scroll({top:l.scrollHeight,behavior:"smooth"})}function Gt(l,e,t){let s,i,a,r;V(l,je,C=>t(9,s=C)),V(l,Se,C=>t(24,i=C)),V(l,re,C=>t(25,a=C)),V(l,pe,C=>t(26,r=C));let{nick:c}=e,{fromId:f}=e,{me:h}=e,_,S,E=5,o=300,n=Math.round(Math.random()*400),d=!1,m=!1,b;De(()=>{window.outerWidth<500&&t(5,o=0)});function T(){const C=JSON.stringify({id:f,nick:c,me:h});r.has(C)&&(r.delete(C),pe.set(r),s.delete(f),a.send(JSON.stringify({type:"CLOSE_PV",msg:{to:f,nick:c}})))}let w=0;function y(){const{top:C}=S.getBoundingClientRect();w=C,t(4,E++,E),d=!0}function j(){d=!1}function P(C){d&&(t(5,o+=C.movementX),t(6,n+=C.movementY))}function N(C){if(d){const{clientY:G}=C.touches[0],X=G-w;if(isNaN(X))return;t(6,n=n+X),w=G}}function F(){!b||b.length===0||b.length>120||(a.send(JSON.stringify({type:"PV",msg:{to:f,body:b.trim()}})),s.get(f).push({username:i.username,body:b,type:"pv"}),je.set(s),setTimeout(()=>Ft(_),.1),t(8,b=""))}const K=()=>t(7,m=!m);function Y(C){He[C?"unshift":"push"](()=>{_=C,t(2,_)})}function W(){b=this.value,t(8,b)}function se(C){He[C?"unshift":"push"](()=>{S=C,t(3,S)})}return l.$$set=C=>{"nick"in C&&t(0,c=C.nick),"fromId"in C&&t(1,f=C.fromId),"me"in C&&t(16,h=C.me)},[c,f,_,S,E,o,n,m,b,s,T,y,j,P,N,F,h,K,Y,W,se]}class Xt extends ye{constructor(e){super(),ke(this,e,Gt,Kt,_e,{nick:0,fromId:1,me:16})}}function st(l,e,t){const s=l.slice();return s[18]=e[t][0],s[19]=e[t][1],s}function lt(l,e,t){const s=l.slice();return s[22]=e[t],s}function it(l,e,t){const s=l.slice();return s[25]=e[t],s}function rt(l){let e,t;return e=new Nt({props:{msg:"Aver si nos calmamos un poquito :)",time:5e3}}),{c(){ne(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,i){fe(e,s,i),t=!0},i(s){t||(R(e.$$.fragment,s),t=!0)},o(s){J(e.$$.fragment,s),t=!1},d(s){ue(e,s)}}}function at(l){let e,t;return e=new Jt({}),{c(){ne(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,i){fe(e,s,i),t=!0},i(s){t||(R(e.$$.fragment,s),t=!0)},o(s){J(e.$$.fragment,s),t=!1},d(s){ue(e,s)}}}function ot(l){let e,t;return e=new Xt({props:{nick:JSON.parse(l[25]).nick,fromId:JSON.parse(l[25]).id,me:JSON.parse(l[25]).me}}),{c(){ne(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,i){fe(e,s,i),t=!0},p(s,i){const a={};i&16&&(a.nick=JSON.parse(s[25]).nick),i&16&&(a.fromId=JSON.parse(s[25]).id),i&16&&(a.me=JSON.parse(s[25]).me),e.$set(a)},i(s){t||(R(e.$$.fragment,s),t=!0)},o(s){J(e.$$.fragment,s),t=!1},d(s){ue(e,s)}}}function nt(l){let e,t;return e=new ht({props:{data:l[22]}}),{c(){ne(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,i){fe(e,s,i),t=!0},p(s,i){const a={};i&8&&(a.data=s[22]),e.$set(a)},i(s){t||(R(e.$$.fragment,s),t=!0)},o(s){J(e.$$.fragment,s),t=!1},d(s){ue(e,s)}}}function ct(l){let e,t;return e=new Ut({props:{id:l[18],data:l[19]}}),{c(){ne(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,i){fe(e,s,i),t=!0},p(s,i){const a={};i&4&&(a.id=s[18]),i&4&&(a.data=s[19]),e.$set(a)},i(s){t||(R(e.$$.fragment,s),t=!0)},o(s){J(e.$$.fragment,s),t=!1},d(s){ue(e,s)}}}function Yt(l){let e,t,s,i,a,r,c,f,h,_,S,E,o,n,d,m,b='<i class="fa-solid fa-paper-plane svelte-1vmv3y4"></i>',T,w,y,j,P=l[2].size+"",N,F,K,Y,W,se,C,G=l[5]&&rt(),X=l[6]&&l[7]&&at(),de=ee(l[4]),q=[];for(let p=0;p<de.length;p+=1)q[p]=ot(it(l,de,p));const mt=p=>J(q[p],1,1,()=>{q[p]=null});i=new yt({});let he=ee(l[3]),H=[];for(let p=0;p<he.length;p+=1)H[p]=nt(lt(l,he,p));const pt=p=>J(H[p],1,1,()=>{H[p]=null});S=new qt({});let me=ee(l[2].entries()),z=[];for(let p=0;p<me.length;p+=1)z[p]=ct(st(l,me,p));const gt=p=>J(z[p],1,1,()=>{z[p]=null});return{c(){G&&G.c(),e=U(),X&&X.c(),t=U();for(let p=0;p<q.length;p+=1)q[p].c();s=U(),ne(i.$$.fragment),a=U(),r=I("section"),c=I("article"),f=I("div");for(let p=0;p<H.length;p+=1)H[p].c();h=U(),_=I("div"),ne(S.$$.fragment),E=U(),o=I("form"),n=I("input"),d=U(),m=I("button"),m.innerHTML=b,T=U(),w=I("article"),y=I("h3"),j=ve("Usuarios conectados: "),N=ve(P),F=U(),K=I("div");for(let p=0;p<z.length;p+=1)z[p].c();this.h()},l(p){G&&G.l(p),e=L(p),X&&X.l(p),t=L(p);for(let x=0;x<q.length;x+=1)q[x].l(p);s=L(p),ce(i.$$.fragment,p),a=L(p),r=A(p,"SECTION",{class:!0});var O=M(r);c=A(O,"ARTICLE",{class:!0});var k=M(c);f=A(k,"DIV",{class:!0});var $=M(f);for(let x=0;x<H.length;x+=1)H[x].l($);$.forEach(g),h=L(k),_=A(k,"DIV",{class:!0});var Me=M(_);ce(S.$$.fragment,Me),E=L(Me),o=A(Me,"FORM",{class:!0});var Oe=M(o);n=A(Oe,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,minlength:!0}),d=L(Oe),m=A(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),te(m)!=="svelte-1m1u804"&&(m.innerHTML=b),Oe.forEach(g),Me.forEach(g),k.forEach(g),T=L(O),w=A(O,"ARTICLE",{class:!0});var Pe=M(w);y=A(Pe,"H3",{class:!0});var Ve=M(y);j=be(Ve,"Usuarios conectados: "),N=be(Ve,P),Ve.forEach(g),F=L(Pe),K=A(Pe,"DIV",{class:!0});var ze=M(K);for(let x=0;x<z.length;x+=1)z[x].l(ze);ze.forEach(g),Pe.forEach(g),O.forEach(g),this.h()},h(){u(f,"class","chat svelte-1vmv3y4"),u(n,"class","montserrat-alternates-regular svelte-1vmv3y4"),u(n,"type","text"),u(n,"placeholder","Escribe tu mensaje..."),u(n,"maxlength","120"),u(n,"minlength","1"),u(m,"class","svelte-1vmv3y4"),u(o,"class","svelte-1vmv3y4"),u(_,"class","msg svelte-1vmv3y4"),u(c,"class","chatBX svelte-1vmv3y4"),u(y,"class","montserrat-alternates-bold svelte-1vmv3y4"),u(K,"class","userlist svelte-1vmv3y4"),u(w,"class",Y=Ie(`users ${l[8]?"showUserlist":""}`)+" svelte-1vmv3y4"),u(r,"class","svelte-1vmv3y4")},m(p,O){G&&G.m(p,O),B(p,e,O),X&&X.m(p,O),B(p,t,O);for(let k=0;k<q.length;k+=1)q[k]&&q[k].m(p,O);B(p,s,O),fe(i,p,O),B(p,a,O),B(p,r,O),v(r,c),v(c,f);for(let k=0;k<H.length;k+=1)H[k]&&H[k].m(f,null);l[10](f),v(c,h),v(c,_),fe(S,_,null),v(_,E),v(_,o),v(o,n),Ne(n,l[0]),v(o,d),v(o,m),v(r,T),v(r,w),v(w,y),v(y,j),v(y,N),v(w,F),v(w,K);for(let k=0;k<z.length;k+=1)z[k]&&z[k].m(K,null);W=!0,se||(C=[D(n,"input",l[11]),D(o,"submit",dt(l[9]))],se=!0)},p(p,[O]){if(p[5]?G?O&32&&R(G,1):(G=rt(),G.c(),R(G,1),G.m(e.parentNode,e)):G&&(le(),J(G,1,1,()=>{G=null}),ie()),p[6]&&p[7]?X?O&192&&R(X,1):(X=at(),X.c(),R(X,1),X.m(t.parentNode,t)):X&&(le(),J(X,1,1,()=>{X=null}),ie()),O&16){de=ee(p[4]);let k;for(k=0;k<de.length;k+=1){const $=it(p,de,k);q[k]?(q[k].p($,O),R(q[k],1)):(q[k]=ot($),q[k].c(),R(q[k],1),q[k].m(s.parentNode,s))}for(le(),k=de.length;k<q.length;k+=1)mt(k);ie()}if(O&8){he=ee(p[3]);let k;for(k=0;k<he.length;k+=1){const $=lt(p,he,k);H[k]?(H[k].p($,O),R(H[k],1)):(H[k]=nt($),H[k].c(),R(H[k],1),H[k].m(f,null))}for(le(),k=he.length;k<H.length;k+=1)pt(k);ie()}if(O&1&&n.value!==p[0]&&Ne(n,p[0]),(!W||O&4)&&P!==(P=p[2].size+"")&&we(N,P),O&4){me=ee(p[2].entries());let k;for(k=0;k<me.length;k+=1){const $=st(p,me,k);z[k]?(z[k].p($,O),R(z[k],1)):(z[k]=ct($),z[k].c(),R(z[k],1),z[k].m(K,null))}for(le(),k=me.length;k<z.length;k+=1)gt(k);ie()}(!W||O&256&&Y!==(Y=Ie(`users ${p[8]?"showUserlist":""}`)+" svelte-1vmv3y4"))&&u(w,"class",Y)},i(p){if(!W){R(G),R(X);for(let O=0;O<de.length;O+=1)R(q[O]);R(i.$$.fragment,p);for(let O=0;O<he.length;O+=1)R(H[O]);R(S.$$.fragment,p);for(let O=0;O<me.length;O+=1)R(z[O]);W=!0}},o(p){J(G),J(X),q=q.filter(Boolean);for(let O=0;O<q.length;O+=1)J(q[O]);J(i.$$.fragment,p),H=H.filter(Boolean);for(let O=0;O<H.length;O+=1)J(H[O]);J(S.$$.fragment,p),z=z.filter(Boolean);for(let O=0;O<z.length;O+=1)J(z[O]);W=!1},d(p){p&&(g(e),g(t),g(s),g(a),g(r)),G&&G.d(p),X&&X.d(p),Ee(q,p),ue(i,p),Ee(H,p),l[10](null),ue(S),Ee(z,p),se=!1,Ae(C)}}}function Re(l){l.scroll({top:l.scrollHeight,behavior:"smooth"})}function Wt(l,e,t){let s,i,a,r,c,f,h,_,S;V(l,re,y=>t(12,s=y)),V(l,je,y=>t(13,i=y)),V(l,pe,y=>t(4,a=y)),V(l,Le,y=>t(5,r=y)),V(l,ft,y=>t(14,c=y)),V(l,Se,y=>t(15,f=y)),V(l,Te,y=>t(6,h=y)),V(l,Ue,y=>t(7,_=y)),V(l,bt,y=>t(8,S=y));let E="",o=null,n=[],d=[{username:"frensgo :",body:`Bienvenido a la sala ${f.room}`,type:"bot"}];De(()=>{s.send(JSON.stringify({type:"GETUSERLIST"}))}),ut(()=>{s.close(),ae(re,s=null,s)});function m(y,j){switch(y){case"USERLIST":const P=new Map(j);t(2,n=P);break;case"NEW_USER":const N={username:"frensgo :",body:j,type:"bot"};d.push(N),t(3,d);break;case"BYE_USER":const F={username:"frensgo :",body:j,type:"bot"};d.push(F),t(3,d);break;case"ROOM_MSG":if(c.has(j.username))return;if(d.push({...j,type:"room"}),t(3,d),d.length>=100){t(3,d=[]);const W={username:"frensgo :",body:"Limpieza autom치tica activada",type:"bot"};d.push(W),t(3,d)}setTimeout(()=>Re(o),.1);break;case"CALM":ae(Le,r=!0,r);break;case"AUDIO":d.push({...j,type:"audio"}),t(3,d),setTimeout(()=>Re(o),.1);break;case"IMG":d.push({...j,type:"image"}),t(3,d),setTimeout(()=>Re(o),.1);break;case"STICKER":d.push({...j,type:"sticker"}),t(3,d),setTimeout(()=>Re(o),.1);break;case"OPEN_PV":const K={id:j.from,nick:j.nick,me:j.me};a.add(JSON.stringify(K)),pe.set(a),i.set(j.from,[]);break;case"CLOSE_PV":const Y={id:j.from,nick:j.nick,me:j.to};a.delete(JSON.stringify(Y)),pe.set(a),i.delete(j.from);break;case"PV":if(!i.has(j.fromId))return;i.get(j.fromId).push({username:j.fromNick,body:j.body,type:"pv"}),je.set(i)}}ae(re,s.onmessage=y=>{const{type:j,msg:P}=JSON.parse(y.data);m(j,P)},s),ae(re,s.onclose=()=>{kt("/rooms")},s);function b(){!E||E.length===0||E.length>120||(s.send(JSON.stringify({type:"ROOM_MSG",msg:E.trim()})),t(0,E=""))}function T(y){He[y?"unshift":"push"](()=>{o=y,t(1,o)})}function w(){E=this.value,t(0,E)}return[E,o,n,d,a,r,h,_,S,b,T,w]}class ss extends ye{constructor(e){super(),ke(this,e,Wt,Yt,_e,{})}}export{ss as component,ts as universal};
