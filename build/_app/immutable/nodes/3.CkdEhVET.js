import{m as Pe,s as ce,a as Se,b as De,w as Me,c as Oe,d as be,e as _t,f as Ue,p as Et,u as Tt}from"../chunks/store.C0NH_U-A.js";import{r as jt}from"../chunks/index.DXKokB9i.js";import{s as ye,m as St,z as ke,n as Y,c as z,o as He,d as le,e as Q,r as je,A as bt,h as qe}from"../chunks/scheduler.DBTPyL-f.js";import{S as Ie,i as we,e as w,s as D,t as ue,c as A,a as M,f as U,b as de,d as m,n as r,g as R,h as b,p as V,j as Ae,u as oe,m as $,D as ze,E as fe,C as Te,k as H,w as re,l as X,v as ae,o as Be,q as kt,y as he,z as me,A as pe,B as ge}from"../chunks/index.CQsuM-QA.js";import{e as ee,N as Mt}from"../chunks/Navbar.Cv46oPkv.js";import{g as Ot}from"../chunks/entry.BQepC44m.js";const Pt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ct(){let l,e;if(Pe.subscribe(s=>l=s),ce.subscribe(s=>e=s),!l||!e)throw jt(307,"/")}const ks=Object.freeze(Object.defineProperty({__proto__:null,load:Ct},Symbol.toStringTag,{value:"Module"}));class Z extends HTMLElement{constructor(){super(),this.isIframeLoaded=!1,this.setupDom()}static get observedAttributes(){return["videoid","playlistid"]}connectedCallback(){this.addEventListener("pointerover",Z.warmConnections,{once:!0}),this.addEventListener("click",()=>this.addIframe())}get videoId(){return encodeURIComponent(this.getAttribute("videoid")||"")}set videoId(e){this.setAttribute("videoid",e)}get playlistId(){return encodeURIComponent(this.getAttribute("playlistid")||"")}set playlistId(e){this.setAttribute("playlistid",e)}get videoTitle(){return this.getAttribute("videotitle")||"Video"}set videoTitle(e){this.setAttribute("videotitle",e)}get videoPlay(){return this.getAttribute("videoPlay")||"Play"}set videoPlay(e){this.setAttribute("videoPlay",e)}get videoStartAt(){return this.getAttribute("videoStartAt")||"0"}get autoLoad(){return this.hasAttribute("autoload")}get noCookie(){return this.hasAttribute("nocookie")}get posterQuality(){return this.getAttribute("posterquality")||"hqdefault"}get posterLoading(){return this.getAttribute("posterloading")||"lazy"}get params(){return`start=${this.videoStartAt}&${this.getAttribute("params")}`}set params(e){this.setAttribute("params",e)}setupDom(){const e=this.attachShadow({mode:"open"});let s="";window.liteYouTubeNonce&&(s=`nonce="${window.liteYouTubeNonce}"`),e.innerHTML=`
      <style ${s}>
        :host {
          contain: content;
          display: block;
          position: relative;
          width: 100%;
          padding-bottom: calc(100% / (16 / 9));
        }

        @media (max-width: 40em) {
          :host([short]) {
            padding-bottom: calc(100% / (9 / 16));
          }
        }

        #frame, #fallbackPlaceholder, iframe {
          position: absolute;
          width: 100%;
          height: 100%;
          left: 0;
        }

        #frame {
          cursor: pointer;
        }

        #fallbackPlaceholder {
          object-fit: cover;
        }

        #frame::before {
          content: '';
          display: block;
          position: absolute;
          top: 0;
          background-image: linear-gradient(180deg, #111 -20%, transparent 90%);
          height: 60px;
          width: 100%;
          z-index: 1;
        }

        #playButton {
          width: 68px;
          height: 48px;
          background-color: transparent;
          background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/><path d="M45 24 27 14v20" fill="white"/></svg>');
          z-index: 1;
          border: 0;
          border-radius: inherit;
        }

        #playButton:before {
          content: '';
          border-style: solid;
          border-width: 11px 0 11px 19px;
          border-color: transparent transparent transparent #fff;
        }

        #playButton,
        #playButton:before {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate3d(-50%, -50%, 0);
          cursor: inherit;
        }

        /* Post-click styles */
        .activated {
          cursor: unset;
        }

        #frame.activated::before,
        #frame.activated > #playButton {
          display: none;
        }
      </style>
      <div id="frame">
        <picture>
          <source id="webpPlaceholder" type="image/webp">
          <source id="jpegPlaceholder" type="image/jpeg">
          <img id="fallbackPlaceholder" referrerpolicy="origin" loading="lazy">
        </picture>
        <button id="playButton"></button>
      </div>
    `,this.domRefFrame=e.querySelector("#frame"),this.domRefImg={fallback:e.querySelector("#fallbackPlaceholder"),webp:e.querySelector("#webpPlaceholder"),jpeg:e.querySelector("#jpegPlaceholder")},this.domRefPlayButton=e.querySelector("#playButton")}setupComponent(){this.initImagePlaceholder(),this.domRefPlayButton.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),this.setAttribute("title",`${this.videoPlay}: ${this.videoTitle}`),(this.autoLoad||this.isYouTubeShort())&&this.initIntersectionObserver()}attributeChangedCallback(e,s,t){switch(e){case"videoid":case"playlistid":case"videoTitle":case"videoPlay":{s!==t&&(this.setupComponent(),this.domRefFrame.classList.contains("activated")&&(this.domRefFrame.classList.remove("activated"),this.shadowRoot.querySelector("iframe").remove(),this.isIframeLoaded=!1));break}}}addIframe(e=!1){if(!this.isIframeLoaded){let s=e?0:1;const t=this.noCookie?"-nocookie":"";let i;this.playlistId?i=`?listType=playlist&list=${this.playlistId}&`:i=`${this.videoId}?`,this.isYouTubeShort()&&(this.params=`loop=1&mute=1&modestbranding=1&playsinline=1&rel=0&enablejsapi=1&playlist=${this.videoId}`,s=1);const n=`
<iframe frameborder="0" title="${this.videoTitle}"
  allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen
  src="https://www.youtube${t}.com/embed/${i}autoplay=${s}&${this.params}"
></iframe>`;this.domRefFrame.insertAdjacentHTML("beforeend",n),this.domRefFrame.classList.add("activated"),this.isIframeLoaded=!0,this.attemptShortAutoPlay(),this.dispatchEvent(new CustomEvent("liteYoutubeIframeLoaded",{detail:{videoId:this.videoId},bubbles:!0,cancelable:!0}))}}initImagePlaceholder(){var t,i;const e=`https://i.ytimg.com/vi_webp/${this.videoId}/${this.posterQuality}.webp`,s=`https://i.ytimg.com/vi/${this.videoId}/${this.posterQuality}.jpg`;this.domRefImg.fallback.loading=this.posterLoading,this.domRefImg.webp.srcset=e,this.domRefImg.jpeg.srcset=s,this.domRefImg.fallback.src=s,this.domRefImg.fallback.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),(i=(t=this.domRefImg)==null?void 0:t.fallback)==null||i.setAttribute("alt",`${this.videoPlay}: ${this.videoTitle}`)}initIntersectionObserver(){const e={root:null,rootMargin:"0px",threshold:0};new IntersectionObserver((t,i)=>{t.forEach(n=>{n.isIntersecting&&!this.isIframeLoaded&&(Z.warmConnections(),this.addIframe(!0),i.unobserve(this))})},e).observe(this)}attemptShortAutoPlay(){this.isYouTubeShort()&&setTimeout(()=>{var e,s;(s=(e=this.shadowRoot.querySelector("iframe"))==null?void 0:e.contentWindow)==null||s.postMessage('{"event":"command","func":"playVideo","args":""}',"*")},2e3)}isYouTubeShort(){return this.getAttribute("short")===""&&window.matchMedia("(max-width: 40em)").matches}static addPrefetch(e,s){const t=document.createElement("link");t.rel=e,t.href=s,t.crossOrigin="true",document.head.append(t)}static warmConnections(){Z.isPreconnected||window.liteYouTubeIsPreconnected||(Z.addPrefetch("preconnect","https://i.ytimg.com/"),Z.addPrefetch("preconnect","https://s.ytimg.com"),Z.addPrefetch("preconnect","https://www.youtube.com"),Z.addPrefetch("preconnect","https://www.google.com"),Z.addPrefetch("preconnect","https://googleads.g.doubleclick.net"),Z.addPrefetch("preconnect","https://static.doubleclick.net"),Z.isPreconnected=!0,window.liteYouTubeIsPreconnected=!0)}}Z.isPreconnected=!1;customElements.define("lite-youtube",Z);function We(l){let e;function s(n,o){return n[0].avatar?Nt:Rt}let t=s(l),i=t(l);return{c(){i.c(),e=oe()},l(n){i.l(n),e=oe()},m(n,o){i.m(n,o),R(n,e,o)},p(n,o){t===(t=s(n))&&i?i.p(n,o):(i.d(1),i=t(n),i&&(i.c(),i.m(e.parentNode,e)))},d(n){n&&m(e),i.d(n)}}}function Rt(l){let e;return{c(){e=w("i"),this.h()},l(s){e=A(s,"I",{class:!0}),M(e).forEach(m),this.h()},h(){r(e,"class","fa-solid fa-circle-user svelte-qfczk2")},m(s,t){R(s,e,t)},p:Y,d(s){s&&m(e)}}}function Nt(l){let e;function s(n,o){return n[0].avatar.length>0?Dt:Lt}let t=s(l),i=t(l);return{c(){i.c(),e=oe()},l(n){i.l(n),e=oe()},m(n,o){i.m(n,o),R(n,e,o)},p(n,o){t===(t=s(n))&&i?i.p(n,o):(i.d(1),i=t(n),i&&(i.c(),i.m(e.parentNode,e)))},d(n){n&&m(e),i.d(n)}}}function Lt(l){let e;return{c(){e=w("i"),this.h()},l(s){e=A(s,"I",{class:!0}),M(e).forEach(m),this.h()},h(){r(e,"class","fa-solid fa-circle-user svelte-qfczk2")},m(s,t){R(s,e,t)},p:Y,d(s){s&&m(e)}}}function Dt(l){let e,s;return{c(){e=w("img"),this.h()},l(t){e=A(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Q(e.src,s=l[0].avatar)||r(e,"src",s),r(e,"alt","avatar of user"),r(e,"class","svelte-qfczk2")},m(t,i){R(t,e,i)},p(t,i){i&1&&!Q(e.src,s=t[0].avatar)&&r(e,"src",s)},d(t){t&&m(e)}}}function Ge(l){let e,s="(susurro):";return{c(){e=w("p"),e.textContent=s,this.h()},l(t){e=A(t,"P",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-70n75o"&&(e.textContent=s),this.h()},h(){r(e,"class","montserrat-alternates-bold svelte-qfczk2")},m(t,i){R(t,e,i)},d(t){t&&m(e)}}}function Ut(l){let e;return{c(){e=w("lite-youtube"),this.h()},l(s){e=A(s,"LITE-YOUTUBE",{class:!0,videoid:!0}),M(e).forEach(m),this.h()},h(){ze(e,"class","ytFrame svelte-qfczk2"),ze(e,"videoid",l[1])},m(s,t){R(s,e,t)},p(s,t){t&2&&ze(e,"videoid",s[1])},d(s){s&&m(e)}}}function Bt(l){let e,s,t,i,n;return{c(){e=w("img"),this.h()},l(o){e=A(o,"IMG",{src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){Q(e.src,s=l[0].body)||r(e,"src",s),r(e,"alt","Imagen subida Por un usuario"),r(e,"style",t=`cursor:pointer;${l[0].type===l[3].STICKER?"width:150px;":""}`),r(e,"class","svelte-qfczk2")},m(o,a){R(o,e,a),i||(n=V(e,"click",l[9]),i=!0)},p(o,a){a&1&&!Q(e.src,s=o[0].body)&&r(e,"src",s),a&1&&t!==(t=`cursor:pointer;${o[0].type===o[3].STICKER?"width:150px;":""}`)&&r(e,"style",t)},d(o){o&&m(e),i=!1,n()}}}function Ht(l){let e,s;return{c(){e=w("audio"),this.h()},l(t){e=A(t,"AUDIO",{src:!0}),M(e).forEach(m),this.h()},h(){Q(e.src,s=l[0].body)||r(e,"src",s),e.controls=!0},m(t,i){R(t,e,i)},p(t,i){i&1&&!Q(e.src,s=t[0].body)&&r(e,"src",s)},d(t){t&&m(e)}}}function Vt(l){let e,s=l[0].body+"",t;return{c(){e=w("p"),t=ue(s),this.h()},l(i){e=A(i,"P",{class:!0});var n=M(e);t=de(n,s),n.forEach(m),this.h()},h(){r(e,"class","montserrat-alternates-regular svelte-qfczk2")},m(i,n){R(i,e,n),b(e,t)},p(i,n){n&1&&s!==(s=i[0].body+"")&&Ae(t,s)},d(i){i&&m(e)}}}function zt(l){let e,s,t,i,n=decodeURI(l[0].username)+"",o,a,d,g,_,T,O,k;St(l[8]);let f=l[0].type!==l[3].BOT&&We(l),u=l[0].type===l[3].WHISPER&&Ge();function h(I,C){if(I[0].type===I[3].ROOM||I[0].type===I[3].BOT||I[0].type===I[3].PV||I[0].type===I[3].WHISPER)return Vt;if(I[0].type===I[3].AUDIO)return Ht;if(I[0].type===I[3].IMAGE||I[0].type===I[3].STICKER)return Bt;if(I[0].type===I[3].YT)return Ut}let p=h(l),E=p&&p(l);return{c(){e=w("article"),s=w("div"),f&&f.c(),t=D(),i=w("h4"),o=ue(n),a=D(),u&&u.c(),d=D(),g=w("div"),_=w("div"),E&&E.c(),this.h()},l(I){e=A(I,"ARTICLE",{class:!0,style:!0});var C=M(e);s=A(C,"DIV",{class:!0});var N=M(s);f&&f.l(N),t=U(N),i=A(N,"H4",{class:!0});var v=M(i);o=de(v,n),v.forEach(m),a=U(N),u&&u.l(N),N.forEach(m),d=U(C),g=A(C,"DIV",{class:!0});var c=M(g);_=A(c,"DIV",{class:!0});var L=M(_);E&&E.l(L),L.forEach(m),c.forEach(m),C.forEach(m),this.h()},h(){r(i,"class","montserrat-alternates-bold svelte-qfczk2"),r(s,"class","username svelte-qfczk2"),r(_,"class",ke(`body ${l[7]()}`)+" svelte-qfczk2"),r(g,"class","bodyBX"),r(e,"class",ke(`${l[4]?"me":""}`)+" svelte-qfczk2"),r(e,"style",T=l[6](l[2]))},m(I,C){R(I,e,C),b(e,s),f&&f.m(s,null),b(s,t),b(s,i),b(i,o),b(s,a),u&&u.m(s,null),b(e,d),b(e,g),b(g,_),E&&E.m(_,null),O||(k=V(window,"resize",l[8]),O=!0)},p(I,[C]){I[0].type!==I[3].BOT?f?f.p(I,C):(f=We(I),f.c(),f.m(s,t)):f&&(f.d(1),f=null),C&1&&n!==(n=decodeURI(I[0].username)+"")&&Ae(o,n),I[0].type===I[3].WHISPER?u||(u=Ge(),u.c(),u.m(s,null)):u&&(u.d(1),u=null),p===(p=h(I))&&E?E.p(I,C):(E&&E.d(1),E=p&&p(I),E&&(E.c(),E.m(_,null))),C&4&&T!==(T=I[6](I[2]))&&r(e,"style",T)},i:Y,o:Y,d(I){I&&m(e),f&&f.d(),u&&u.d(),E&&E.d(),O=!1,k()}}}function qt(l,e,s){let t,i,n;z(l,Se,h=>s(10,t=h)),z(l,De,h=>s(11,i=h)),z(l,Pe,h=>s(12,n=h));var o=(h=>(h.ROOM="room",h.BOT="bot",h.AUDIO="audio",h.IMAGE="image",h.YT="yt",h.STICKER="sticker",h.PV="pv",h.WHISPER="whisper",h))(o||{});let{data:a}=e,d=null;He(()=>{if(/^https:\/\/(www\.)?youtu.+\//.test(a.body)){const h=a.body.match(/(\.be\/|v=).{11}/);s(1,d=h[0].replace(h[1],"")),s(0,a.type="yt",a)}});const g=n.username===decodeURI(a.username);let _;function T(h){le(De,i=h.src,i),le(Se,t=!0,t)}function O(h){if(a.type==="bot")return"";let p="";return _<500&&(p+="flex-direction:column;gap:0.4rem !important;",g?p+="align-items:end;":p+="align-items:start;"),p}function k(){switch(a.type){case"bot":return"typeBot";case"audio":return"typeAudio";case"image":return"typeImg";case"sticker":return"typeBot";case"pv":return"typePv";default:return""}}function f(){s(2,_=window.outerWidth)}const u=h=>T(h.target);return l.$$set=h=>{"data"in h&&s(0,a=h.data)},[a,d,_,o,g,T,O,k,f,u]}class yt extends Ie{constructor(e){super(),we(this,e,qt,zt,ye,{data:0})}}function Jt(l){let e;return{c(){e=w("i"),this.h()},l(s){e=A(s,"I",{class:!0}),M(e).forEach(m),this.h()},h(){r(e,"class","fa-solid fa-circle-user svelte-16fo0sk")},m(s,t){R(s,e,t)},p:Y,d(s){s&&m(e)}}}function Wt(l){let e,s;return{c(){e=w("img"),this.h()},l(t){e=A(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Q(e.src,s=l[1].avatar)||r(e,"src",s),r(e,"alt","my avatar"),r(e,"class","svelte-16fo0sk")},m(t,i){R(t,e,i)},p(t,i){i&2&&!Q(e.src,s=t[1].avatar)&&r(e,"src",s)},d(t){t&&m(e)}}}function Ke(l){let e,s,t,i='<p class="montserrat-alternates-bold">privado</p> <i class="fa-solid fa-message"></i>',n,o,a='<p class="montserrat-alternates-bold">susurrar</p> <i class="fa-solid fa-ear-listen"></i>',d,g,_,T='<p class="montserrat-alternates-bold">cancelar</p> <i class="fas fa-times"></i>',O,k;function f(E,I){return E[3]?Kt:Gt}let u=f(l),h=u(l),p=(l[4].role===l[5].OWNER||l[4].role===l[5].ADMIN||l[4].role===l[5].MODERATOR)&&Fe(l);return{c(){e=w("ul"),h.c(),s=D(),t=w("li"),t.innerHTML=i,n=D(),o=w("li"),o.innerHTML=a,d=D(),p&&p.c(),g=D(),_=w("li"),_.innerHTML=T,this.h()},l(E){e=A(E,"UL",{class:!0});var I=M(e);h.l(I),s=U(I),t=A(I,"LI",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-1d3k0wi"&&(t.innerHTML=i),n=U(I),o=A(I,"LI",{class:!0,"data-svelte-h":!0}),$(o)!=="svelte-1dlnrba"&&(o.innerHTML=a),d=U(I),p&&p.l(I),g=U(I),_=A(I,"LI",{class:!0,"data-svelte-h":!0}),$(_)!=="svelte-kcc5f0"&&(_.innerHTML=T),I.forEach(m),this.h()},h(){r(t,"class","svelte-16fo0sk"),r(o,"class","svelte-16fo0sk"),r(_,"class","svelte-16fo0sk"),r(e,"class","opts svelte-16fo0sk")},m(E,I){R(E,e,I),h.m(e,null),b(e,s),b(e,t),b(e,n),b(e,o),b(e,d),p&&p.m(e,null),b(e,g),b(e,_),O||(k=[V(t,"click",l[10]),V(o,"click",l[11]),V(_,"click",l[6])],O=!0)},p(E,I){u===(u=f(E))&&h?h.p(E,I):(h.d(1),h=u(E),h&&(h.c(),h.m(e,s))),E[4].role===E[5].OWNER||E[4].role===E[5].ADMIN||E[4].role===E[5].MODERATOR?p?p.p(E,I):(p=Fe(E),p.c(),p.m(e,g)):p&&(p.d(1),p=null)},d(E){E&&m(e),h.d(),p&&p.d(),O=!1,je(k)}}}function Gt(l){let e,s='<p class="montserrat-alternates-bold">silenciar</p> <i class="fas fa-volume-mute"></i>',t,i;return{c(){e=w("li"),e.innerHTML=s,this.h()},l(n){e=A(n,"LI",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-nq1i3d"&&(e.innerHTML=s),this.h()},h(){r(e,"class","silence svelte-16fo0sk")},m(n,o){R(n,e,o),t||(i=V(e,"click",l[14]),t=!0)},p:Y,d(n){n&&m(e),t=!1,i()}}}function Kt(l){let e,s='<p class="montserrat-alternates-bold">quitar silencio</p> <i class="fas fa-volume-up"></i>',t,i;return{c(){e=w("li"),e.innerHTML=s,this.h()},l(n){e=A(n,"LI",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1kkyzxq"&&(e.innerHTML=s),this.h()},h(){r(e,"class","silence svelte-16fo0sk")},m(n,o){R(n,e,o),t||(i=V(e,"click",l[13]),t=!0)},p:Y,d(n){n&&m(e),t=!1,i()}}}function Fe(l){let e,s='<p class="montserrat-alternates-bold">Banear</p> <i class="fa-solid fa-ban"></i>',t,i;return{c(){e=w("li"),e.innerHTML=s,this.h()},l(n){e=A(n,"LI",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-wbjlsh"&&(e.innerHTML=s),this.h()},h(){r(e,"class","svelte-16fo0sk")},m(n,o){R(n,e,o),t||(i=V(e,"click",l[12]),t=!0)},p:Y,d(n){n&&m(e),t=!1,i()}}}function Ft(l){let e,s,t,i=decodeURI(l[1].username)+"",n,o,a,d,g,_,T;function O(h,p){return h[1].avatar.length>0?Wt:Jt}let k=O(l),f=k(l),u=l[2]&&Ke(l);return{c(){e=w("article"),f.c(),s=D(),t=w("h4"),n=ue(i),o=D(),a=w("i"),d=D(),u&&u.c(),g=oe(),this.h()},l(h){e=A(h,"ARTICLE",{"data-id":!0,class:!0});var p=M(e);f.l(p),s=U(p),t=A(p,"H4",{class:!0});var E=M(t);n=de(E,i),E.forEach(m),o=U(p),a=A(p,"I",{class:!0}),M(a).forEach(m),p.forEach(m),d=U(h),u&&u.l(h),g=oe(),this.h()},h(){r(t,"class","montserrat-alternates-bold svelte-16fo0sk"),r(a,"class",ke(l[7]())+" svelte-16fo0sk"),r(e,"data-id",l[0]),r(e,"class","svelte-16fo0sk"),fe(e,"muted",l[3])},m(h,p){R(h,e,p),f.m(e,null),b(e,s),b(e,t),b(t,n),b(e,o),b(e,a),R(h,d,p),u&&u.m(h,p),R(h,g,p),_||(T=V(e,"click",l[6]),_=!0)},p(h,[p]){k===(k=O(h))&&f?f.p(h,p):(f.d(1),f=k(h),f&&(f.c(),f.m(e,s))),p&2&&i!==(i=decodeURI(h[1].username)+"")&&Ae(n,i),p&1&&r(e,"data-id",h[0]),p&8&&fe(e,"muted",h[3]),h[2]?u?u.p(h,p):(u=Ke(h),u.c(),u.m(g.parentNode,g)):u&&(u.d(1),u=null)},i:Y,o:Y,d(h){h&&(m(e),m(d),m(g)),f.d(),u&&u.d(h),_=!1,T()}}}function Xt(l,e,s){let t,i,n,o,a,d;z(l,ce,c=>s(15,t=c)),z(l,Me,c=>s(16,i=c)),z(l,Oe,c=>s(17,n=c)),z(l,be,c=>s(18,o=c)),z(l,Pe,c=>s(4,a=c)),z(l,_t,c=>s(19,d=c));var g=(c=>(c.GUEST="guest",c.USER="user",c.MODERATOR="moderator",c.ADMIN="administrator",c.OWNER="owner",c))(g||{});let{id:_}=e,{data:T}=e,O=!1;function k(){a.username!==T.username&&s(2,O=!O)}function f(){switch(T.role){case"guest":return"fa-solid fa-circle-question";case"user":return"fa-solid fa-user";case"moderator":return"fa-solid fa-shield";case"administrator":return"fa-solid fa-wrench";case"owner":return"fa-solid fa-crown"}}let u=!1;d.has(T.username)&&(u=!0);function h(c){a.username!==c&&(d.add(c),s(3,u=!0),s(2,O=!1))}function p(c){a.username===c||!d.delete(c)||(s(3,u=!1),s(2,O=!1))}function E(){t.send(JSON.stringify({type:"OPEN_PV",msg:{to:_}}));const c={id:_,nick:T.username,me:a.id,avatar:T.avatar};o.add(JSON.stringify(c)),be.set(o),n.set(_,[]),s(2,O=!1)}function I(){le(Me,i={username:T.username,id:_},i),s(2,O=!1)}function C(){t.send(JSON.stringify({type:"BAN",msg:{username:T.username,id:_}})),s(2,O=!1)}const N=()=>p(T.username),v=()=>h(T.username);return l.$$set=c=>{"id"in c&&s(0,_=c.id),"data"in c&&s(1,T=c.data)},[_,T,O,u,a,g,k,f,h,p,E,I,C,N,v]}class Yt extends Ie{constructor(e){super(),we(this,e,Xt,Ft,ye,{id:0,data:1})}}function Qt(l){let e,s,t,i;return{c(){e=w("section"),s=w("article"),t=w("h4"),i=ue(l[0]),this.h()},l(n){e=A(n,"SECTION",{class:!0});var o=M(e);s=A(o,"ARTICLE",{class:!0});var a=M(s);t=A(a,"H4",{class:!0});var d=M(t);i=de(d,l[0]),d.forEach(m),a.forEach(m),o.forEach(m),this.h()},h(){r(t,"class","montserrat-alternates-medium svelte-1wtc119"),r(s,"class","svelte-1wtc119"),r(e,"class","svelte-1wtc119")},m(n,o){R(n,e,o),b(e,s),b(s,t),b(t,i)},p(n,[o]){o&1&&Ae(i,n[0])},i:Y,o:Y,d(n){n&&m(e)}}}function Zt(l,e,s){let t;z(l,Ue,o=>s(2,t=o));let{msg:i}=e,{time:n}=e;return He(()=>{document.onkeydown=()=>!1}),bt(()=>{document.onkeydown=null}),setTimeout(()=>le(Ue,t=!1,t),n),l.$$set=o=>{"msg"in o&&s(0,i=o.msg),"time"in o&&s(1,n=o.time)},[i,n]}class $t extends Ie{constructor(e){super(),we(this,e,Zt,Qt,ye,{msg:0,time:1})}}const Xe=["https://i.pinimg.com/564x/26/01/7e/26017ea921bf3f92ee09017d7a008c4c.jpg","https://i.pinimg.com/564x/b2/a5/22/b2a522fa576b9e883e8040d9f4971d57.jpg","https://i.pinimg.com/564x/e1/68/df/e168df965c1300c16a78fa6479f0f84b.jpg","https://i.pinimg.com/236x/3b/c1/90/3bc190d0fe1e5ab694eb48bb679617d6.jpg","https://i.pinimg.com/236x/0e/c5/26/0ec526b2677e3f4b59575b39e0c80c1a.jpg","https://i.pinimg.com/236x/f4/b6/ed/f4b6ed6ed97a5d568d18d9466b517e4d.jpg","https://i.pinimg.com/236x/c5/cb/6f/c5cb6fb8e5e9c0121c35bb63703553ff.jpg","https://i.pinimg.com/236x/3b/6a/f0/3b6af08fc3770a8323787a98b2295046.jpg","https://i.pinimg.com/236x/8e/a8/4a/8ea84ae43f94280f0f88b7a6bb640ca5.jpg","https://i.pinimg.com/236x/58/f6/a9/58f6a9167e1374a4ae98f560fb6bef08.jpg","https://i.pinimg.com/236x/6e/74/df/6e74df3fb594f746693d43aef71e7c20.jpg","https://i.pinimg.com/236x/81/04/79/8104795db0b5220f331b51b089aa1edb.jpg","https://i.pinimg.com/236x/4e/3c/47/4e3c47cb9ad9d86968ea5b1a8eee761f.jpg","https://i.pinimg.com/236x/f0/96/05/f09605c6a782601c5a516dc513fec8ab.jpg","https://i.pinimg.com/236x/ab/e5/28/abe528cc836c08c02ed39b4264bbfa2a.jpg","https://i.pinimg.com/236x/ae/e2/a0/aee2a0b025b7e676d491c58e64c0c0e0.jpg","https://i.pinimg.com/236x/ab/0f/f7/ab0ff72902f0ed5be507bb542f14e04c.jpg","https://i.pinimg.com/236x/5e/50/d3/5e50d303bff603bac964e9e1d70cc263.jpg","https://i.pinimg.com/236x/9e/1f/03/9e1f03aa60d4e8919484de08c4741c7d.jpg","https://i.pinimg.com/236x/4b/8c/f1/4b8cf19584ede706ad857b998cc39332.jpg","https://i.pinimg.com/236x/df/59/34/df5934ad681ad29edc0bc2a88ab538dc.jpg","https://i.pinimg.com/236x/b9/d2/4a/b9d24af77da570a5d304950974f5269e.jpg","https://media.tenor.com/Eet92-jhr3MAAAAj/hasher-happy-sticker.gif","https://media.tenor.com/rOZE9d6XIWIAAAAi/line.gif","https://media.tenor.com/eM0K9-K-hcUAAAAi/crying.gif","https://media.tenor.com/7VE1yyfi5CIAAAAi/fighting-addoil.gif","https://media.tenor.com/rXbN_gwjc7AAAAAi/alice-sticker-alice-animated.gif","https://media.tenor.com/5Ada5-x6Vz8AAAAj/cute.gif","https://media.tenor.com/OY6bIk0asR4AAAAj/quby.gif","https://media.tenor.com/pB8dRaVDsBwAAAAj/tkthao219-quby.gif","https://media.tenor.com/J2bPcmfvfaUAAAAj/tkthao219-quby.gif","https://media.tenor.com/JtV9gaxyavAAAAAj/peach-cat.gif","https://media.tenor.com/GTjXEnuTUUMAAAAj/loved-love.gif","https://media.tenor.com/7r6lLYznnTsAAAAj/sticker-cartoon.gif","https://media.tenor.com/Ck3Q6OuFmzQAAAAj/animated-stickers-good-morning.gif","https://media.tenor.com/nQUJSVnPH8sAAAAj/tkthao219-quby.gif","https://media.tenor.com/senzjQZHOZwAAAAj/hasher-sticker.gif","https://media.tenor.com/b87Ur_ijFF0AAAAj/char.gif","https://media.tenor.com/xPDDnUtYMS0AAAAj/line-sticker-thank-you-sticker.gif","https://media.tenor.com/ua3mX1agSvoAAAAj/hasher-sticker.gif","https://media.tenor.com/83rrChRnhVwAAAAj/tkthao219-quby.gif"],Ye=["https://cdn-icons-gif.flaticon.com/11175/11175766.gif","https://cdn-icons-gif.flaticon.com/11175/11175756.gif","https://cdn-icons-gif.flaticon.com/11175/11175791.gif","https://cdn-icons-gif.flaticon.com/11175/11175758.gif","https://cdn-icons-gif.flaticon.com/11175/11175773.gif","https://cdn-icons-gif.flaticon.com/11175/11175734.gif","https://cdn-icons-gif.flaticon.com/14662/14662094.gif","https://cdn-icons-gif.flaticon.com/11175/11175789.gif","https://cdn-icons-gif.flaticon.com/11175/11175746.gif","https://cdn-icons-gif.flaticon.com/11175/11175743.gif","https://cdn-icons-gif.flaticon.com/11186/11186841.gif","https://cdn-icons-gif.flaticon.com/12761/12761197.gif","https://cdn-icons-gif.flaticon.com/11175/11175772.gif","https://cdn-icons-gif.flaticon.com/11175/11175744.gif","https://cdn-icons-gif.flaticon.com/15600/15600673.gif","https://cdn-icons-gif.flaticon.com/11175/11175739.gif","https://cdn-icons-gif.flaticon.com/11175/11175774.gif","https://cdn-icons-gif.flaticon.com/11175/11175774.gif","https://cdn-icons-gif.flaticon.com/11175/11175795.gif","https://cdn-icons-gif.flaticon.com/11175/11175729.gif","https://cdn-icons-gif.flaticon.com/11175/11175745.gif","https://cdn-icons-gif.flaticon.com/11175/11175775.gif","https://cdn-icons-gif.flaticon.com/11175/11175768.gif","https://cdn-icons-gif.flaticon.com/7158/7158913.gif","https://cdn-icons-gif.flaticon.com/7158/7158942.gif","https://cdn-icons-gif.flaticon.com/11175/11175748.gif","https://cdn-icons-gif.flaticon.com/7158/7158899.gif","https://cdn-icons-gif.flaticon.com/11175/11175770.gif","https://cdn-icons-gif.flaticon.com/7159/7159012.gif","https://cdn-icons-gif.flaticon.com/11175/11175737.gif","https://cdn-icons-gif.flaticon.com/15747/15747195.gif","https://cdn-icons-gif.flaticon.com/11175/11175760.gif","https://cdn-icons-gif.flaticon.com/15541/15541996.gif","https://cdn-icons-gif.flaticon.com/7158/7158926.gif","https://cdn-icons-gif.flaticon.com/8121/8121321.gif","https://cdn-icons-gif.flaticon.com/11175/11175754.gif","https://cdn-icons-gif.flaticon.com/11175/11175793.gif","https://cdn-icons-gif.flaticon.com/11175/11175741.gif","https://cdn-icons-gif.flaticon.com/11175/11175749.gif","https://cdn-icons-gif.flaticon.com/11175/11175761.gif","https://cdn-icons-gif.flaticon.com/11175/11175776.gif","https://cdn-icons-gif.flaticon.com/11175/11175763.gif","https://cdn-icons-gif.flaticon.com/11175/11175747.gif","https://cdn-icons-gif.flaticon.com/12761/12761156.gif","https://cdn-icons-gif.flaticon.com/11175/11175757.gif","https://cdn-icons-gif.flaticon.com/11633/11633770.gif","https://cdn-icons-gif.flaticon.com/7158/7158896.gif","https://cdn-icons-gif.flaticon.com/11260/11260696.gif","https://cdn-icons-gif.flaticon.com/11255/11255987.gif","https://cdn-icons-gif.flaticon.com/7158/7158986.gif","https://cdn-icons-gif.flaticon.com/11175/11175786.gif","https://cdn-icons-gif.flaticon.com/11175/11175753.gif","https://cdn-icons-gif.flaticon.com/11175/11175750.gif","https://cdn-icons-gif.flaticon.com/11175/11175762.gif","https://cdn-icons-gif.flaticon.com/11175/11175731.gif","https://cdn-icons-gif.flaticon.com/11175/11175765.gif","https://cdn-icons-gif.flaticon.com/11175/11175771.gif","https://cdn-icons-gif.flaticon.com/11175/11175798.gif","https://cdn-icons-gif.flaticon.com/7158/7158960.gif","https://cdn-icons-gif.flaticon.com/7158/7158864.gif","https://cdn-icons-gif.flaticon.com/7159/7159000.gif","https://cdn-icons-gif.flaticon.com/11175/11175782.gif","https://cdn-icons-gif.flaticon.com/7159/7159004.gif","https://cdn-icons-gif.flaticon.com/11175/11175752.gif","https://cdn-icons-gif.flaticon.com/7158/7158953.gif","https://cdn-icons-gif.flaticon.com/11175/11175780.gif","https://cdn-icons-gif.flaticon.com/14240/14240874.gif","https://cdn-icons-gif.flaticon.com/7158/7158911.gif","https://cdn-icons-gif.flaticon.com/7159/7159011.gif","https://cdn-icons-gif.flaticon.com/7158/7158902.gif","https://cdn-icons-gif.flaticon.com/7158/7158906.gif","https://cdn-icons-gif.flaticon.com/11175/11175767.gif","https://cdn-icons-gif.flaticon.com/11175/11175784.gif","https://cdn-icons-gif.flaticon.com/12817/12817619.gif","https://cdn-icons-gif.flaticon.com/15579/15579038.gif","https://cdn-icons-gif.flaticon.com/15600/15600699.gif","https://cdn-icons-gif.flaticon.com/11255/11255986.gif","https://cdn-icons-gif.flaticon.com/14662/14662091.gif","https://cdn-icons-gif.flaticon.com/14676/14676105.gif","https://cdn-icons-gif.flaticon.com/14676/14676110.gif","https://cdn-icons-gif.flaticon.com/15578/15578976.gif","https://cdn-icons-gif.flaticon.com/16678/16678032.gif","https://cdn-icons-gif.flaticon.com/7158/7158990.gif"];function Qe(l,e,s){const t=l.slice();return t[19]=e[s],t}function Ze(l,e,s){const t=l.slice();return t[22]=e[s],t}function $e(l){let e,s,t=l[3].username+"",i,n,o,a,d;return{c(){e=w("div"),s=w("p"),i=ue(t),n=D(),o=w("i"),this.h()},l(g){e=A(g,"DIV",{class:!0});var _=M(e);s=A(_,"P",{class:!0});var T=M(s);i=de(T,t),T.forEach(m),n=U(_),o=A(_,"I",{class:!0}),M(o).forEach(m),_.forEach(m),this.h()},h(){r(s,"class","montserrat-alternates-bold"),r(o,"class","fas fa-times svelte-vr008j"),r(e,"class","whispTarget svelte-vr008j")},m(g,_){R(g,e,_),b(e,s),b(s,i),b(e,n),b(e,o),a||(d=V(o,"click",l[9]),a=!0)},p(g,_){_&8&&t!==(t=g[3].username+"")&&Ae(i,t)},d(g){g&&m(e),a=!1,d()}}}function xe(l){let e,s,t,i="Emojis",n,o,a="stickers",d,g,_,T,O,k=l[1]===l[4].EMOJI&&et(l),f=l[1]===l[4].STICKER&&st(l);return{c(){e=w("div"),s=w("div"),t=w("h5"),t.textContent=i,n=D(),o=w("h5"),o.textContent=a,d=D(),g=w("div"),k&&k.c(),_=D(),f&&f.c(),this.h()},l(u){e=A(u,"DIV",{class:!0});var h=M(e);s=A(h,"DIV",{class:!0});var p=M(s);t=A(p,"H5",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-la7pmz"&&(t.textContent=i),n=U(p),o=A(p,"H5",{class:!0,"data-svelte-h":!0}),$(o)!=="svelte-15vafyv"&&(o.textContent=a),p.forEach(m),d=U(h),g=A(h,"DIV",{class:!0});var E=M(g);k&&k.l(E),_=U(E),f&&f.l(E),E.forEach(m),h.forEach(m),this.h()},h(){r(t,"class","activeTab montserrat-alternates-bold svelte-vr008j"),fe(t,"activeTab",l[1]===l[4].EMOJI),r(o,"class","montserrat-alternates-bold svelte-vr008j"),fe(o,"activeTab",l[1]===l[4].STICKER),r(s,"class","tab svelte-vr008j"),r(g,"class","mojis svelte-vr008j"),r(e,"class","emojisBX svelte-vr008j")},m(u,h){R(u,e,h),b(e,s),b(s,t),b(s,n),b(s,o),b(e,d),b(e,g),k&&k.m(g,null),b(g,_),f&&f.m(g,null),T||(O=[V(t,"click",l[11]),V(o,"click",l[12])],T=!0)},p(u,h){h&18&&fe(t,"activeTab",u[1]===u[4].EMOJI),h&18&&fe(o,"activeTab",u[1]===u[4].STICKER),u[1]===u[4].EMOJI?k?k.p(u,h):(k=et(u),k.c(),k.m(g,_)):k&&(k.d(1),k=null),u[1]===u[4].STICKER?f?f.p(u,h):(f=st(u),f.c(),f.m(g,null)):f&&(f.d(1),f=null)},d(u){u&&m(e),k&&k.d(),f&&f.d(),T=!1,je(O)}}}function et(l){let e,s=ee(Ye),t=[];for(let i=0;i<s.length;i+=1)t[i]=tt(Ze(l,s,i));return{c(){e=w("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=A(i,"DIV",{class:!0});var n=M(e);for(let o=0;o<t.length;o+=1)t[o].l(n);n.forEach(m),this.h()},h(){r(e,"class","caritasBX svelte-vr008j")},m(i,n){R(i,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(i,n){if(n&64){s=ee(Ye);let o;for(o=0;o<s.length;o+=1){const a=Ze(i,s,o);t[o]?t[o].p(a,n):(t[o]=tt(a),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=s.length}},d(i){i&&m(e),Te(t,i)}}}function tt(l){let e,s,t,i;function n(){return l[13](l[22])}return{c(){e=w("img"),this.h()},l(o){e=A(o,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Q(e.src,s=l[22])||r(e,"src",s),r(e,"alt","sticker"),r(e,"class","svelte-vr008j")},m(o,a){R(o,e,a),t||(i=V(e,"click",n),t=!0)},p(o,a){l=o},d(o){o&&m(e),t=!1,i()}}}function st(l){let e,s=ee(Xe),t=[];for(let i=0;i<s.length;i+=1)t[i]=it(Qe(l,s,i));return{c(){e=w("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=A(i,"DIV",{class:!0});var n=M(e);for(let o=0;o<t.length;o+=1)t[o].l(n);n.forEach(m),this.h()},h(){r(e,"class","stickersBX svelte-vr008j")},m(i,n){R(i,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(i,n){if(n&64){s=ee(Xe);let o;for(o=0;o<s.length;o+=1){const a=Qe(i,s,o);t[o]?t[o].p(a,n):(t[o]=it(a),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=s.length}},d(i){i&&m(e),Te(t,i)}}}function it(l){let e,s,t,i;function n(){return l[14](l[19])}return{c(){e=w("img"),this.h()},l(o){e=A(o,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Q(e.src,s=l[19])||r(e,"src",s),r(e,"alt","sticker"),r(e,"class","svelte-vr008j")},m(o,a){R(o,e,a),t||(i=V(e,"click",n),t=!0)},p(o,a){l=o},d(o){o&&m(e),t=!1,i()}}}function xt(l){let e,s,t,i='<button class="montserrat-alternates-bold svelte-vr008j" style="font-size:1.3rem;">T</button>',n,o,a,d,g,_='<i class="fa-solid fa-image svelte-vr008j"></i>',T,O,k,f,u,h,p,E,I,C,N,v,c=l[3]&&$e(l),L=l[0]&&xe(l);return{c(){e=w("div"),s=w("div"),t=w("div"),t.innerHTML=i,n=D(),o=w("div"),a=w("input"),d=D(),g=w("label"),g.innerHTML=_,T=D(),O=w("div"),k=w("button"),f=w("i"),h=D(),c&&c.c(),p=D(),E=w("div"),I=w("i"),C=D(),L&&L.c(),this.h()},l(B){e=A(B,"DIV",{class:!0});var W=M(e);s=A(W,"DIV",{class:!0});var J=M(s);t=A(J,"DIV",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-1j7ahwz"&&(t.innerHTML=i),n=U(J),o=A(J,"DIV",{class:!0});var x=M(o);a=A(x,"INPUT",{type:!0,accept:!0,id:!0}),d=U(x),g=A(x,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),$(g)!=="svelte-r2pi9w"&&(g.innerHTML=_),x.forEach(m),T=U(J),O=A(J,"DIV",{class:!0});var ne=M(O);k=A(ne,"BUTTON",{class:!0});var S=M(k);f=A(S,"I",{class:!0}),M(f).forEach(m),S.forEach(m),ne.forEach(m),h=U(J),c&&c.l(J),J.forEach(m),p=U(W),E=A(W,"DIV",{class:!0});var q=M(E);I=A(q,"I",{class:!0}),M(I).forEach(m),C=U(q),L&&L.l(q),q.forEach(m),W.forEach(m),this.h()},h(){r(t,"class","txtStyle svelte-vr008j"),r(a,"type","file"),r(a,"accept","image/*"),a.hidden=!0,r(a,"id","upImg"),r(g,"for","upImg"),r(g,"class","svelte-vr008j"),r(o,"class","sendImg svelte-vr008j"),r(f,"class",u=ke(`fa-solid fa-microphone ${l[2]?"rec":"stop"}`)+" svelte-vr008j"),r(k,"class","svelte-vr008j"),r(O,"class","sendAudio svelte-vr008j"),r(s,"class","main svelte-vr008j"),r(I,"class","fa-solid fa-face-grin-beam svelte-vr008j"),r(E,"class","emojis svelte-vr008j"),r(e,"class","tools svelte-vr008j")},m(B,W){R(B,e,W),b(e,s),b(s,t),b(s,n),b(s,o),b(o,a),b(o,d),b(o,g),b(s,T),b(s,O),b(O,k),b(k,f),b(s,h),c&&c.m(s,null),b(e,p),b(e,E),b(E,I),b(E,C),L&&L.m(E,null),N||(v=[V(a,"change",l[8]),V(k,"click",l[7]),V(I,"click",l[10])],N=!0)},p(B,[W]){W&4&&u!==(u=ke(`fa-solid fa-microphone ${B[2]?"rec":"stop"}`)+" svelte-vr008j")&&r(f,"class",u),B[3]?c?c.p(B,W):(c=$e(B),c.c(),c.m(s,null)):c&&(c.d(1),c=null),B[0]?L?L.p(B,W):(L=xe(B),L.c(),L.m(E,null)):L&&(L.d(1),L=null)},i:Y,o:Y,d(B){B&&m(e),c&&c.d(),L&&L.d(),N=!1,je(v)}}}const lt="https://frensgo.lat";function es(l,e,s){let t,i;z(l,ce,v=>s(16,t=v)),z(l,Me,v=>s(3,i=v));var n=(v=>(v.EMOJI="emoji",v.STICKER="sticker",v))(n||{});let o=!1,a="emoji";function d(v){a!==v&&s(1,a=v)}function g(v){t.send(JSON.stringify({type:"STICKER",msg:v})),s(0,o=!1)}let _=null,T=!1;function O(){_||T||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia({audio:!0}).then(v=>{_=new MediaRecorder(v);let c=[];_.ondataavailable=L=>{c.push(L.data)},_.onstop=async()=>{const L=new Blob(c,{type:"audio/ogg;codecs=opus"});c=[];const B=new FormData;B.append("audio",L);const J=await(await fetch(`${lt}/audio`,{method:"POST",body:B})).text();t.send(JSON.stringify({type:"AUDIO",msg:J}))},_.start(),s(2,T=!0)}).catch(v=>console.log(v))}function k(){_&&T&&(_.stop(),_=null,s(2,T=!1))}function f(){T?k():O()}async function u(v){const c=v.target.files[0];if(c.size>5e6){alert("La imágen es muy pesada");return}if(!/^image\/....?$/.test(c.type)){alert("Por favor elija una imágen válida");return}const L=new FormData;L.append("image",c);const W=await(await fetch(`${lt}/upImg`,{method:"POST",body:L})).text();t.send(JSON.stringify({type:"IMG",msg:W}))}return[o,a,T,i,n,d,g,f,u,()=>le(Me,i=null,i),()=>s(0,o=!o),()=>{d(n.EMOJI)},()=>{d(n.STICKER)},v=>g(v),v=>g(v)]}class ts extends Ie{constructor(e){super(),we(this,e,es,xt,ye,{})}}function ss(l){let e,s,t,i,n,o,a;return{c(){e=w("div"),s=w("i"),t=D(),i=w("img"),this.h()},l(d){e=A(d,"DIV",{class:!0});var g=M(e);s=A(g,"I",{class:!0}),M(s).forEach(m),t=U(g),i=A(g,"IMG",{src:!0,alt:!0,class:!0}),g.forEach(m),this.h()},h(){r(s,"class","fas fa-times svelte-a6okt0"),Q(i.src,n=l[1])||r(i,"src",n),r(i,"alt","Una imagen"),r(i,"class","svelte-a6okt0"),r(e,"class","modal svelte-a6okt0")},m(d,g){R(d,e,g),b(e,s),b(e,t),b(e,i),o||(a=V(s,"click",l[2]),o=!0)},p(d,[g]){g&2&&!Q(i.src,n=d[1])&&r(i,"src",n)},i:Y,o:Y,d(d){d&&m(e),o=!1,a()}}}function is(l,e,s){let t,i;return z(l,Se,o=>s(0,t=o)),z(l,De,o=>s(1,i=o)),[t,i,()=>le(Se,t=!1,t)]}class ls extends Ie{constructor(e){super(),we(this,e,is,ss,ye,{})}}const{window:Le}=Pt;function ot(l,e,s){const t=l.slice();return t[29]=e[s],t}function os(l){let e;return{c(){e=w("i"),this.h()},l(s){e=A(s,"I",{class:!0}),M(e).forEach(m),this.h()},h(){r(e,"class","fa-solid fa-circle-user svelte-klkuup")},m(s,t){R(s,e,t)},p:Y,d(s){s&&m(e)}}}function ns(l){let e;function s(n,o){return n[2].length>0?as:rs}let t=s(l),i=t(l);return{c(){i.c(),e=oe()},l(n){i.l(n),e=oe()},m(n,o){i.m(n,o),R(n,e,o)},p(n,o){t===(t=s(n))&&i?i.p(n,o):(i.d(1),i=t(n),i&&(i.c(),i.m(e.parentNode,e)))},d(n){n&&m(e),i.d(n)}}}function rs(l){let e;return{c(){e=w("i"),this.h()},l(s){e=A(s,"I",{class:!0}),M(e).forEach(m),this.h()},h(){r(e,"class","fa-solid fa-circle-user svelte-klkuup")},m(s,t){R(s,e,t)},p:Y,d(s){s&&m(e)}}}function as(l){let e,s;return{c(){e=w("img"),this.h()},l(t){e=A(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Q(e.src,s=l[2])||r(e,"src",s),r(e,"alt","avatar of user"),r(e,"class","svelte-klkuup")},m(t,i){R(t,e,i)},p(t,i){i[0]&4&&!Q(e.src,s=t[2])&&r(e,"src",s)},d(t){t&&m(e)}}}function nt(l){let e,s=l[4].get(l[1]).length>0,t,i,n,o,a,d,g='<i class="fa-solid fa-paper-plane svelte-klkuup"></i>',_,T,O,k=s&&rt(l);return{c(){e=w("div"),k&&k.c(),t=D(),i=w("div"),n=w("form"),o=w("input"),a=D(),d=w("button"),d.innerHTML=g,this.h()},l(f){e=A(f,"DIV",{class:!0});var u=M(e);k&&k.l(u),u.forEach(m),t=U(f),i=A(f,"DIV",{class:!0});var h=M(i);n=A(h,"FORM",{class:!0});var p=M(n);o=A(p,"INPUT",{type:!0,placeholder:!0,minlength:!0,maxlength:!0,class:!0}),a=U(p),d=A(p,"BUTTON",{class:!0,"data-svelte-h":!0}),$(d)!=="svelte-1m1u804"&&(d.innerHTML=g),p.forEach(m),h.forEach(m),this.h()},h(){r(e,"class","body svelte-klkuup"),r(o,"type","text"),r(o,"placeholder","Escribe tu mensaje..."),r(o,"minlength","1"),r(o,"maxlength","120"),o.required=!0,r(o,"class","montserrat-alternates-regular svelte-klkuup"),r(d,"class","svelte-klkuup"),r(n,"class","svelte-klkuup"),r(i,"class","footer svelte-klkuup")},m(f,u){R(f,e,u),k&&k.m(e,null),l[19](e),R(f,t,u),R(f,i,u),b(i,n),b(n,o),Be(o,l[10]),b(n,a),b(n,d),_=!0,T||(O=[V(o,"input",l[20]),V(n,"submit",kt(l[16]))],T=!0)},p(f,u){u[0]&18&&(s=f[4].get(f[1]).length>0),s?k?(k.p(f,u),u[0]&18&&H(k,1)):(k=rt(f),k.c(),H(k,1),k.m(e,null)):k&&(re(),X(k,1,1,()=>{k=null}),ae()),u[0]&1024&&o.value!==f[10]&&Be(o,f[10])},i(f){_||(H(k),_=!0)},o(f){X(k),_=!1},d(f){f&&(m(e),m(t),m(i)),k&&k.d(),l[19](null),T=!1,je(O)}}}function rt(l){let e,s,t=ee([...l[4]][0][1]),i=[];for(let o=0;o<t.length;o+=1)i[o]=at(ot(l,t,o));const n=o=>X(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=oe()},l(o){for(let a=0;a<i.length;a+=1)i[a].l(o);e=oe()},m(o,a){for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(o,a);R(o,e,a),s=!0},p(o,a){if(a[0]&16){t=ee([...o[4]][0][1]);let d;for(d=0;d<t.length;d+=1){const g=ot(o,t,d);i[d]?(i[d].p(g,a),H(i[d],1)):(i[d]=at(g),i[d].c(),H(i[d],1),i[d].m(e.parentNode,e))}for(re(),d=t.length;d<i.length;d+=1)n(d);ae()}},i(o){if(!s){for(let a=0;a<t.length;a+=1)H(i[a]);s=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)X(i[a]);s=!1},d(o){o&&m(e),Te(i,o)}}}function at(l){let e,s;return e=new yt({props:{data:l[29]}}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,i){pe(e,t,i),s=!0},p(t,i){const n={};i[0]&16&&(n.data=t[29]),e.$set(n)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){X(e.$$.fragment,t),s=!1},d(t){ge(e,t)}}}function cs(l){let e,s,t,i,n,o,a,d,g,_,T,O,k,f,u,h,p;function E(v,c){return v[2]?ns:os}let I=E(l),C=I(l),N=!l[9]&&nt(l);return{c(){e=w("div"),s=w("div"),t=w("div"),C.c(),i=D(),n=w("h3"),o=ue(l[0]),a=D(),d=w("div"),g=w("i"),_=D(),T=w("i"),O=D(),N&&N.c(),this.h()},l(v){e=A(v,"DIV",{class:!0,id:!0,style:!0});var c=M(e);s=A(c,"DIV",{class:!0});var L=M(s);t=A(L,"DIV",{class:!0});var B=M(t);C.l(B),i=U(B),n=A(B,"H3",{class:!0});var W=M(n);o=de(W,l[0]),W.forEach(m),B.forEach(m),a=U(L),d=A(L,"DIV",{class:!0});var J=M(d);g=A(J,"I",{class:!0}),M(g).forEach(m),_=U(J),T=A(J,"I",{class:!0}),M(T).forEach(m),J.forEach(m),L.forEach(m),O=U(c),N&&N.l(c),c.forEach(m),this.h()},h(){r(n,"class","montserrat-alternates-bold"),r(t,"class","left svelte-klkuup"),r(g,"class","fa-solid fa-down-left-and-up-right-to-center svelte-klkuup"),r(T,"class","fas fa-times svelte-klkuup"),r(d,"class","right svelte-klkuup"),r(s,"class","header svelte-klkuup"),r(e,"class","pvWindow svelte-klkuup"),r(e,"id",k=l[1].toString()),r(e,"style",f=`left:${l[7]}px; top:${l[8]}px; z-index:${l[6]}`),fe(e,"minimize",l[9])},m(v,c){R(v,e,c),b(e,s),b(s,t),C.m(t,null),b(t,i),b(t,n),b(n,o),b(s,a),b(s,d),b(d,g),b(d,_),b(d,T),b(e,O),N&&N.m(e,null),l[21](e),u=!0,h||(p=[V(Le,"mouseup",l[13]),V(Le,"mousemove",l[14]),V(Le,"touchend",l[13]),V(Le,"touchmove",l[15]),V(g,"click",l[18]),V(T,"click",l[11]),V(s,"mousedown",l[12]),V(s,"touchstart",l[12],{passive:!0})],h=!0)},p(v,c){I===(I=E(v))&&C?C.p(v,c):(C.d(1),C=I(v),C&&(C.c(),C.m(t,i))),(!u||c[0]&1)&&Ae(o,v[0]),v[9]?N&&(re(),X(N,1,1,()=>{N=null}),ae()):N?(N.p(v,c),c[0]&512&&H(N,1)):(N=nt(v),N.c(),H(N,1),N.m(e,null)),(!u||c[0]&2&&k!==(k=v[1].toString()))&&r(e,"id",k),(!u||c[0]&448&&f!==(f=`left:${v[7]}px; top:${v[8]}px; z-index:${v[6]}`))&&r(e,"style",f),(!u||c[0]&512)&&fe(e,"minimize",v[9])},i(v){u||(H(N),u=!0)},o(v){X(N),u=!1},d(v){v&&m(e),C.d(),N&&N.d(),l[21](null),h=!1,je(p)}}}function ct(l,e){l.scroll({top:l.scrollHeight,behavior:"smooth"})}function fs(l,e,s){let t,i,n,o;z(l,Oe,S=>s(4,t=S)),z(l,Pe,S=>s(25,i=S)),z(l,ce,S=>s(26,n=S)),z(l,be,S=>s(27,o=S));let{nick:a}=e,{fromId:d}=e,{me:g}=e,{avatar:_}=e,T,O,k=100,f=300,u=Math.round(Math.random()*400),h=!1,p=!1,E;He(()=>{window.outerWidth<500&&s(7,f=0)});function I(){const S=JSON.stringify({id:d,nick:a,me:g,avatar:_});o.has(S)&&(o.delete(S),be.set(o),t.delete(d),n.send(JSON.stringify({type:"CLOSE_PV",msg:{to:d,nick:a}})))}let C=0;function N(){const{top:S}=O.getBoundingClientRect();C=S,s(6,k++,k),h=!0}function v(){h=!1}function c(S){h&&(s(7,f+=S.movementX),s(8,u+=S.movementY))}function L(S){if(h){const{clientY:q}=S.touches[0],ie=q-C;if(isNaN(ie))return;s(8,u=u+ie),C=q}}function B(){!E||E.length===0||E.length>120||(n.send(JSON.stringify({type:"PV",msg:{to:d,body:E.trim()}})),t.get(d).push({username:i.username,body:E,type:"pv",avatar:i.avatar}),Oe.set(t),setTimeout(()=>ct(T),.1),s(10,E=""))}const W=()=>s(9,p=!p);function J(S){qe[S?"unshift":"push"](()=>{T=S,s(3,T)})}function x(){E=this.value,s(10,E)}function ne(S){qe[S?"unshift":"push"](()=>{O=S,s(5,O)})}return l.$$set=S=>{"nick"in S&&s(0,a=S.nick),"fromId"in S&&s(1,d=S.fromId),"me"in S&&s(17,g=S.me),"avatar"in S&&s(2,_=S.avatar)},l.$$.update=()=>{if(l.$$.dirty[0]&24)try{setTimeout(()=>ct(T,t),.1)}catch{}},[a,d,_,T,t,O,k,f,u,p,E,I,N,v,c,L,B,g,W,J,x,ne]}class us extends Ie{constructor(e){super(),we(this,e,fs,cs,ye,{nick:0,fromId:1,me:17,avatar:2},null,[-1,-1])}}function ft(l,e,s){const t=l.slice();return t[20]=e[s][0],t[21]=e[s][1],t}function ut(l,e,s){const t=l.slice();return t[24]=e[s],t}function dt(l,e,s){const t=l.slice();return t[27]=e[s],t}function ht(l){let e,s;return e=new $t({props:{msg:"Aver si nos calmamos un poquito :)",time:5e3}}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,i){pe(e,t,i),s=!0},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){X(e.$$.fragment,t),s=!1},d(t){ge(e,t)}}}function mt(l){let e,s;return e=new ls({}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,i){pe(e,t,i),s=!0},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){X(e.$$.fragment,t),s=!1},d(t){ge(e,t)}}}function pt(l){let e,s;return e=new us({props:{nick:JSON.parse(l[27]).nick,fromId:JSON.parse(l[27]).id,me:JSON.parse(l[27]).me,avatar:JSON.parse(l[27]).avatar}}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,i){pe(e,t,i),s=!0},p(t,i){const n={};i&16&&(n.nick=JSON.parse(t[27]).nick),i&16&&(n.fromId=JSON.parse(t[27]).id),i&16&&(n.me=JSON.parse(t[27]).me),i&16&&(n.avatar=JSON.parse(t[27]).avatar),e.$set(n)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){X(e.$$.fragment,t),s=!1},d(t){ge(e,t)}}}function gt(l){let e,s;return e=new yt({props:{data:l[24]}}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,i){pe(e,t,i),s=!0},p(t,i){const n={};i&8&&(n.data=t[24]),e.$set(n)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){X(e.$$.fragment,t),s=!1},d(t){ge(e,t)}}}function vt(l){let e,s;return e=new Yt({props:{id:l[20],data:l[21]}}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,i){pe(e,t,i),s=!0},p(t,i){const n={};i&4&&(n.id=t[20]),i&4&&(n.data=t[21]),e.$set(n)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){X(e.$$.fragment,t),s=!1},d(t){ge(e,t)}}}function ds(l){let e,s,t,i,n,o,a,d,g,_,T,O,k,f,u,h,p='<i class="fa-solid fa-paper-plane svelte-1vmv3y4"></i>',E,I,C,N,v=l[2].size+"",c,L,B,W,J,x,ne,S=l[5]&&ht(),q=l[6]&&l[7]&&mt(),ie=ee(l[4]),G=[];for(let y=0;y<ie.length;y+=1)G[y]=pt(dt(l,ie,y));const It=y=>X(G[y],1,1,()=>{G[y]=null});i=new Mt({});let ve=ee(l[3]),K=[];for(let y=0;y<ve.length;y+=1)K[y]=gt(ut(l,ve,y));const wt=y=>X(K[y],1,1,()=>{K[y]=null});T=new ts({});let _e=ee(l[2].entries()),F=[];for(let y=0;y<_e.length;y+=1)F[y]=vt(ft(l,_e,y));const At=y=>X(F[y],1,1,()=>{F[y]=null});return{c(){S&&S.c(),e=D(),q&&q.c(),s=D();for(let y=0;y<G.length;y+=1)G[y].c();t=D(),he(i.$$.fragment),n=D(),o=w("section"),a=w("article"),d=w("div");for(let y=0;y<K.length;y+=1)K[y].c();g=D(),_=w("div"),he(T.$$.fragment),O=D(),k=w("form"),f=w("input"),u=D(),h=w("button"),h.innerHTML=p,E=D(),I=w("article"),C=w("h3"),N=ue("Usuarios conectados: "),c=ue(v),L=D(),B=w("div");for(let y=0;y<F.length;y+=1)F[y].c();this.h()},l(y){S&&S.l(y),e=U(y),q&&q.l(y),s=U(y);for(let se=0;se<G.length;se+=1)G[se].l(y);t=U(y),me(i.$$.fragment,y),n=U(y),o=A(y,"SECTION",{class:!0});var P=M(o);a=A(P,"ARTICLE",{class:!0});var j=M(a);d=A(j,"DIV",{class:!0});var te=M(d);for(let se=0;se<K.length;se+=1)K[se].l(te);te.forEach(m),g=U(j),_=A(j,"DIV",{class:!0});var Ce=M(_);me(T.$$.fragment,Ce),O=U(Ce),k=A(Ce,"FORM",{class:!0});var Re=M(k);f=A(Re,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,minlength:!0}),u=U(Re),h=A(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),$(h)!=="svelte-1m1u804"&&(h.innerHTML=p),Re.forEach(m),Ce.forEach(m),j.forEach(m),E=U(P),I=A(P,"ARTICLE",{class:!0});var Ne=M(I);C=A(Ne,"H3",{class:!0});var Ve=M(C);N=de(Ve,"Usuarios conectados: "),c=de(Ve,v),Ve.forEach(m),L=U(Ne),B=A(Ne,"DIV",{class:!0});var Je=M(B);for(let se=0;se<F.length;se+=1)F[se].l(Je);Je.forEach(m),Ne.forEach(m),P.forEach(m),this.h()},h(){r(d,"class","chat svelte-1vmv3y4"),r(f,"class","montserrat-alternates-regular svelte-1vmv3y4"),r(f,"type","text"),r(f,"placeholder","Escribe tu mensaje..."),r(f,"maxlength","120"),r(f,"minlength","1"),r(h,"class","svelte-1vmv3y4"),r(k,"class","svelte-1vmv3y4"),r(_,"class","msg svelte-1vmv3y4"),r(a,"class","chatBX svelte-1vmv3y4"),r(C,"class","montserrat-alternates-bold svelte-1vmv3y4"),r(B,"class","userlist svelte-1vmv3y4"),r(I,"class",W=ke(`users ${l[8]?"showUserlist":""}`)+" svelte-1vmv3y4"),r(o,"class","svelte-1vmv3y4")},m(y,P){S&&S.m(y,P),R(y,e,P),q&&q.m(y,P),R(y,s,P);for(let j=0;j<G.length;j+=1)G[j]&&G[j].m(y,P);R(y,t,P),pe(i,y,P),R(y,n,P),R(y,o,P),b(o,a),b(a,d);for(let j=0;j<K.length;j+=1)K[j]&&K[j].m(d,null);l[10](d),b(a,g),b(a,_),pe(T,_,null),b(_,O),b(_,k),b(k,f),Be(f,l[0]),b(k,u),b(k,h),b(o,E),b(o,I),b(I,C),b(C,N),b(C,c),b(I,L),b(I,B);for(let j=0;j<F.length;j+=1)F[j]&&F[j].m(B,null);J=!0,x||(ne=[V(f,"input",l[11]),V(k,"submit",kt(l[9]))],x=!0)},p(y,[P]){if(y[5]?S?P&32&&H(S,1):(S=ht(),S.c(),H(S,1),S.m(e.parentNode,e)):S&&(re(),X(S,1,1,()=>{S=null}),ae()),y[6]&&y[7]?q?P&192&&H(q,1):(q=mt(),q.c(),H(q,1),q.m(s.parentNode,s)):q&&(re(),X(q,1,1,()=>{q=null}),ae()),P&16){ie=ee(y[4]);let j;for(j=0;j<ie.length;j+=1){const te=dt(y,ie,j);G[j]?(G[j].p(te,P),H(G[j],1)):(G[j]=pt(te),G[j].c(),H(G[j],1),G[j].m(t.parentNode,t))}for(re(),j=ie.length;j<G.length;j+=1)It(j);ae()}if(P&8){ve=ee(y[3]);let j;for(j=0;j<ve.length;j+=1){const te=ut(y,ve,j);K[j]?(K[j].p(te,P),H(K[j],1)):(K[j]=gt(te),K[j].c(),H(K[j],1),K[j].m(d,null))}for(re(),j=ve.length;j<K.length;j+=1)wt(j);ae()}if(P&1&&f.value!==y[0]&&Be(f,y[0]),(!J||P&4)&&v!==(v=y[2].size+"")&&Ae(c,v),P&4){_e=ee(y[2].entries());let j;for(j=0;j<_e.length;j+=1){const te=ft(y,_e,j);F[j]?(F[j].p(te,P),H(F[j],1)):(F[j]=vt(te),F[j].c(),H(F[j],1),F[j].m(B,null))}for(re(),j=_e.length;j<F.length;j+=1)At(j);ae()}(!J||P&256&&W!==(W=ke(`users ${y[8]?"showUserlist":""}`)+" svelte-1vmv3y4"))&&r(I,"class",W)},i(y){if(!J){H(S),H(q);for(let P=0;P<ie.length;P+=1)H(G[P]);H(i.$$.fragment,y);for(let P=0;P<ve.length;P+=1)H(K[P]);H(T.$$.fragment,y);for(let P=0;P<_e.length;P+=1)H(F[P]);J=!0}},o(y){X(S),X(q),G=G.filter(Boolean);for(let P=0;P<G.length;P+=1)X(G[P]);X(i.$$.fragment,y),K=K.filter(Boolean);for(let P=0;P<K.length;P+=1)X(K[P]);X(T.$$.fragment,y),F=F.filter(Boolean);for(let P=0;P<F.length;P+=1)X(F[P]);J=!1},d(y){y&&(m(e),m(s),m(t),m(n),m(o)),S&&S.d(y),q&&q.d(y),Te(G,y),ge(i,y),Te(K,y),l[10](null),ge(T),Te(F,y),x=!1,je(ne)}}}function Ee(l){l.scroll({top:l.scrollHeight,behavior:"smooth"})}function hs(l,e,s){let t,i,n,o,a,d,g,_,T,O,k;z(l,ce,v=>s(12,t=v)),z(l,Pe,v=>s(13,i=v)),z(l,Me,v=>s(14,n=v)),z(l,_t,v=>s(15,o=v)),z(l,Oe,v=>s(16,a=v)),z(l,be,v=>s(4,d=v)),z(l,Et,v=>s(17,g=v)),z(l,Ue,v=>s(5,_=v)),z(l,Se,v=>s(6,T=v)),z(l,De,v=>s(7,O=v)),z(l,Tt,v=>s(8,k=v));let f="",u=null,h=[],p=[{username:"frensgo :",body:`Bienvenido a la sala ${i.room}`,type:"bot"}];He(()=>{t.send(JSON.stringify({type:"GETUSERLIST"}))}),bt(()=>{t.close(),le(ce,t=null,t)});function E(v,c){switch(v){case"USERLIST":const L=new Map(c);s(2,h=L);break;case"NEW_USER":const B={username:"frensgo :",body:c,type:"bot"};p.push(B),s(3,p);break;case"BYE_USER":const W={username:"frensgo :",body:c,type:"bot"};p.push(W),s(3,p);break;case"ROOM_MSG":if(o.has(c.username))return;if(p.push({...c,type:"room"}),s(3,p),p.length>=100){s(3,p=[]);const ne={username:"frensgo :",body:"Limpieza automática activada",type:"bot"};p.push(ne),s(3,p)}setTimeout(()=>Ee(u),.1);break;case"CALM":le(Ue,_=!0,_);break;case"AUDIO":if(o.has(c.username))return;p.push({...c,type:"audio"}),s(3,p),setTimeout(()=>Ee(u),.1);break;case"IMG":if(o.has(c.username))return;p.push({...c,type:"image"}),s(3,p),setTimeout(()=>Ee(u),.1);break;case"STICKER":if(o.has(c.username))return;p.push({...c,type:"sticker"}),s(3,p),setTimeout(()=>Ee(u),.1);break;case"OPEN_PV":if(g||o.has(c.nick))return;const J={id:c.from,nick:c.nick,me:c.me,avatar:c.avatar};d.add(JSON.stringify(J)),be.set(d),a.set(c.from,[]);break;case"CLOSE_PV":if(g)return;const x={id:c.from,nick:c.nick,me:c.to,avatar:c.avatar};d.delete(JSON.stringify(x)),be.set(d),a.delete(c.from);break;case"PV":if(o.has(c.fromNick)||!a.has(c.fromId))return;a.get(c.fromId).push({username:c.fromNick,body:c.body,type:"pv",avatar:c.fromAvatar}),Oe.set(a);break;case"WHISP":if(o.has(c.fromNick))return;p.push({...c,type:"whisper"}),s(3,p),setTimeout(()=>Ee(u),.1);break;case"BANNED":location.href="https://www.google.com/search?q=como+ser+mejor+persona"}}le(ce,t.onmessage=v=>{const{type:c,msg:L}=JSON.parse(v.data);E(c,L)},t),le(ce,t.onclose=()=>{Ot("/")},t);function I(){!f||f.length===0||f.length>120||(n?(t.send(JSON.stringify({type:"WHISP",msg:{to:n.id,body:f.trim()}})),p.push({username:i.username,body:f.trim(),type:"whisper"}),s(3,p),setTimeout(()=>Ee(u),.1)):t.send(JSON.stringify({type:"ROOM_MSG",msg:f.trim()})),s(0,f=""))}function C(v){qe[v?"unshift":"push"](()=>{u=v,s(1,u)})}function N(){f=this.value,s(0,f)}return[f,u,h,p,d,_,T,O,k,I,C,N]}class ys extends Ie{constructor(e){super(),we(this,e,hs,ds,ye,{})}}export{ys as component,ks as universal};
