import{m as Oe,s as ne,r as gt,a as Se,b as Ue,p as Me,c as ge,d as ft,e as Le,u as _t}from"../chunks/index.3ptlv7SM.js";import{s as ye,m as bt,z as Ae,n as Y,c as V,o as De,d as ce,e as Z,r as we,A as ut,h as Je}from"../chunks/scheduler.DBTPyL-f.js";import{S as ke,i as Ie,e as b,s as L,t as _e,c as y,a as O,f as B,b as be,d as m,n,g as R,h as _,p as D,j as Ee,u as se,D as He,E as fe,m as le,C as Te,k as U,w as ae,l as G,v as oe,o as Be,q as dt,y as ue,z as de,A as he,B as me}from"../chunks/index.CQsuM-QA.js";import{e as te,N as yt}from"../chunks/Navbar.C8shaLlP.js";import{g as kt}from"../chunks/entry.BQikl9tc.js";const It=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function At(){let i,e;if(Oe.subscribe(s=>i=s),ne.subscribe(s=>e=s),!i||!e)throw gt(307,"/")}const us=Object.freeze(Object.defineProperty({__proto__:null,load:At},Symbol.toStringTag,{value:"Module"}));class Q extends HTMLElement{constructor(){super(),this.isIframeLoaded=!1,this.setupDom()}static get observedAttributes(){return["videoid","playlistid"]}connectedCallback(){this.addEventListener("pointerover",Q.warmConnections,{once:!0}),this.addEventListener("click",()=>this.addIframe())}get videoId(){return encodeURIComponent(this.getAttribute("videoid")||"")}set videoId(e){this.setAttribute("videoid",e)}get playlistId(){return encodeURIComponent(this.getAttribute("playlistid")||"")}set playlistId(e){this.setAttribute("playlistid",e)}get videoTitle(){return this.getAttribute("videotitle")||"Video"}set videoTitle(e){this.setAttribute("videotitle",e)}get videoPlay(){return this.getAttribute("videoPlay")||"Play"}set videoPlay(e){this.setAttribute("videoPlay",e)}get videoStartAt(){return this.getAttribute("videoStartAt")||"0"}get autoLoad(){return this.hasAttribute("autoload")}get noCookie(){return this.hasAttribute("nocookie")}get posterQuality(){return this.getAttribute("posterquality")||"hqdefault"}get posterLoading(){return this.getAttribute("posterloading")||"lazy"}get params(){return`start=${this.videoStartAt}&${this.getAttribute("params")}`}set params(e){this.setAttribute("params",e)}setupDom(){const e=this.attachShadow({mode:"open"});let s="";window.liteYouTubeNonce&&(s=`nonce="${window.liteYouTubeNonce}"`),e.innerHTML=`
      <style ${s}>
        :host {
          contain: content;
          display: block;
          position: relative;
          width: 100%;
          padding-bottom: calc(100% / (16 / 9));
        }

        @media (max-width: 40em) {
          :host([short]) {
            padding-bottom: calc(100% / (9 / 16));
          }
        }

        #frame, #fallbackPlaceholder, iframe {
          position: absolute;
          width: 100%;
          height: 100%;
          left: 0;
        }

        #frame {
          cursor: pointer;
        }

        #fallbackPlaceholder {
          object-fit: cover;
        }

        #frame::before {
          content: '';
          display: block;
          position: absolute;
          top: 0;
          background-image: linear-gradient(180deg, #111 -20%, transparent 90%);
          height: 60px;
          width: 100%;
          z-index: 1;
        }

        #playButton {
          width: 68px;
          height: 48px;
          background-color: transparent;
          background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/><path d="M45 24 27 14v20" fill="white"/></svg>');
          z-index: 1;
          border: 0;
          border-radius: inherit;
        }

        #playButton:before {
          content: '';
          border-style: solid;
          border-width: 11px 0 11px 19px;
          border-color: transparent transparent transparent #fff;
        }

        #playButton,
        #playButton:before {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate3d(-50%, -50%, 0);
          cursor: inherit;
        }

        /* Post-click styles */
        .activated {
          cursor: unset;
        }

        #frame.activated::before,
        #frame.activated > #playButton {
          display: none;
        }
      </style>
      <div id="frame">
        <picture>
          <source id="webpPlaceholder" type="image/webp">
          <source id="jpegPlaceholder" type="image/jpeg">
          <img id="fallbackPlaceholder" referrerpolicy="origin" loading="lazy">
        </picture>
        <button id="playButton"></button>
      </div>
    `,this.domRefFrame=e.querySelector("#frame"),this.domRefImg={fallback:e.querySelector("#fallbackPlaceholder"),webp:e.querySelector("#webpPlaceholder"),jpeg:e.querySelector("#jpegPlaceholder")},this.domRefPlayButton=e.querySelector("#playButton")}setupComponent(){this.initImagePlaceholder(),this.domRefPlayButton.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),this.setAttribute("title",`${this.videoPlay}: ${this.videoTitle}`),(this.autoLoad||this.isYouTubeShort())&&this.initIntersectionObserver()}attributeChangedCallback(e,s,t){switch(e){case"videoid":case"playlistid":case"videoTitle":case"videoPlay":{s!==t&&(this.setupComponent(),this.domRefFrame.classList.contains("activated")&&(this.domRefFrame.classList.remove("activated"),this.shadowRoot.querySelector("iframe").remove(),this.isIframeLoaded=!1));break}}}addIframe(e=!1){if(!this.isIframeLoaded){let s=e?0:1;const t=this.noCookie?"-nocookie":"";let l;this.playlistId?l=`?listType=playlist&list=${this.playlistId}&`:l=`${this.videoId}?`,this.isYouTubeShort()&&(this.params=`loop=1&mute=1&modestbranding=1&playsinline=1&rel=0&enablejsapi=1&playlist=${this.videoId}`,s=1);const a=`
<iframe frameborder="0" title="${this.videoTitle}"
  allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen
  src="https://www.youtube${t}.com/embed/${l}autoplay=${s}&${this.params}"
></iframe>`;this.domRefFrame.insertAdjacentHTML("beforeend",a),this.domRefFrame.classList.add("activated"),this.isIframeLoaded=!0,this.attemptShortAutoPlay(),this.dispatchEvent(new CustomEvent("liteYoutubeIframeLoaded",{detail:{videoId:this.videoId},bubbles:!0,cancelable:!0}))}}initImagePlaceholder(){var t,l;const e=`https://i.ytimg.com/vi_webp/${this.videoId}/${this.posterQuality}.webp`,s=`https://i.ytimg.com/vi/${this.videoId}/${this.posterQuality}.jpg`;this.domRefImg.fallback.loading=this.posterLoading,this.domRefImg.webp.srcset=e,this.domRefImg.jpeg.srcset=s,this.domRefImg.fallback.src=s,this.domRefImg.fallback.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),(l=(t=this.domRefImg)==null?void 0:t.fallback)==null||l.setAttribute("alt",`${this.videoPlay}: ${this.videoTitle}`)}initIntersectionObserver(){const e={root:null,rootMargin:"0px",threshold:0};new IntersectionObserver((t,l)=>{t.forEach(a=>{a.isIntersecting&&!this.isIframeLoaded&&(Q.warmConnections(),this.addIframe(!0),l.unobserve(this))})},e).observe(this)}attemptShortAutoPlay(){this.isYouTubeShort()&&setTimeout(()=>{var e,s;(s=(e=this.shadowRoot.querySelector("iframe"))==null?void 0:e.contentWindow)==null||s.postMessage('{"event":"command","func":"playVideo","args":""}',"*")},2e3)}isYouTubeShort(){return this.getAttribute("short")===""&&window.matchMedia("(max-width: 40em)").matches}static addPrefetch(e,s){const t=document.createElement("link");t.rel=e,t.href=s,t.crossOrigin="true",document.head.append(t)}static warmConnections(){Q.isPreconnected||window.liteYouTubeIsPreconnected||(Q.addPrefetch("preconnect","https://i.ytimg.com/"),Q.addPrefetch("preconnect","https://s.ytimg.com"),Q.addPrefetch("preconnect","https://www.youtube.com"),Q.addPrefetch("preconnect","https://www.google.com"),Q.addPrefetch("preconnect","https://googleads.g.doubleclick.net"),Q.addPrefetch("preconnect","https://static.doubleclick.net"),Q.isPreconnected=!0,window.liteYouTubeIsPreconnected=!0)}}Q.isPreconnected=!1;customElements.define("lite-youtube",Q);function qe(i){let e;function s(a,r){return a[0].avatar?Et:wt}let t=s(i),l=t(i);return{c(){l.c(),e=se()},l(a){l.l(a),e=se()},m(a,r){l.m(a,r),R(a,e,r)},p(a,r){t===(t=s(a))&&l?l.p(a,r):(l.d(1),l=t(a),l&&(l.c(),l.m(e.parentNode,e)))},d(a){a&&m(e),l.d(a)}}}function wt(i){let e;return{c(){e=b("i"),this.h()},l(s){e=y(s,"I",{class:!0}),O(e).forEach(m),this.h()},h(){n(e,"class","fa-solid fa-circle-user svelte-1xa971h")},m(s,t){R(s,e,t)},p:Y,d(s){s&&m(e)}}}function Et(i){let e;function s(a,r){return a[0].avatar.length>0?St:Tt}let t=s(i),l=t(i);return{c(){l.c(),e=se()},l(a){l.l(a),e=se()},m(a,r){l.m(a,r),R(a,e,r)},p(a,r){t===(t=s(a))&&l?l.p(a,r):(l.d(1),l=t(a),l&&(l.c(),l.m(e.parentNode,e)))},d(a){a&&m(e),l.d(a)}}}function Tt(i){let e;return{c(){e=b("i"),this.h()},l(s){e=y(s,"I",{class:!0}),O(e).forEach(m),this.h()},h(){n(e,"class","fa-solid fa-circle-user svelte-1xa971h")},m(s,t){R(s,e,t)},p:Y,d(s){s&&m(e)}}}function St(i){let e,s;return{c(){e=b("img"),this.h()},l(t){e=y(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Z(e.src,s=i[0].avatar)||n(e,"src",s),n(e,"alt","avatar of user"),n(e,"class","svelte-1xa971h")},m(t,l){R(t,e,l)},p(t,l){l&1&&!Z(e.src,s=t[0].avatar)&&n(e,"src",s)},d(t){t&&m(e)}}}function Mt(i){let e;return{c(){e=b("lite-youtube"),this.h()},l(s){e=y(s,"LITE-YOUTUBE",{class:!0,videoid:!0}),O(e).forEach(m),this.h()},h(){He(e,"class","ytFrame svelte-1xa971h"),He(e,"videoid",i[1])},m(s,t){R(s,e,t)},p(s,t){t&2&&He(e,"videoid",s[1])},d(s){s&&m(e)}}}function Ot(i){let e,s,t,l,a;return{c(){e=b("img"),this.h()},l(r){e=y(r,"IMG",{src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){Z(e.src,s=i[0].body)||n(e,"src",s),n(e,"alt","Imagen subida Por un usuario"),n(e,"style",t=`cursor:pointer;${i[0].type===i[3].STICKER?"width:150px;":""}`),n(e,"class","svelte-1xa971h")},m(r,f){R(r,e,f),l||(a=D(e,"click",i[9]),l=!0)},p(r,f){f&1&&!Z(e.src,s=r[0].body)&&n(e,"src",s),f&1&&t!==(t=`cursor:pointer;${r[0].type===r[3].STICKER?"width:150px;":""}`)&&n(e,"style",t)},d(r){r&&m(e),l=!1,a()}}}function jt(i){let e,s;return{c(){e=b("audio"),this.h()},l(t){e=y(t,"AUDIO",{src:!0}),O(e).forEach(m),this.h()},h(){Z(e.src,s=i[0].body)||n(e,"src",s),e.controls=!0},m(t,l){R(t,e,l)},p(t,l){l&1&&!Z(e.src,s=t[0].body)&&n(e,"src",s)},d(t){t&&m(e)}}}function Pt(i){let e,s=i[0].body+"",t;return{c(){e=b("p"),t=_e(s),this.h()},l(l){e=y(l,"P",{class:!0});var a=O(e);t=be(a,s),a.forEach(m),this.h()},h(){n(e,"class","montserrat-alternates-regular svelte-1xa971h")},m(l,a){R(l,e,a),_(e,t)},p(l,a){a&1&&s!==(s=l[0].body+"")&&Ee(t,s)},d(l){l&&m(e)}}}function Ct(i){let e,s,t,l,a=decodeURI(i[0].username)+"",r,f,u,p,E,M,T;bt(i[8]);let o=i[0].type!==i[3].BOT&&qe(i);function d(v,I){if(v[0].type===v[3].ROOM||v[0].type===v[3].BOT||v[0].type===v[3].PV)return Pt;if(v[0].type===v[3].AUDIO)return jt;if(v[0].type===v[3].IMAGE||v[0].type===v[3].STICKER)return Ot;if(v[0].type===v[3].YT)return Mt}let h=d(i),c=h&&h(i);return{c(){e=b("article"),s=b("div"),o&&o.c(),t=L(),l=b("h4"),r=_e(a),f=L(),u=b("div"),p=b("div"),c&&c.c(),this.h()},l(v){e=y(v,"ARTICLE",{class:!0,style:!0});var I=O(e);s=y(I,"DIV",{class:!0});var C=O(s);o&&o.l(C),t=B(C),l=y(C,"H4",{class:!0});var w=O(l);r=be(w,a),w.forEach(m),C.forEach(m),f=B(I),u=y(I,"DIV",{class:!0});var k=O(u);p=y(k,"DIV",{class:!0});var S=O(p);c&&c.l(S),S.forEach(m),k.forEach(m),I.forEach(m),this.h()},h(){n(l,"class","montserrat-alternates-bold svelte-1xa971h"),n(s,"class","username svelte-1xa971h"),n(p,"class",Ae(`body ${i[7]()}`)+" svelte-1xa971h"),n(u,"class","bodyBX"),n(e,"class",Ae(`${i[4]?"me":""}`)+" svelte-1xa971h"),n(e,"style",E=i[6](i[2]))},m(v,I){R(v,e,I),_(e,s),o&&o.m(s,null),_(s,t),_(s,l),_(l,r),_(e,f),_(e,u),_(u,p),c&&c.m(p,null),M||(T=D(window,"resize",i[8]),M=!0)},p(v,[I]){v[0].type!==v[3].BOT?o?o.p(v,I):(o=qe(v),o.c(),o.m(s,t)):o&&(o.d(1),o=null),I&1&&a!==(a=decodeURI(v[0].username)+"")&&Ee(r,a),h===(h=d(v))&&c?c.p(v,I):(c&&c.d(1),c=h&&h(v),c&&(c.c(),c.m(p,null))),I&4&&E!==(E=v[6](v[2]))&&n(e,"style",E)},i:Y,o:Y,d(v){v&&m(e),o&&o.d(),c&&c.d(),M=!1,T()}}}function Rt(i,e,s){let t,l,a;V(i,Se,c=>s(10,t=c)),V(i,Ue,c=>s(11,l=c)),V(i,Oe,c=>s(12,a=c));var r=(c=>(c.ROOM="room",c.BOT="bot",c.AUDIO="audio",c.IMAGE="image",c.YT="yt",c.STICKER="sticker",c.PV="pv",c))(r||{});let{data:f}=e,u=null;De(()=>{if(/^https:\/\/(www\.)?youtu.+\//.test(f.body)){const c=f.body.match(/(\.be\/|v=).{11}/);s(1,u=c[0].replace(c[1],"")),s(0,f.type="yt",f)}});const p=a.username===decodeURI(f.username);let E;function M(c){ce(Ue,l=c.src,l),ce(Se,t=!0,t)}function T(c){if(f.type==="bot")return"";let v="";return E<500&&(v+="flex-direction:column;gap:0.4rem !important;",p?v+="align-items:end;":v+="align-items:start;"),v}function o(){switch(f.type){case"bot":return"typeBot";case"audio":return"typeAudio";case"image":return"typeImg";case"sticker":return"typeBot";case"pv":return"typePv";default:return""}}function d(){s(2,E=window.outerWidth)}const h=c=>M(c.target);return i.$$set=c=>{"data"in c&&s(0,f=c.data)},[f,u,E,r,p,M,T,o,d,h]}class ht extends ke{constructor(e){super(),Ie(this,e,Rt,Ct,ye,{data:0})}}function Nt(i){let e;return{c(){e=b("i"),this.h()},l(s){e=y(s,"I",{class:!0}),O(e).forEach(m),this.h()},h(){n(e,"class","fa-solid fa-circle-user svelte-16fo0sk")},m(s,t){R(s,e,t)},p:Y,d(s){s&&m(e)}}}function Ut(i){let e,s;return{c(){e=b("img"),this.h()},l(t){e=y(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Z(e.src,s=i[1].avatar)||n(e,"src",s),n(e,"alt","my avatar"),n(e,"class","svelte-16fo0sk")},m(t,l){R(t,e,l)},p(t,l){l&2&&!Z(e.src,s=t[1].avatar)&&n(e,"src",s)},d(t){t&&m(e)}}}function Ge(i){let e,s,t,l='<p class="montserrat-alternates-bold">Privado</p> <i class="fa-solid fa-message"></i>',a,r,f='<p class="montserrat-alternates-bold">cancelar</p> <i class="fas fa-times"></i>',u,p;function E(o,d){return o[3]?Bt:Lt}let M=E(i),T=M(i);return{c(){e=b("ul"),T.c(),s=L(),t=b("li"),t.innerHTML=l,a=L(),r=b("li"),r.innerHTML=f,this.h()},l(o){e=y(o,"UL",{class:!0});var d=O(e);T.l(d),s=B(d),t=y(d,"LI",{class:!0,"data-svelte-h":!0}),le(t)!=="svelte-1y20pd9"&&(t.innerHTML=l),a=B(d),r=y(d,"LI",{class:!0,"data-svelte-h":!0}),le(r)!=="svelte-v7ez2z"&&(r.innerHTML=f),d.forEach(m),this.h()},h(){n(t,"class","cancel svelte-16fo0sk"),n(r,"class","cancel svelte-16fo0sk"),n(e,"class","opts svelte-16fo0sk")},m(o,d){R(o,e,d),T.m(e,null),_(e,s),_(e,t),_(e,a),_(e,r),u||(p=[D(t,"click",i[7]),D(r,"click",i[4])],u=!0)},p(o,d){M===(M=E(o))&&T?T.p(o,d):(T.d(1),T=M(o),T&&(T.c(),T.m(e,s)))},d(o){o&&m(e),T.d(),u=!1,we(p)}}}function Lt(i){let e,s='<p class="montserrat-alternates-bold">silenciar</p> <i class="fas fa-volume-mute"></i>',t,l;return{c(){e=b("li"),e.innerHTML=s,this.h()},l(a){e=y(a,"LI",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-nq1i3d"&&(e.innerHTML=s),this.h()},h(){n(e,"class","silence svelte-16fo0sk")},m(a,r){R(a,e,r),t||(l=D(e,"click",i[9]),t=!0)},p:Y,d(a){a&&m(e),t=!1,l()}}}function Bt(i){let e,s='<p class="montserrat-alternates-bold">quitar silencio</p> <i class="fas fa-volume-up"></i>',t,l;return{c(){e=b("li"),e.innerHTML=s,this.h()},l(a){e=y(a,"LI",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1kkyzxq"&&(e.innerHTML=s),this.h()},h(){n(e,"class","silence svelte-16fo0sk")},m(a,r){R(a,e,r),t||(l=D(e,"click",i[8]),t=!0)},p:Y,d(a){a&&m(e),t=!1,l()}}}function Dt(i){let e,s,t,l=decodeURI(i[1].username)+"",a,r,f,u,p,E,M;function T(c,v){return c[1].avatar.length>0?Ut:Nt}let o=T(i),d=o(i),h=i[2]&&Ge(i);return{c(){e=b("article"),d.c(),s=L(),t=b("h4"),a=_e(l),r=L(),f=b("i"),u=L(),h&&h.c(),p=se(),this.h()},l(c){e=y(c,"ARTICLE",{"data-id":!0,class:!0});var v=O(e);d.l(v),s=B(v),t=y(v,"H4",{class:!0});var I=O(t);a=be(I,l),I.forEach(m),r=B(v),f=y(v,"I",{class:!0}),O(f).forEach(m),v.forEach(m),u=B(c),h&&h.l(c),p=se(),this.h()},h(){n(t,"class","montserrat-alternates-bold svelte-16fo0sk"),n(f,"class","fa-solid fa-circle-question svelte-16fo0sk"),n(e,"data-id",i[0]),n(e,"class","svelte-16fo0sk"),fe(e,"muted",i[3])},m(c,v){R(c,e,v),d.m(e,null),_(e,s),_(e,t),_(t,a),_(e,r),_(e,f),R(c,u,v),h&&h.m(c,v),R(c,p,v),E||(M=D(e,"click",i[4]),E=!0)},p(c,[v]){o===(o=T(c))&&d?d.p(c,v):(d.d(1),d=o(c),d&&(d.c(),d.m(e,s))),v&2&&l!==(l=decodeURI(c[1].username)+"")&&Ee(a,l),v&1&&n(e,"data-id",c[0]),v&8&&fe(e,"muted",c[3]),c[2]?h?h.p(c,v):(h=Ge(c),h.c(),h.m(p.parentNode,p)):h&&(h.d(1),h=null)},i:Y,o:Y,d(c){c&&(m(e),m(u),m(p)),d.d(),h&&h.d(c),E=!1,M()}}}function Vt(i,e,s){let t,l,a,r,f;V(i,Me,I=>s(10,t=I)),V(i,ge,I=>s(11,l=I)),V(i,Oe,I=>s(12,a=I)),V(i,ne,I=>s(13,r=I)),V(i,ft,I=>s(14,f=I));let{id:u}=e,{data:p}=e,E=!1;function M(){a.username!==p.username&&s(2,E=!E)}let T=!1;f.has(p.username)&&(T=!0);function o(I){a.username!==I&&(f.add(I),s(3,T=!0),s(2,E=!1))}function d(I){a.username===I||!f.delete(I)||(s(3,T=!1),s(2,E=!1))}function h(){r.send(JSON.stringify({type:"OPEN_PV",msg:{to:u}}));const I={id:u,nick:p.username,me:a.id,avatar:p.avatar};l.add(JSON.stringify(I)),ge.set(l),t.set(u,[]),s(2,E=!1)}const c=()=>d(p.username),v=()=>o(p.username);return i.$$set=I=>{"id"in I&&s(0,u=I.id),"data"in I&&s(1,p=I.data)},[u,p,E,T,M,o,d,h,c,v]}class Ht extends ke{constructor(e){super(),Ie(this,e,Vt,Dt,ye,{id:0,data:1})}}function Jt(i){let e,s,t,l;return{c(){e=b("section"),s=b("article"),t=b("h4"),l=_e(i[0]),this.h()},l(a){e=y(a,"SECTION",{class:!0});var r=O(e);s=y(r,"ARTICLE",{class:!0});var f=O(s);t=y(f,"H4",{class:!0});var u=O(t);l=be(u,i[0]),u.forEach(m),f.forEach(m),r.forEach(m),this.h()},h(){n(t,"class","montserrat-alternates-medium svelte-1wtc119"),n(s,"class","svelte-1wtc119"),n(e,"class","svelte-1wtc119")},m(a,r){R(a,e,r),_(e,s),_(s,t),_(t,l)},p(a,[r]){r&1&&Ee(l,a[0])},i:Y,o:Y,d(a){a&&m(e)}}}function zt(i,e,s){let t;V(i,Le,r=>s(2,t=r));let{msg:l}=e,{time:a}=e;return De(()=>{document.onkeydown=()=>!1}),ut(()=>{document.onkeydown=null}),setTimeout(()=>ce(Le,t=!1,t),a),i.$$set=r=>{"msg"in r&&s(0,l=r.msg),"time"in r&&s(1,a=r.time)},[l,a]}class qt extends ke{constructor(e){super(),Ie(this,e,zt,Jt,ye,{msg:0,time:1})}}const Ke=["https://i.pinimg.com/564x/26/01/7e/26017ea921bf3f92ee09017d7a008c4c.jpg","https://i.pinimg.com/564x/b2/a5/22/b2a522fa576b9e883e8040d9f4971d57.jpg","https://i.pinimg.com/564x/e1/68/df/e168df965c1300c16a78fa6479f0f84b.jpg","https://i.pinimg.com/236x/3b/c1/90/3bc190d0fe1e5ab694eb48bb679617d6.jpg","https://i.pinimg.com/236x/0e/c5/26/0ec526b2677e3f4b59575b39e0c80c1a.jpg","https://i.pinimg.com/236x/f4/b6/ed/f4b6ed6ed97a5d568d18d9466b517e4d.jpg","https://i.pinimg.com/236x/c5/cb/6f/c5cb6fb8e5e9c0121c35bb63703553ff.jpg","https://i.pinimg.com/236x/3b/6a/f0/3b6af08fc3770a8323787a98b2295046.jpg","https://i.pinimg.com/236x/8e/a8/4a/8ea84ae43f94280f0f88b7a6bb640ca5.jpg","https://i.pinimg.com/236x/58/f6/a9/58f6a9167e1374a4ae98f560fb6bef08.jpg","https://i.pinimg.com/236x/6e/74/df/6e74df3fb594f746693d43aef71e7c20.jpg","https://i.pinimg.com/236x/81/04/79/8104795db0b5220f331b51b089aa1edb.jpg","https://i.pinimg.com/236x/4e/3c/47/4e3c47cb9ad9d86968ea5b1a8eee761f.jpg","https://i.pinimg.com/236x/f0/96/05/f09605c6a782601c5a516dc513fec8ab.jpg","https://i.pinimg.com/236x/ab/e5/28/abe528cc836c08c02ed39b4264bbfa2a.jpg","https://i.pinimg.com/236x/ae/e2/a0/aee2a0b025b7e676d491c58e64c0c0e0.jpg","https://i.pinimg.com/236x/ab/0f/f7/ab0ff72902f0ed5be507bb542f14e04c.jpg","https://i.pinimg.com/236x/5e/50/d3/5e50d303bff603bac964e9e1d70cc263.jpg","https://i.pinimg.com/236x/9e/1f/03/9e1f03aa60d4e8919484de08c4741c7d.jpg","https://i.pinimg.com/236x/4b/8c/f1/4b8cf19584ede706ad857b998cc39332.jpg","https://i.pinimg.com/236x/df/59/34/df5934ad681ad29edc0bc2a88ab538dc.jpg","https://i.pinimg.com/236x/b9/d2/4a/b9d24af77da570a5d304950974f5269e.jpg","https://media.tenor.com/Eet92-jhr3MAAAAj/hasher-happy-sticker.gif","https://media.tenor.com/rOZE9d6XIWIAAAAi/line.gif","https://media.tenor.com/eM0K9-K-hcUAAAAi/crying.gif","https://media.tenor.com/7VE1yyfi5CIAAAAi/fighting-addoil.gif","https://media.tenor.com/rXbN_gwjc7AAAAAi/alice-sticker-alice-animated.gif","https://media.tenor.com/5Ada5-x6Vz8AAAAj/cute.gif","https://media.tenor.com/OY6bIk0asR4AAAAj/quby.gif","https://media.tenor.com/pB8dRaVDsBwAAAAj/tkthao219-quby.gif","https://media.tenor.com/J2bPcmfvfaUAAAAj/tkthao219-quby.gif","https://media.tenor.com/JtV9gaxyavAAAAAj/peach-cat.gif","https://media.tenor.com/GTjXEnuTUUMAAAAj/loved-love.gif","https://media.tenor.com/7r6lLYznnTsAAAAj/sticker-cartoon.gif","https://media.tenor.com/Ck3Q6OuFmzQAAAAj/animated-stickers-good-morning.gif","https://media.tenor.com/nQUJSVnPH8sAAAAj/tkthao219-quby.gif","https://media.tenor.com/senzjQZHOZwAAAAj/hasher-sticker.gif","https://media.tenor.com/b87Ur_ijFF0AAAAj/char.gif","https://media.tenor.com/xPDDnUtYMS0AAAAj/line-sticker-thank-you-sticker.gif","https://media.tenor.com/ua3mX1agSvoAAAAj/hasher-sticker.gif","https://media.tenor.com/83rrChRnhVwAAAAj/tkthao219-quby.gif"];function Fe(i,e,s){const t=i.slice();return t[16]=e[s],t}function Xe(i){let e,s,t,l="Emojis",a,r,f="stickers",u,p,E,M,T,o=i[1]===i[3].EMOJI&&Ye(),d=i[1]===i[3].STICKER&&We(i);return{c(){e=b("div"),s=b("div"),t=b("h5"),t.textContent=l,a=L(),r=b("h5"),r.textContent=f,u=L(),p=b("div"),o&&o.c(),E=L(),d&&d.c(),this.h()},l(h){e=y(h,"DIV",{class:!0});var c=O(e);s=y(c,"DIV",{class:!0});var v=O(s);t=y(v,"H5",{class:!0,"data-svelte-h":!0}),le(t)!=="svelte-wn67si"&&(t.textContent=l),a=B(v),r=y(v,"H5",{class:!0,"data-svelte-h":!0}),le(r)!=="svelte-1gj1sgi"&&(r.textContent=f),v.forEach(m),u=B(c),p=y(c,"DIV",{class:!0});var I=O(p);o&&o.l(I),E=B(I),d&&d.l(I),I.forEach(m),c.forEach(m),this.h()},h(){n(t,"class","montserrat-alternates-bold svelte-1s5h8gr"),fe(t,"activeTab",i[1]===i[3].EMOJI),n(r,"class","activeTab montserrat-alternates-bold svelte-1s5h8gr"),fe(r,"activeTab",i[1]===i[3].STICKER),n(s,"class","tab svelte-1s5h8gr"),n(p,"class","mojis svelte-1s5h8gr"),n(e,"class","emojisBX svelte-1s5h8gr")},m(h,c){R(h,e,c),_(e,s),_(s,t),_(s,a),_(s,r),_(e,u),_(e,p),o&&o.m(p,null),_(p,E),d&&d.m(p,null),M||(T=[D(t,"click",i[9]),D(r,"click",i[10])],M=!0)},p(h,c){c&10&&fe(t,"activeTab",h[1]===h[3].EMOJI),c&10&&fe(r,"activeTab",h[1]===h[3].STICKER),h[1]===h[3].EMOJI?o||(o=Ye(),o.c(),o.m(p,E)):o&&(o.d(1),o=null),h[1]===h[3].STICKER?d?d.p(h,c):(d=We(h),d.c(),d.m(p,null)):d&&(d.d(1),d=null)},d(h){h&&m(e),o&&o.d(),d&&d.d(),M=!1,we(T)}}}function Ye(i){let e;return{c(){e=b("div"),this.h()},l(s){e=y(s,"DIV",{class:!0}),O(e).forEach(m),this.h()},h(){n(e,"class","caritasBX svelte-1s5h8gr")},m(s,t){R(s,e,t)},d(s){s&&m(e)}}}function We(i){let e,s=te(Ke),t=[];for(let l=0;l<s.length;l+=1)t[l]=Qe(Fe(i,s,l));return{c(){e=b("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=y(l,"DIV",{class:!0});var a=O(e);for(let r=0;r<t.length;r+=1)t[r].l(a);a.forEach(m),this.h()},h(){n(e,"class","stickersBX svelte-1s5h8gr")},m(l,a){R(l,e,a);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(l,a){if(a&32){s=te(Ke);let r;for(r=0;r<s.length;r+=1){const f=Fe(l,s,r);t[r]?t[r].p(f,a):(t[r]=Qe(f),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},d(l){l&&m(e),Te(t,l)}}}function Qe(i){let e,s,t,l;function a(){return i[11](i[16])}return{c(){e=b("img"),this.h()},l(r){e=y(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Z(e.src,s=i[16])||n(e,"src",s),n(e,"alt","sticker"),n(e,"class","svelte-1s5h8gr")},m(r,f){R(r,e,f),t||(l=D(e,"click",a),t=!0)},p(r,f){i=r},d(r){r&&m(e),t=!1,l()}}}function Gt(i){let e,s,t,l='<button class="montserrat-alternates-bold svelte-1s5h8gr" style="font-size:1.3rem;">T</button>',a,r,f,u,p,E='<i class="fa-solid fa-image svelte-1s5h8gr"></i>',M,T,o,d,h,c,v,I,C,w,k,S=i[0]&&Xe(i);return{c(){e=b("div"),s=b("div"),t=b("div"),t.innerHTML=l,a=L(),r=b("div"),f=b("input"),u=L(),p=b("label"),p.innerHTML=E,M=L(),T=b("div"),o=b("button"),d=b("i"),c=L(),v=b("div"),I=b("i"),C=L(),S&&S.c(),this.h()},l(N){e=y(N,"DIV",{class:!0});var H=O(e);s=y(H,"DIV",{class:!0});var K=O(s);t=y(K,"DIV",{class:!0,"data-svelte-h":!0}),le(t)!=="svelte-1j7ahwz"&&(t.innerHTML=l),a=B(K),r=y(K,"DIV",{class:!0});var W=O(r);f=y(W,"INPUT",{type:!0,accept:!0,id:!0}),u=B(W),p=y(W,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),le(p)!=="svelte-r2pi9w"&&(p.innerHTML=E),W.forEach(m),M=B(K),T=y(K,"DIV",{class:!0});var X=O(T);o=y(X,"BUTTON",{class:!0});var re=O(o);d=y(re,"I",{class:!0}),O(d).forEach(m),re.forEach(m),X.forEach(m),K.forEach(m),c=B(H),v=y(H,"DIV",{class:!0});var ie=O(v);I=y(ie,"I",{class:!0}),O(I).forEach(m),C=B(ie),S&&S.l(ie),ie.forEach(m),H.forEach(m),this.h()},h(){n(t,"class","txtStyle svelte-1s5h8gr"),n(f,"type","file"),n(f,"accept","image/*"),f.hidden=!0,n(f,"id","upImg"),n(p,"for","upImg"),n(p,"class","svelte-1s5h8gr"),n(r,"class","sendImg svelte-1s5h8gr"),n(d,"class",h=Ae(`fa-solid fa-microphone ${i[2]?"rec":"stop"}`)+" svelte-1s5h8gr"),n(o,"class","svelte-1s5h8gr"),n(T,"class","sendAudio svelte-1s5h8gr"),n(s,"class","main svelte-1s5h8gr"),n(I,"class","fa-solid fa-face-grin-beam svelte-1s5h8gr"),n(v,"class","emojis svelte-1s5h8gr"),n(e,"class","tools svelte-1s5h8gr")},m(N,H){R(N,e,H),_(e,s),_(s,t),_(s,a),_(s,r),_(r,f),_(r,u),_(r,p),_(s,M),_(s,T),_(T,o),_(o,d),_(e,c),_(e,v),_(v,I),_(v,C),S&&S.m(v,null),w||(k=[D(f,"change",i[7]),D(o,"click",i[6]),D(I,"click",i[8])],w=!0)},p(N,[H]){H&4&&h!==(h=Ae(`fa-solid fa-microphone ${N[2]?"rec":"stop"}`)+" svelte-1s5h8gr")&&n(d,"class",h),N[0]?S?S.p(N,H):(S=Xe(N),S.c(),S.m(v,null)):S&&(S.d(1),S=null)},i:Y,o:Y,d(N){N&&m(e),S&&S.d(),w=!1,we(k)}}}const Ze="https://frensgo.lat";function Kt(i,e,s){let t;V(i,ne,C=>s(13,t=C));var l=(C=>(C.EMOJI="emoji",C.STICKER="sticker",C))(l||{});let a=!1,r="sticker";function f(C){r!==C&&s(1,r=C)}function u(C){t.send(JSON.stringify({type:"STICKER",msg:C})),s(0,a=!1)}let p=null,E=!1;function M(){p||E||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia({audio:!0}).then(C=>{p=new MediaRecorder(C);let w=[];p.ondataavailable=k=>{w.push(k.data)},p.onstop=async()=>{const k=new Blob(w,{type:"audio/ogg;codecs=opus"});w=[];const S=new FormData;S.append("audio",k);const H=await(await fetch(`${Ze}/audio`,{method:"POST",body:S})).text();t.send(JSON.stringify({type:"AUDIO",msg:H}))},p.start(),s(2,E=!0)}).catch(C=>console.log(C))}function T(){p&&E&&(p.stop(),p=null,s(2,E=!1))}function o(){E?T():M()}async function d(C){const w=C.target.files[0];if(w.size>5e6){alert("La imágen es muy pesada");return}if(!/^image\/....?$/.test(w.type)){alert("Por favor elija una imágen válida");return}const k=new FormData;k.append("image",w);const N=await(await fetch(`${Ze}/upImg`,{method:"POST",body:k})).text();t.send(JSON.stringify({type:"IMG",msg:N}))}return[a,r,E,l,f,u,o,d,()=>s(0,a=!a),()=>{f(l.EMOJI)},()=>{f(l.STICKER)},C=>u(C)]}class Ft extends ke{constructor(e){super(),Ie(this,e,Kt,Gt,ye,{})}}function Xt(i){let e,s,t,l,a,r,f;return{c(){e=b("div"),s=b("i"),t=L(),l=b("img"),this.h()},l(u){e=y(u,"DIV",{class:!0});var p=O(e);s=y(p,"I",{class:!0}),O(s).forEach(m),t=B(p),l=y(p,"IMG",{src:!0,alt:!0,class:!0}),p.forEach(m),this.h()},h(){n(s,"class","fas fa-times svelte-a6okt0"),Z(l.src,a=i[1])||n(l,"src",a),n(l,"alt","Una imagen"),n(l,"class","svelte-a6okt0"),n(e,"class","modal svelte-a6okt0")},m(u,p){R(u,e,p),_(e,s),_(e,t),_(e,l),r||(f=D(s,"click",i[2]),r=!0)},p(u,[p]){p&2&&!Z(l.src,a=u[1])&&n(l,"src",a)},i:Y,o:Y,d(u){u&&m(e),r=!1,f()}}}function Yt(i,e,s){let t,l;return V(i,Se,r=>s(0,t=r)),V(i,Ue,r=>s(1,l=r)),[t,l,()=>ce(Se,t=!1,t)]}class Wt extends ke{constructor(e){super(),Ie(this,e,Yt,Xt,ye,{})}}const{window:Re}=It;function $e(i,e,s){const t=i.slice();return t[29]=e[s],t}function Qt(i){let e;return{c(){e=b("i"),this.h()},l(s){e=y(s,"I",{class:!0}),O(e).forEach(m),this.h()},h(){n(e,"class","fa-solid fa-circle-user svelte-yyv3x1")},m(s,t){R(s,e,t)},p:Y,d(s){s&&m(e)}}}function Zt(i){let e;function s(a,r){return a[2].length>0?xt:$t}let t=s(i),l=t(i);return{c(){l.c(),e=se()},l(a){l.l(a),e=se()},m(a,r){l.m(a,r),R(a,e,r)},p(a,r){t===(t=s(a))&&l?l.p(a,r):(l.d(1),l=t(a),l&&(l.c(),l.m(e.parentNode,e)))},d(a){a&&m(e),l.d(a)}}}function $t(i){let e;return{c(){e=b("i"),this.h()},l(s){e=y(s,"I",{class:!0}),O(e).forEach(m),this.h()},h(){n(e,"class","fa-solid fa-circle-user svelte-yyv3x1")},m(s,t){R(s,e,t)},p:Y,d(s){s&&m(e)}}}function xt(i){let e,s;return{c(){e=b("img"),this.h()},l(t){e=y(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Z(e.src,s=i[2])||n(e,"src",s),n(e,"alt","avatar of user"),n(e,"class","svelte-yyv3x1")},m(t,l){R(t,e,l)},p(t,l){l[0]&4&&!Z(e.src,s=t[2])&&n(e,"src",s)},d(t){t&&m(e)}}}function xe(i){let e,s=i[10].get(i[1]).length>0,t,l,a,r,f,u,p='<i class="fa-solid fa-paper-plane svelte-yyv3x1"></i>',E,M,T,o=s&&et(i);return{c(){e=b("div"),o&&o.c(),t=L(),l=b("div"),a=b("form"),r=b("input"),f=L(),u=b("button"),u.innerHTML=p,this.h()},l(d){e=y(d,"DIV",{class:!0});var h=O(e);o&&o.l(h),h.forEach(m),t=B(d),l=y(d,"DIV",{class:!0});var c=O(l);a=y(c,"FORM",{class:!0});var v=O(a);r=y(v,"INPUT",{type:!0,placeholder:!0,minlength:!0,maxlength:!0,class:!0}),f=B(v),u=y(v,"BUTTON",{class:!0,"data-svelte-h":!0}),le(u)!=="svelte-1m1u804"&&(u.innerHTML=p),v.forEach(m),c.forEach(m),this.h()},h(){n(e,"class","body svelte-yyv3x1"),n(r,"type","text"),n(r,"placeholder","Escribe tu mensaje..."),n(r,"minlength","1"),n(r,"maxlength","120"),r.required=!0,n(r,"class","montserrat-alternates-regular svelte-yyv3x1"),n(u,"class","svelte-yyv3x1"),n(a,"class","svelte-yyv3x1"),n(l,"class","footer svelte-yyv3x1")},m(d,h){R(d,e,h),o&&o.m(e,null),i[19](e),R(d,t,h),R(d,l,h),_(l,a),_(a,r),Be(r,i[9]),_(a,f),_(a,u),E=!0,M||(T=[D(r,"input",i[20]),D(a,"submit",dt(i[16]))],M=!0)},p(d,h){h[0]&1026&&(s=d[10].get(d[1]).length>0),s?o?(o.p(d,h),h[0]&1026&&U(o,1)):(o=et(d),o.c(),U(o,1),o.m(e,null)):o&&(ae(),G(o,1,1,()=>{o=null}),oe()),h[0]&512&&r.value!==d[9]&&Be(r,d[9])},i(d){E||(U(o),E=!0)},o(d){G(o),E=!1},d(d){d&&(m(e),m(t),m(l)),o&&o.d(),i[19](null),M=!1,we(T)}}}function et(i){let e,s,t=te([...i[10]][0][1]),l=[];for(let r=0;r<t.length;r+=1)l[r]=tt($e(i,t,r));const a=r=>G(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=se()},l(r){for(let f=0;f<l.length;f+=1)l[f].l(r);e=se()},m(r,f){for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(r,f);R(r,e,f),s=!0},p(r,f){if(f[0]&1024){t=te([...r[10]][0][1]);let u;for(u=0;u<t.length;u+=1){const p=$e(r,t,u);l[u]?(l[u].p(p,f),U(l[u],1)):(l[u]=tt(p),l[u].c(),U(l[u],1),l[u].m(e.parentNode,e))}for(ae(),u=t.length;u<l.length;u+=1)a(u);oe()}},i(r){if(!s){for(let f=0;f<t.length;f+=1)U(l[f]);s=!0}},o(r){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)G(l[f]);s=!1},d(r){r&&m(e),Te(l,r)}}}function tt(i){let e,s;return e=new ht({props:{data:i[29]}}),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,l){he(e,t,l),s=!0},p(t,l){const a={};l[0]&1024&&(a.data=t[29]),e.$set(a)},i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){G(e.$$.fragment,t),s=!1},d(t){me(e,t)}}}function es(i){let e,s,t,l,a,r,f,u,p,E,M,T,o,d,h,c,v;function I(S,N){return S[2]?Zt:Qt}let C=I(i),w=C(i),k=!i[8]&&xe(i);return{c(){e=b("div"),s=b("div"),t=b("div"),w.c(),l=L(),a=b("h3"),r=_e(i[0]),f=L(),u=b("div"),p=b("i"),E=L(),M=b("i"),T=L(),k&&k.c(),this.h()},l(S){e=y(S,"DIV",{class:!0,id:!0,style:!0});var N=O(e);s=y(N,"DIV",{class:!0});var H=O(s);t=y(H,"DIV",{class:!0});var K=O(t);w.l(K),l=B(K),a=y(K,"H3",{class:!0});var W=O(a);r=be(W,i[0]),W.forEach(m),K.forEach(m),f=B(H),u=y(H,"DIV",{class:!0});var X=O(u);p=y(X,"I",{class:!0}),O(p).forEach(m),E=B(X),M=y(X,"I",{class:!0}),O(M).forEach(m),X.forEach(m),H.forEach(m),T=B(N),k&&k.l(N),N.forEach(m),this.h()},h(){n(a,"class","montserrat-alternates-bold"),n(t,"class","left svelte-yyv3x1"),n(p,"class","fa-solid fa-down-left-and-up-right-to-center svelte-yyv3x1"),n(M,"class","fas fa-times svelte-yyv3x1"),n(u,"class","right svelte-yyv3x1"),n(s,"class","header svelte-yyv3x1"),n(e,"class","pvWindow svelte-yyv3x1"),n(e,"id",o=i[1].toString()),n(e,"style",d=`left:${i[6]}px; top:${i[7]}px; z-index:${i[5]}`),fe(e,"minimize",i[8])},m(S,N){R(S,e,N),_(e,s),_(s,t),w.m(t,null),_(t,l),_(t,a),_(a,r),_(s,f),_(s,u),_(u,p),_(u,E),_(u,M),_(e,T),k&&k.m(e,null),i[21](e),h=!0,c||(v=[D(Re,"mouseup",i[13]),D(Re,"mousemove",i[14]),D(Re,"touchend",i[13]),D(Re,"touchmove",i[15]),D(p,"click",i[18]),D(M,"click",i[11]),D(s,"mousedown",i[12]),D(s,"touchstart",i[12],{passive:!0})],c=!0)},p(S,N){C===(C=I(S))&&w?w.p(S,N):(w.d(1),w=C(S),w&&(w.c(),w.m(t,l))),(!h||N[0]&1)&&Ee(r,S[0]),S[8]?k&&(ae(),G(k,1,1,()=>{k=null}),oe()):k?(k.p(S,N),N[0]&256&&U(k,1)):(k=xe(S),k.c(),U(k,1),k.m(e,null)),(!h||N[0]&2&&o!==(o=S[1].toString()))&&n(e,"id",o),(!h||N[0]&224&&d!==(d=`left:${S[6]}px; top:${S[7]}px; z-index:${S[5]}`))&&n(e,"style",d),(!h||N[0]&256)&&fe(e,"minimize",S[8])},i(S){h||(U(k),h=!0)},o(S){G(k),h=!1},d(S){S&&m(e),w.d(),k&&k.d(),i[21](null),c=!1,we(v)}}}function ts(i){i.scroll({top:i.scrollHeight,behavior:"smooth"})}function ss(i,e,s){let t,l,a,r;V(i,Me,j=>s(10,t=j)),V(i,Oe,j=>s(25,l=j)),V(i,ne,j=>s(26,a=j)),V(i,ge,j=>s(27,r=j));let{nick:f}=e,{fromId:u}=e,{me:p}=e,{avatar:E}=e,M,T,o=100,d=300,h=Math.round(Math.random()*400),c=!1,v=!1,I;De(()=>{window.outerWidth<500&&s(6,d=0)});function C(){const j=JSON.stringify({id:u,nick:f,me:p,avatar:E});r.has(j)&&(r.delete(j),ge.set(r),t.delete(u),a.send(JSON.stringify({type:"CLOSE_PV",msg:{to:u,nick:f}})))}let w=0;function k(){const{top:j}=T.getBoundingClientRect();w=j,s(5,o++,o),c=!0}function S(){c=!1}function N(j){c&&(s(6,d+=j.movementX),s(7,h+=j.movementY))}function H(j){if(c){const{clientY:F}=j.touches[0],ee=F-w;if(isNaN(ee))return;s(7,h=h+ee),w=F}}function K(){console.log(l.avatar),!(!I||I.length===0||I.length>120)&&(a.send(JSON.stringify({type:"PV",msg:{to:u,body:I.trim()}})),t.get(u).push({username:l.username,body:I,type:"pv",avatar:l.avatar}),Me.set(t),setTimeout(()=>ts(M),.1),s(9,I=""))}const W=()=>s(8,v=!v);function X(j){Je[j?"unshift":"push"](()=>{M=j,s(3,M)})}function re(){I=this.value,s(9,I)}function ie(j){Je[j?"unshift":"push"](()=>{T=j,s(4,T)})}return i.$$set=j=>{"nick"in j&&s(0,f=j.nick),"fromId"in j&&s(1,u=j.fromId),"me"in j&&s(17,p=j.me),"avatar"in j&&s(2,E=j.avatar)},[f,u,E,M,T,o,d,h,v,I,t,C,k,S,N,H,K,p,W,X,re,ie]}class ls extends ke{constructor(e){super(),Ie(this,e,ss,es,ye,{nick:0,fromId:1,me:17,avatar:2},null,[-1,-1])}}function st(i,e,s){const t=i.slice();return t[18]=e[s][0],t[19]=e[s][1],t}function lt(i,e,s){const t=i.slice();return t[22]=e[s],t}function it(i,e,s){const t=i.slice();return t[25]=e[s],t}function rt(i){let e,s;return e=new qt({props:{msg:"Aver si nos calmamos un poquito :)",time:5e3}}),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,l){he(e,t,l),s=!0},i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){G(e.$$.fragment,t),s=!1},d(t){me(e,t)}}}function at(i){let e,s;return e=new Wt({}),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,l){he(e,t,l),s=!0},i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){G(e.$$.fragment,t),s=!1},d(t){me(e,t)}}}function ot(i){let e,s;return e=new ls({props:{nick:JSON.parse(i[25]).nick,fromId:JSON.parse(i[25]).id,me:JSON.parse(i[25]).me,avatar:JSON.parse(i[25]).avatar}}),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,l){he(e,t,l),s=!0},p(t,l){const a={};l&16&&(a.nick=JSON.parse(t[25]).nick),l&16&&(a.fromId=JSON.parse(t[25]).id),l&16&&(a.me=JSON.parse(t[25]).me),l&16&&(a.avatar=JSON.parse(t[25]).avatar),e.$set(a)},i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){G(e.$$.fragment,t),s=!1},d(t){me(e,t)}}}function nt(i){let e,s;return e=new ht({props:{data:i[22]}}),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,l){he(e,t,l),s=!0},p(t,l){const a={};l&8&&(a.data=t[22]),e.$set(a)},i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){G(e.$$.fragment,t),s=!1},d(t){me(e,t)}}}function ct(i){let e,s;return e=new Ht({props:{id:i[18],data:i[19]}}),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,l){he(e,t,l),s=!0},p(t,l){const a={};l&4&&(a.id=t[18]),l&4&&(a.data=t[19]),e.$set(a)},i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){G(e.$$.fragment,t),s=!1},d(t){me(e,t)}}}function is(i){let e,s,t,l,a,r,f,u,p,E,M,T,o,d,h,c,v='<i class="fa-solid fa-paper-plane svelte-1vmv3y4"></i>',I,C,w,k,S=i[2].size+"",N,H,K,W,X,re,ie,j=i[5]&&rt(),F=i[6]&&i[7]&&at(),ee=te(i[4]),J=[];for(let g=0;g<ee.length;g+=1)J[g]=ot(it(i,ee,g));const mt=g=>G(J[g],1,1,()=>{J[g]=null});l=new yt({});let pe=te(i[3]),z=[];for(let g=0;g<pe.length;g+=1)z[g]=nt(lt(i,pe,g));const pt=g=>G(z[g],1,1,()=>{z[g]=null});M=new Ft({});let ve=te(i[2].entries()),q=[];for(let g=0;g<ve.length;g+=1)q[g]=ct(st(i,ve,g));const vt=g=>G(q[g],1,1,()=>{q[g]=null});return{c(){j&&j.c(),e=L(),F&&F.c(),s=L();for(let g=0;g<J.length;g+=1)J[g].c();t=L(),ue(l.$$.fragment),a=L(),r=b("section"),f=b("article"),u=b("div");for(let g=0;g<z.length;g+=1)z[g].c();p=L(),E=b("div"),ue(M.$$.fragment),T=L(),o=b("form"),d=b("input"),h=L(),c=b("button"),c.innerHTML=v,I=L(),C=b("article"),w=b("h3"),k=_e("Usuarios conectados: "),N=_e(S),H=L(),K=b("div");for(let g=0;g<q.length;g+=1)q[g].c();this.h()},l(g){j&&j.l(g),e=B(g),F&&F.l(g),s=B(g);for(let x=0;x<J.length;x+=1)J[x].l(g);t=B(g),de(l.$$.fragment,g),a=B(g),r=y(g,"SECTION",{class:!0});var P=O(r);f=y(P,"ARTICLE",{class:!0});var A=O(f);u=y(A,"DIV",{class:!0});var $=O(u);for(let x=0;x<z.length;x+=1)z[x].l($);$.forEach(m),p=B(A),E=y(A,"DIV",{class:!0});var je=O(E);de(M.$$.fragment,je),T=B(je),o=y(je,"FORM",{class:!0});var Pe=O(o);d=y(Pe,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,minlength:!0}),h=B(Pe),c=y(Pe,"BUTTON",{class:!0,"data-svelte-h":!0}),le(c)!=="svelte-1m1u804"&&(c.innerHTML=v),Pe.forEach(m),je.forEach(m),A.forEach(m),I=B(P),C=y(P,"ARTICLE",{class:!0});var Ce=O(C);w=y(Ce,"H3",{class:!0});var Ve=O(w);k=be(Ve,"Usuarios conectados: "),N=be(Ve,S),Ve.forEach(m),H=B(Ce),K=y(Ce,"DIV",{class:!0});var ze=O(K);for(let x=0;x<q.length;x+=1)q[x].l(ze);ze.forEach(m),Ce.forEach(m),P.forEach(m),this.h()},h(){n(u,"class","chat svelte-1vmv3y4"),n(d,"class","montserrat-alternates-regular svelte-1vmv3y4"),n(d,"type","text"),n(d,"placeholder","Escribe tu mensaje..."),n(d,"maxlength","120"),n(d,"minlength","1"),n(c,"class","svelte-1vmv3y4"),n(o,"class","svelte-1vmv3y4"),n(E,"class","msg svelte-1vmv3y4"),n(f,"class","chatBX svelte-1vmv3y4"),n(w,"class","montserrat-alternates-bold svelte-1vmv3y4"),n(K,"class","userlist svelte-1vmv3y4"),n(C,"class",W=Ae(`users ${i[8]?"showUserlist":""}`)+" svelte-1vmv3y4"),n(r,"class","svelte-1vmv3y4")},m(g,P){j&&j.m(g,P),R(g,e,P),F&&F.m(g,P),R(g,s,P);for(let A=0;A<J.length;A+=1)J[A]&&J[A].m(g,P);R(g,t,P),he(l,g,P),R(g,a,P),R(g,r,P),_(r,f),_(f,u);for(let A=0;A<z.length;A+=1)z[A]&&z[A].m(u,null);i[10](u),_(f,p),_(f,E),he(M,E,null),_(E,T),_(E,o),_(o,d),Be(d,i[0]),_(o,h),_(o,c),_(r,I),_(r,C),_(C,w),_(w,k),_(w,N),_(C,H),_(C,K);for(let A=0;A<q.length;A+=1)q[A]&&q[A].m(K,null);X=!0,re||(ie=[D(d,"input",i[11]),D(o,"submit",dt(i[9]))],re=!0)},p(g,[P]){if(g[5]?j?P&32&&U(j,1):(j=rt(),j.c(),U(j,1),j.m(e.parentNode,e)):j&&(ae(),G(j,1,1,()=>{j=null}),oe()),g[6]&&g[7]?F?P&192&&U(F,1):(F=at(),F.c(),U(F,1),F.m(s.parentNode,s)):F&&(ae(),G(F,1,1,()=>{F=null}),oe()),P&16){ee=te(g[4]);let A;for(A=0;A<ee.length;A+=1){const $=it(g,ee,A);J[A]?(J[A].p($,P),U(J[A],1)):(J[A]=ot($),J[A].c(),U(J[A],1),J[A].m(t.parentNode,t))}for(ae(),A=ee.length;A<J.length;A+=1)mt(A);oe()}if(P&8){pe=te(g[3]);let A;for(A=0;A<pe.length;A+=1){const $=lt(g,pe,A);z[A]?(z[A].p($,P),U(z[A],1)):(z[A]=nt($),z[A].c(),U(z[A],1),z[A].m(u,null))}for(ae(),A=pe.length;A<z.length;A+=1)pt(A);oe()}if(P&1&&d.value!==g[0]&&Be(d,g[0]),(!X||P&4)&&S!==(S=g[2].size+"")&&Ee(N,S),P&4){ve=te(g[2].entries());let A;for(A=0;A<ve.length;A+=1){const $=st(g,ve,A);q[A]?(q[A].p($,P),U(q[A],1)):(q[A]=ct($),q[A].c(),U(q[A],1),q[A].m(K,null))}for(ae(),A=ve.length;A<q.length;A+=1)vt(A);oe()}(!X||P&256&&W!==(W=Ae(`users ${g[8]?"showUserlist":""}`)+" svelte-1vmv3y4"))&&n(C,"class",W)},i(g){if(!X){U(j),U(F);for(let P=0;P<ee.length;P+=1)U(J[P]);U(l.$$.fragment,g);for(let P=0;P<pe.length;P+=1)U(z[P]);U(M.$$.fragment,g);for(let P=0;P<ve.length;P+=1)U(q[P]);X=!0}},o(g){G(j),G(F),J=J.filter(Boolean);for(let P=0;P<J.length;P+=1)G(J[P]);G(l.$$.fragment,g),z=z.filter(Boolean);for(let P=0;P<z.length;P+=1)G(z[P]);G(M.$$.fragment,g),q=q.filter(Boolean);for(let P=0;P<q.length;P+=1)G(q[P]);X=!1},d(g){g&&(m(e),m(s),m(t),m(a),m(r)),j&&j.d(g),F&&F.d(g),Te(J,g),me(l,g),Te(z,g),i[10](null),me(M),Te(q,g),re=!1,we(ie)}}}function Ne(i){i.scroll({top:i.scrollHeight,behavior:"smooth"})}function rs(i,e,s){let t,l,a,r,f,u,p,E,M;V(i,ne,w=>s(12,t=w)),V(i,Me,w=>s(13,l=w)),V(i,ft,w=>s(14,a=w)),V(i,ge,w=>s(4,r=w)),V(i,Le,w=>s(5,f=w)),V(i,Oe,w=>s(15,u=w)),V(i,Se,w=>s(6,p=w)),V(i,Ue,w=>s(7,E=w)),V(i,_t,w=>s(8,M=w));let T="",o=null,d=[],h=[{username:"frensgo :",body:`Bienvenido a la sala ${u.room}`,type:"bot"}];De(()=>{t.send(JSON.stringify({type:"GETUSERLIST"}))}),ut(()=>{t.close(),ce(ne,t=null,t)});function c(w,k){switch(w){case"USERLIST":const S=new Map(k);s(2,d=S);break;case"NEW_USER":const N={username:"frensgo :",body:k,type:"bot"};h.push(N),s(3,h);break;case"BYE_USER":const H={username:"frensgo :",body:k,type:"bot"};h.push(H),s(3,h);break;case"ROOM_MSG":if(a.has(k.username))return;if(h.push({...k,type:"room"}),s(3,h),h.length>=100){s(3,h=[]);const X={username:"frensgo :",body:"Limpieza automática activada",type:"bot"};h.push(X),s(3,h)}setTimeout(()=>Ne(o),.1);break;case"CALM":ce(Le,f=!0,f);break;case"AUDIO":if(a.has(k.username))return;h.push({...k,type:"audio"}),s(3,h),setTimeout(()=>Ne(o),.1);break;case"IMG":if(a.has(k.username))return;h.push({...k,type:"image"}),s(3,h),setTimeout(()=>Ne(o),.1);break;case"STICKER":if(a.has(k.username))return;h.push({...k,type:"sticker"}),s(3,h),setTimeout(()=>Ne(o),.1);break;case"OPEN_PV":if(a.has(k.nick))return;const K={id:k.from,nick:k.nick,me:k.me,avatar:k.avatar};r.add(JSON.stringify(K)),ge.set(r),l.set(k.from,[]);break;case"CLOSE_PV":if(a.has(k.nick))return;const W={id:k.from,nick:k.nick,me:k.to,avatar:k.avatar};r.delete(JSON.stringify(W)),ge.set(r),l.delete(k.from);break;case"PV":if(a.has(k.fromNick)||!l.has(k.fromId))return;l.get(k.fromId).push({username:k.fromNick,body:k.body,type:"pv",avatar:k.fromAvatar}),Me.set(l)}}ce(ne,t.onmessage=w=>{const{type:k,msg:S}=JSON.parse(w.data);c(k,S)},t),ce(ne,t.onclose=()=>{kt("/rooms")},t);function v(){!T||T.length===0||T.length>120||(t.send(JSON.stringify({type:"ROOM_MSG",msg:T.trim()})),s(0,T=""))}function I(w){Je[w?"unshift":"push"](()=>{o=w,s(1,o)})}function C(){T=this.value,s(0,T)}return[T,o,d,h,r,f,p,E,M,v,I,C]}class ds extends ke{constructor(e){super(),Ie(this,e,rs,is,ye,{})}}export{ds as component,us as universal};
