import{m as Te,s as ee,r as Ge,a as de,b as _e,d as we,u as Fe}from"../chunks/index._j6mvRYL.js";import{s as ne,l as Je,y as X,n as z,c as H,o as Pe,d as G,z as te,A as Ne,r as He,f as We}from"../chunks/scheduler.CHVDA16w.js";import{S as ce,i as ue,e as w,s as B,t as se,c as I,a as A,f as D,b as ae,d as g,n as c,g as $,h,o as K,j as fe,C as Ee,m as Ae,y as re,z as le,A as ie,p as Oe,q as Ye,k as C,l as L,u as ve,B as oe,D as Re,w as be}from"../chunks/index.DfV-3n15.js";import{N as Qe}from"../chunks/Navbar.KlRfjWFJ.js";import{g as Xe}from"../chunks/entry.bLwKZ5dV.js";function ye(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}function Ke(){let a,e;if(Te.subscribe(t=>a=t),ee.subscribe(t=>e=t),!a||!e)throw Ge(307,"/")}const At=Object.freeze(Object.defineProperty({__proto__:null,load:Ke},Symbol.toStringTag,{value:"Module"}));class N extends HTMLElement{constructor(){super(),this.isIframeLoaded=!1,this.setupDom()}static get observedAttributes(){return["videoid","playlistid"]}connectedCallback(){this.addEventListener("pointerover",N.warmConnections,{once:!0}),this.addEventListener("click",()=>this.addIframe())}get videoId(){return encodeURIComponent(this.getAttribute("videoid")||"")}set videoId(e){this.setAttribute("videoid",e)}get playlistId(){return encodeURIComponent(this.getAttribute("playlistid")||"")}set playlistId(e){this.setAttribute("playlistid",e)}get videoTitle(){return this.getAttribute("videotitle")||"Video"}set videoTitle(e){this.setAttribute("videotitle",e)}get videoPlay(){return this.getAttribute("videoPlay")||"Play"}set videoPlay(e){this.setAttribute("videoPlay",e)}get videoStartAt(){return this.getAttribute("videoStartAt")||"0"}get autoLoad(){return this.hasAttribute("autoload")}get noCookie(){return this.hasAttribute("nocookie")}get posterQuality(){return this.getAttribute("posterquality")||"hqdefault"}get posterLoading(){return this.getAttribute("posterloading")||"lazy"}get params(){return`start=${this.videoStartAt}&${this.getAttribute("params")}`}set params(e){this.setAttribute("params",e)}setupDom(){const e=this.attachShadow({mode:"open"});let t="";window.liteYouTubeNonce&&(t=`nonce="${window.liteYouTubeNonce}"`),e.innerHTML=`
      <style ${t}>
        :host {
          contain: content;
          display: block;
          position: relative;
          width: 100%;
          padding-bottom: calc(100% / (16 / 9));
        }

        @media (max-width: 40em) {
          :host([short]) {
            padding-bottom: calc(100% / (9 / 16));
          }
        }

        #frame, #fallbackPlaceholder, iframe {
          position: absolute;
          width: 100%;
          height: 100%;
          left: 0;
        }

        #frame {
          cursor: pointer;
        }

        #fallbackPlaceholder {
          object-fit: cover;
        }

        #frame::before {
          content: '';
          display: block;
          position: absolute;
          top: 0;
          background-image: linear-gradient(180deg, #111 -20%, transparent 90%);
          height: 60px;
          width: 100%;
          z-index: 1;
        }

        #playButton {
          width: 68px;
          height: 48px;
          background-color: transparent;
          background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/><path d="M45 24 27 14v20" fill="white"/></svg>');
          z-index: 1;
          border: 0;
          border-radius: inherit;
        }

        #playButton:before {
          content: '';
          border-style: solid;
          border-width: 11px 0 11px 19px;
          border-color: transparent transparent transparent #fff;
        }

        #playButton,
        #playButton:before {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate3d(-50%, -50%, 0);
          cursor: inherit;
        }

        /* Post-click styles */
        .activated {
          cursor: unset;
        }

        #frame.activated::before,
        #frame.activated > #playButton {
          display: none;
        }
      </style>
      <div id="frame">
        <picture>
          <source id="webpPlaceholder" type="image/webp">
          <source id="jpegPlaceholder" type="image/jpeg">
          <img id="fallbackPlaceholder" referrerpolicy="origin" loading="lazy">
        </picture>
        <button id="playButton"></button>
      </div>
    `,this.domRefFrame=e.querySelector("#frame"),this.domRefImg={fallback:e.querySelector("#fallbackPlaceholder"),webp:e.querySelector("#webpPlaceholder"),jpeg:e.querySelector("#jpegPlaceholder")},this.domRefPlayButton=e.querySelector("#playButton")}setupComponent(){this.initImagePlaceholder(),this.domRefPlayButton.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),this.setAttribute("title",`${this.videoPlay}: ${this.videoTitle}`),(this.autoLoad||this.isYouTubeShort())&&this.initIntersectionObserver()}attributeChangedCallback(e,t,s){switch(e){case"videoid":case"playlistid":case"videoTitle":case"videoPlay":{t!==s&&(this.setupComponent(),this.domRefFrame.classList.contains("activated")&&(this.domRefFrame.classList.remove("activated"),this.shadowRoot.querySelector("iframe").remove(),this.isIframeLoaded=!1));break}}}addIframe(e=!1){if(!this.isIframeLoaded){let t=e?0:1;const s=this.noCookie?"-nocookie":"";let r;this.playlistId?r=`?listType=playlist&list=${this.playlistId}&`:r=`${this.videoId}?`,this.isYouTubeShort()&&(this.params=`loop=1&mute=1&modestbranding=1&playsinline=1&rel=0&enablejsapi=1&playlist=${this.videoId}`,t=1);const l=`
<iframe frameborder="0" title="${this.videoTitle}"
  allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen
  src="https://www.youtube${s}.com/embed/${r}autoplay=${t}&${this.params}"
></iframe>`;this.domRefFrame.insertAdjacentHTML("beforeend",l),this.domRefFrame.classList.add("activated"),this.isIframeLoaded=!0,this.attemptShortAutoPlay(),this.dispatchEvent(new CustomEvent("liteYoutubeIframeLoaded",{detail:{videoId:this.videoId},bubbles:!0,cancelable:!0}))}}initImagePlaceholder(){var s,r;const e=`https://i.ytimg.com/vi_webp/${this.videoId}/${this.posterQuality}.webp`,t=`https://i.ytimg.com/vi/${this.videoId}/${this.posterQuality}.jpg`;this.domRefImg.fallback.loading=this.posterLoading,this.domRefImg.webp.srcset=e,this.domRefImg.jpeg.srcset=t,this.domRefImg.fallback.src=t,this.domRefImg.fallback.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),(r=(s=this.domRefImg)==null?void 0:s.fallback)==null||r.setAttribute("alt",`${this.videoPlay}: ${this.videoTitle}`)}initIntersectionObserver(){const e={root:null,rootMargin:"0px",threshold:0};new IntersectionObserver((s,r)=>{s.forEach(l=>{l.isIntersecting&&!this.isIframeLoaded&&(N.warmConnections(),this.addIframe(!0),r.unobserve(this))})},e).observe(this)}attemptShortAutoPlay(){this.isYouTubeShort()&&setTimeout(()=>{var e,t;(t=(e=this.shadowRoot.querySelector("iframe"))==null?void 0:e.contentWindow)==null||t.postMessage('{"event":"command","func":"playVideo","args":""}',"*")},2e3)}isYouTubeShort(){return this.getAttribute("short")===""&&window.matchMedia("(max-width: 40em)").matches}static addPrefetch(e,t){const s=document.createElement("link");s.rel=e,s.href=t,s.crossOrigin="true",document.head.append(s)}static warmConnections(){N.isPreconnected||window.liteYouTubeIsPreconnected||(N.addPrefetch("preconnect","https://i.ytimg.com/"),N.addPrefetch("preconnect","https://s.ytimg.com"),N.addPrefetch("preconnect","https://www.youtube.com"),N.addPrefetch("preconnect","https://www.google.com"),N.addPrefetch("preconnect","https://googleads.g.doubleclick.net"),N.addPrefetch("preconnect","https://static.doubleclick.net"),N.isPreconnected=!0,window.liteYouTubeIsPreconnected=!0)}}N.isPreconnected=!1;customElements.define("lite-youtube",N);function Ue(a){let e;return{c(){e=w("i"),this.h()},l(t){e=I(t,"I",{class:!0}),A(e).forEach(g),this.h()},h(){c(e,"class","fa-solid fa-circle-user svelte-1lv0q0v")},m(t,s){$(t,e,s)},d(t){t&&g(e)}}}function Ze(a){let e;return{c(){e=w("lite-youtube"),this.h()},l(t){e=I(t,"LITE-YOUTUBE",{class:!0,videoid:!0}),A(e).forEach(g),this.h()},h(){Ee(e,"class","ytFrame svelte-1lv0q0v"),Ee(e,"videoid",a[1])},m(t,s){$(t,e,s)},p(t,s){s&2&&Ee(e,"videoid",t[1])},d(t){t&&g(e)}}}function xe(a){let e,t,s,r;return{c(){e=w("img"),this.h()},l(l){e=I(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){te(e.src,t=a[0].body)||c(e,"src",t),c(e,"alt","Imagen subida Por un usuario"),c(e,"class","svelte-1lv0q0v")},m(l,o){$(l,e,o),s||(r=K(e,"click",a[8]),s=!0)},p(l,o){o&1&&!te(e.src,t=l[0].body)&&c(e,"src",t)},d(l){l&&g(e),s=!1,r()}}}function et(a){let e,t;return{c(){e=w("audio"),this.h()},l(s){e=I(s,"AUDIO",{src:!0}),A(e).forEach(g),this.h()},h(){te(e.src,t=a[0].body)||c(e,"src",t),e.controls=!0},m(s,r){$(s,e,r)},p(s,r){r&1&&!te(e.src,t=s[0].body)&&c(e,"src",t)},d(s){s&&g(e)}}}function tt(a){let e,t=a[0].body+"",s;return{c(){e=w("p"),s=se(t),this.h()},l(r){e=I(r,"P",{class:!0});var l=A(e);s=ae(l,t),l.forEach(g),this.h()},h(){c(e,"class","montserrat-alternates-regular")},m(r,l){$(r,e,l),h(e,s)},p(r,l){l&1&&t!==(t=r[0].body+"")&&fe(s,t)},d(r){r&&g(e)}}}function st(a){let e,t,s,r,l=decodeURI(a[0].username)+"",o,y,v,u,m,k,p,T;Je(a[7]);let E=a[0].type!==a[3].BOT&&Ue();function b(n,P){if(n[0].type===n[3].ROOM||n[0].type===n[3].BOT)return tt;if(n[0].type===n[3].AUDIO)return et;if(n[0].type===n[3].IMAGE)return xe;if(n[0].type===n[3].YT)return Ze}let O=b(a),d=O&&O(a);return{c(){e=w("article"),t=w("div"),E&&E.c(),s=B(),r=w("h4"),o=se(l),y=B(),v=w("div"),u=w("div"),d&&d.c(),this.h()},l(n){e=I(n,"ARTICLE",{class:!0,style:!0});var P=A(e);t=I(P,"DIV",{class:!0});var j=A(t);E&&E.l(j),s=D(j),r=I(j,"H4",{class:!0});var q=A(r);o=ae(q,l),q.forEach(g),j.forEach(g),y=D(P),v=I(P,"DIV",{class:!0});var F=A(v);u=I(F,"DIV",{class:!0});var Z=A(u);d&&d.l(Z),Z.forEach(g),F.forEach(g),P.forEach(g),this.h()},h(){c(r,"class","montserrat-alternates-bold svelte-1lv0q0v"),c(t,"class","username svelte-1lv0q0v"),c(u,"class",m=X(`body ${a[0].type===a[3].BOT?"typeBot":a[0].type===a[3].AUDIO?"typeAudio":a[0].type===a[3].IMAGE?"typeImg":""}`)+" svelte-1lv0q0v"),c(v,"class","bodyBX"),c(e,"class",X(`${a[4]?"me":""}`)+" svelte-1lv0q0v"),c(e,"style",k=a[6](a[2]))},m(n,P){$(n,e,P),h(e,t),E&&E.m(t,null),h(t,s),h(t,r),h(r,o),h(e,y),h(e,v),h(v,u),d&&d.m(u,null),p||(T=K(window,"resize",a[7]),p=!0)},p(n,[P]){n[0].type!==n[3].BOT?E||(E=Ue(),E.c(),E.m(t,s)):E&&(E.d(1),E=null),P&1&&l!==(l=decodeURI(n[0].username)+"")&&fe(o,l),O===(O=b(n))&&d?d.p(n,P):(d&&d.d(1),d=O&&O(n),d&&(d.c(),d.m(u,null))),P&1&&m!==(m=X(`body ${n[0].type===n[3].BOT?"typeBot":n[0].type===n[3].AUDIO?"typeAudio":n[0].type===n[3].IMAGE?"typeImg":""}`)+" svelte-1lv0q0v")&&c(u,"class",m),P&4&&k!==(k=n[6](n[2]))&&c(e,"style",k)},i:z,o:z,d(n){n&&g(e),E&&E.d(),d&&d.d(),p=!1,T()}}}function at(a,e,t){let s,r,l;H(a,de,b=>t(9,s=b)),H(a,_e,b=>t(10,r=b)),H(a,Te,b=>t(11,l=b));var o=(b=>(b.ROOM="room",b.BOT="bot",b.AUDIO="audio",b.IMAGE="image",b.YT="yt",b))(o||{});let{data:y}=e,v=null;Pe(()=>{if(/^https:\/\/(www\.)?youtu.+\//.test(y.body)){const b=y.body.match(/(\.be\/|v=).{11}/);t(1,v=b[0].replace(b[1],"")),t(0,y.type="yt",y)}});const u=l.username===decodeURI(y.username);let m;function k(b){G(_e,r=b.src,r),G(de,s=!0,s)}function p(b){if(y.type==="bot")return"";let O="";return m<500&&(O+="flex-direction:column;gap:0.4rem !important;",u?O+="align-items:end;":O+="align-items:start;"),O}function T(){t(2,m=window.outerWidth)}const E=b=>k(b.target);return a.$$set=b=>{"data"in b&&t(0,y=b.data)},[y,v,m,o,u,k,p,T,E]}class rt extends ce{constructor(e){super(),ue(this,e,at,st,ne,{data:0})}}function lt(a){let e,t,s,r,l=decodeURI(a[1].username)+"",o,y,v;return{c(){e=w("article"),t=w("i"),s=B(),r=w("h4"),o=se(l),y=B(),v=w("i"),this.h()},l(u){e=I(u,"ARTICLE",{"data-id":!0,class:!0});var m=A(e);t=I(m,"I",{class:!0}),A(t).forEach(g),s=D(m),r=I(m,"H4",{class:!0});var k=A(r);o=ae(k,l),k.forEach(g),y=D(m),v=I(m,"I",{class:!0}),A(v).forEach(g),m.forEach(g),this.h()},h(){c(t,"class","fa-solid fa-circle-user svelte-vv2xs7"),c(r,"class","montserrat-alternates-bold svelte-vv2xs7"),c(v,"class","fa-solid fa-circle-question svelte-vv2xs7"),c(e,"data-id",a[0]),c(e,"class","svelte-vv2xs7")},m(u,m){$(u,e,m),h(e,t),h(e,s),h(e,r),h(r,o),h(e,y),h(e,v)},p(u,[m]){m&2&&l!==(l=decodeURI(u[1].username)+"")&&fe(o,l),m&1&&c(e,"data-id",u[0])},i:z,o:z,d(u){u&&g(e)}}}function it(a,e,t){let{id:s}=e,{data:r}=e;return a.$$set=l=>{"id"in l&&t(0,s=l.id),"data"in l&&t(1,r=l.data)},[s,r]}class ot extends ce{constructor(e){super(),ue(this,e,it,lt,ne,{id:0,data:1})}}function nt(a){let e,t,s,r;return{c(){e=w("section"),t=w("article"),s=w("h4"),r=se(a[0]),this.h()},l(l){e=I(l,"SECTION",{class:!0});var o=A(e);t=I(o,"ARTICLE",{class:!0});var y=A(t);s=I(y,"H4",{class:!0});var v=A(s);r=ae(v,a[0]),v.forEach(g),y.forEach(g),o.forEach(g),this.h()},h(){c(s,"class","montserrat-alternates-medium svelte-1b74fp1"),c(t,"class","svelte-1b74fp1"),c(e,"class","svelte-1b74fp1")},m(l,o){$(l,e,o),h(e,t),h(t,s),h(s,r)},p(l,[o]){o&1&&fe(r,l[0])},i:z,o:z,d(l){l&&g(e)}}}function ct(a,e,t){let s;H(a,we,o=>t(2,s=o));let{msg:r}=e,{time:l}=e;return Pe(()=>{document.onkeydown=()=>!1}),Ne(()=>{document.onkeydown=null}),setTimeout(()=>G(we,s=!1,s),l),a.$$set=o=>{"msg"in o&&t(0,r=o.msg),"time"in o&&t(1,l=o.time)},[r,l]}class ut extends ce{constructor(e){super(),ue(this,e,ct,nt,ne,{msg:0,time:1})}}function dt(a){let e,t,s='<button class="montserrat-alternates-bold svelte-10wdjp4">T</button>',r,l,o,y,v,u='<i class="fa-solid fa-image svelte-10wdjp4"></i>',m,k,p,T,E,b,O;return{c(){e=w("div"),t=w("div"),t.innerHTML=s,r=B(),l=w("div"),o=w("input"),y=B(),v=w("label"),v.innerHTML=u,m=B(),k=w("div"),p=w("button"),T=w("i"),this.h()},l(d){e=I(d,"DIV",{class:!0});var n=A(e);t=I(n,"DIV",{class:!0,"data-svelte-h":!0}),Ae(t)!=="svelte-j39qlt"&&(t.innerHTML=s),r=D(n),l=I(n,"DIV",{class:!0});var P=A(l);o=I(P,"INPUT",{type:!0,accept:!0,id:!0}),y=D(P),v=I(P,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ae(v)!=="svelte-dbs90"&&(v.innerHTML=u),P.forEach(g),m=D(n),k=I(n,"DIV",{class:!0});var j=A(k);p=I(j,"BUTTON",{class:!0});var q=A(p);T=I(q,"I",{class:!0}),A(T).forEach(g),q.forEach(g),j.forEach(g),n.forEach(g),this.h()},h(){c(t,"class","txtStyle svelte-10wdjp4"),c(o,"type","file"),c(o,"accept","image/*"),o.hidden=!0,c(o,"id","upImg"),c(v,"for","upImg"),c(v,"class","svelte-10wdjp4"),c(l,"class","sendImg"),c(T,"class",E=X(`fa-solid fa-microphone ${a[0]?"rec":"stop"}`)+" svelte-10wdjp4"),c(p,"class","svelte-10wdjp4"),c(k,"class","sendAudio"),c(e,"class","tools svelte-10wdjp4")},m(d,n){$(d,e,n),h(e,t),h(e,r),h(e,l),h(l,o),h(l,y),h(l,v),h(e,m),h(e,k),h(k,p),h(p,T),b||(O=[K(o,"change",a[2]),K(p,"click",a[1])],b=!0)},p(d,[n]){n&1&&E!==(E=X(`fa-solid fa-microphone ${d[0]?"rec":"stop"}`)+" svelte-10wdjp4")&&c(T,"class",E)},i:z,o:z,d(d){d&&g(e),b=!1,He(O)}}}const Ce="https://frensgo.lat";function ft(a,e,t){let s;H(a,ee,m=>t(4,s=m));let r=null,l=!1;function o(){r||l||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia({audio:!0}).then(m=>{r=new MediaRecorder(m);let k=[];r.ondataavailable=p=>{k.push(p.data)},r.onstop=async()=>{const p=new Blob(k,{type:"audio/ogg;codecs=opus"});k=[];const T=new FormData;T.append("audio",p);const b=await(await fetch(`${Ce}/audio`,{method:"POST",body:T})).text();s.send(JSON.stringify({type:"AUDIO",msg:b}))},r.start(),t(0,l=!0)}).catch(m=>console.log(m))}function y(){r&&l&&(r.stop(),r=null,t(0,l=!1))}function v(){l?y():o()}async function u(m){const k=m.target.files[0];if(k.size>5e6){alert("La imágen es muy pesada");return}if(!/^image\/....?$/.test(k.type)){alert("Por favor elija una imágen válida");return}const p=new FormData;p.append("image",k);const E=await(await fetch(`${Ce}/upImg`,{method:"POST",body:p})).text();s.send(JSON.stringify({type:"IMG",msg:E}))}return[l,v,u]}class ht extends ce{constructor(e){super(),ue(this,e,ft,dt,ne,{})}}function mt(a){let e,t,s,r,l,o,y;return{c(){e=w("div"),t=w("i"),s=B(),r=w("img"),this.h()},l(v){e=I(v,"DIV",{class:!0});var u=A(e);t=I(u,"I",{class:!0}),A(t).forEach(g),s=D(u),r=I(u,"IMG",{src:!0,alt:!0,class:!0}),u.forEach(g),this.h()},h(){c(t,"class","fas fa-times svelte-6bka76"),te(r.src,l=a[1])||c(r,"src",l),c(r,"alt","Una imagen"),c(r,"class","svelte-6bka76"),c(e,"class","modal svelte-6bka76")},m(v,u){$(v,e,u),h(e,t),h(e,s),h(e,r),o||(y=K(t,"click",a[2]),o=!0)},p(v,[u]){u&2&&!te(r.src,l=v[1])&&c(r,"src",l)},i:z,o:z,d(v){v&&g(e),o=!1,y()}}}function pt(a,e,t){let s,r;return H(a,de,o=>t(0,s=o)),H(a,_e,o=>t(1,r=o)),[s,r,()=>G(de,s=!1,s)]}class gt extends ce{constructor(e){super(),ue(this,e,pt,mt,ne,{})}}function Be(a,e,t){const s=a.slice();return s[15]=e[t][0],s[16]=e[t][1],s}function De(a,e,t){const s=a.slice();return s[19]=e[t],s}function Le(a){let e,t;return e=new ut({props:{msg:"Aver si nos calmamos un poquito :)",time:5e3}}),{c(){re(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,r){ie(e,s,r),t=!0},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function $e(a){let e,t;return e=new gt({}),{c(){re(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,r){ie(e,s,r),t=!0},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function je(a){let e,t;return e=new rt({props:{data:a[19]}}),{c(){re(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,r){ie(e,s,r),t=!0},p(s,r){const l={};r&8&&(l.data=s[19]),e.$set(l)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function qe(a){let e,t;return e=new ot({props:{id:a[15],data:a[16]}}),{c(){re(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,r){ie(e,s,r),t=!0},p(s,r){const l={};r&4&&(l.id=s[15]),r&4&&(l.data=s[16]),e.$set(l)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function vt(a){let e,t,s,r,l,o,y,v,u,m,k,p,T,E,b,O='<i class="fa-solid fa-paper-plane svelte-10t8t63"></i>',d,n,P,j,q=a[2].size+"",F,Z,J,he,x,Ie,Se,R=a[4]&&Le(),U=a[5]&&a[6]&&$e();s=new Qe({});let W=ye(a[3]),S=[];for(let i=0;i<W.length;i+=1)S[i]=je(De(a,W,i));const ze=i=>L(S[i],1,1,()=>{S[i]=null});m=new ht({});let Y=ye(a[2].entries()),M=[];for(let i=0;i<Y.length;i+=1)M[i]=qe(Be(a,Y,i));const Ve=i=>L(M[i],1,1,()=>{M[i]=null});return{c(){R&&R.c(),e=B(),U&&U.c(),t=B(),re(s.$$.fragment),r=B(),l=w("section"),o=w("article"),y=w("div");for(let i=0;i<S.length;i+=1)S[i].c();v=B(),u=w("div"),re(m.$$.fragment),k=B(),p=w("form"),T=w("input"),E=B(),b=w("button"),b.innerHTML=O,d=B(),n=w("article"),P=w("h3"),j=se("Usuarios conectados: "),F=se(q),Z=B(),J=w("div");for(let i=0;i<M.length;i+=1)M[i].c();this.h()},l(i){R&&R.l(i),e=D(i),U&&U.l(i),t=D(i),le(s.$$.fragment,i),r=D(i),l=I(i,"SECTION",{class:!0});var _=A(l);o=I(_,"ARTICLE",{class:!0});var f=A(o);y=I(f,"DIV",{class:!0});var V=A(y);for(let Q=0;Q<S.length;Q+=1)S[Q].l(V);V.forEach(g),v=D(f),u=I(f,"DIV",{class:!0});var me=A(u);le(m.$$.fragment,me),k=D(me),p=I(me,"FORM",{class:!0});var pe=A(p);T=I(pe,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,minlength:!0}),E=D(pe),b=I(pe,"BUTTON",{class:!0,"data-svelte-h":!0}),Ae(b)!=="svelte-1m1u804"&&(b.innerHTML=O),pe.forEach(g),me.forEach(g),f.forEach(g),d=D(_),n=I(_,"ARTICLE",{class:!0});var ge=A(n);P=I(ge,"H3",{class:!0});var ke=A(P);j=ae(ke,"Usuarios conectados: "),F=ae(ke,q),ke.forEach(g),Z=D(ge),J=I(ge,"DIV",{class:!0});var Me=A(J);for(let Q=0;Q<M.length;Q+=1)M[Q].l(Me);Me.forEach(g),ge.forEach(g),_.forEach(g),this.h()},h(){c(y,"class","chat svelte-10t8t63"),c(T,"class","montserrat-alternates-regular svelte-10t8t63"),c(T,"type","text"),c(T,"placeholder","Escribe tu mensaje..."),c(T,"maxlength","120"),c(T,"minlength","1"),c(b,"class","svelte-10t8t63"),c(p,"class","svelte-10t8t63"),c(u,"class","msg svelte-10t8t63"),c(o,"class","chatBX svelte-10t8t63"),c(P,"class","montserrat-alternates-bold svelte-10t8t63"),c(J,"class","userlist svelte-10t8t63"),c(n,"class",he=X(`users ${a[7]?"showUserlist":""}`)+" svelte-10t8t63"),c(l,"class","svelte-10t8t63")},m(i,_){R&&R.m(i,_),$(i,e,_),U&&U.m(i,_),$(i,t,_),ie(s,i,_),$(i,r,_),$(i,l,_),h(l,o),h(o,y);for(let f=0;f<S.length;f+=1)S[f]&&S[f].m(y,null);a[9](y),h(o,v),h(o,u),ie(m,u,null),h(u,k),h(u,p),h(p,T),Oe(T,a[0]),h(p,E),h(p,b),h(l,d),h(l,n),h(n,P),h(P,j),h(P,F),h(n,Z),h(n,J);for(let f=0;f<M.length;f+=1)M[f]&&M[f].m(J,null);x=!0,Ie||(Se=[K(T,"input",a[10]),K(p,"submit",Ye(a[8]))],Ie=!0)},p(i,[_]){if(i[4]?R?_&16&&C(R,1):(R=Le(),R.c(),C(R,1),R.m(e.parentNode,e)):R&&(be(),L(R,1,1,()=>{R=null}),ve()),i[5]&&i[6]?U?_&96&&C(U,1):(U=$e(),U.c(),C(U,1),U.m(t.parentNode,t)):U&&(be(),L(U,1,1,()=>{U=null}),ve()),_&8){W=ye(i[3]);let f;for(f=0;f<W.length;f+=1){const V=De(i,W,f);S[f]?(S[f].p(V,_),C(S[f],1)):(S[f]=je(V),S[f].c(),C(S[f],1),S[f].m(y,null))}for(be(),f=W.length;f<S.length;f+=1)ze(f);ve()}if(_&1&&T.value!==i[0]&&Oe(T,i[0]),(!x||_&4)&&q!==(q=i[2].size+"")&&fe(F,q),_&4){Y=ye(i[2].entries());let f;for(f=0;f<Y.length;f+=1){const V=Be(i,Y,f);M[f]?(M[f].p(V,_),C(M[f],1)):(M[f]=qe(V),M[f].c(),C(M[f],1),M[f].m(J,null))}for(be(),f=Y.length;f<M.length;f+=1)Ve(f);ve()}(!x||_&128&&he!==(he=X(`users ${i[7]?"showUserlist":""}`)+" svelte-10t8t63"))&&c(n,"class",he)},i(i){if(!x){C(R),C(U),C(s.$$.fragment,i);for(let _=0;_<W.length;_+=1)C(S[_]);C(m.$$.fragment,i);for(let _=0;_<Y.length;_+=1)C(M[_]);x=!0}},o(i){L(R),L(U),L(s.$$.fragment,i),S=S.filter(Boolean);for(let _=0;_<S.length;_+=1)L(S[_]);L(m.$$.fragment,i),M=M.filter(Boolean);for(let _=0;_<M.length;_+=1)L(M[_]);x=!1},d(i){i&&(g(e),g(t),g(r),g(l)),R&&R.d(i),U&&U.d(i),oe(s,i),Re(S,i),a[9](null),oe(m),Re(M,i),Ie=!1,He(Se)}}}function bt(a){a.scroll({top:a.scrollHeight,behavior:"smooth"})}function yt(a,e,t){let s,r,l,o,y,v;H(a,ee,d=>t(11,s=d)),H(a,we,d=>t(4,r=d)),H(a,Te,d=>t(12,l=d)),H(a,de,d=>t(5,o=d)),H(a,_e,d=>t(6,y=d)),H(a,Fe,d=>t(7,v=d));let u="",m=null,k=[],p=[{username:"frensgo :",body:`Bienvenido a la sala ${l.room}`,type:"bot"}];Pe(()=>{s.send(JSON.stringify({type:"GETUSERLIST"}))}),Ne(()=>{s.close(),G(ee,s=null,s)});function T(d,n){switch(d){case"USERLIST":const P=new Map(n);t(2,k=P);break;case"NEW_USER":const j={username:"frensgo :",body:n,type:"bot"};p.push(j),t(3,p);break;case"BYE_USER":const q={username:"frensgo :",body:n,type:"bot"};p.push(q),t(3,p);break;case"ROOM_MSG":p.push({...n,type:"room"}),t(3,p),p.length>=30&&(p.shift(),t(3,p)),setTimeout(()=>bt(m),.1);break;case"CALM":G(we,r=!0,r);break;case"AUDIO":p.push({...n,type:"audio"}),t(3,p);break;case"IMG":p.push({...n,type:"image"}),t(3,p);break}}G(ee,s.onmessage=d=>{const{type:n,msg:P}=JSON.parse(d.data);T(n,P)},s),G(ee,s.onclose=()=>{Xe("/rooms")},s);function E(){!u||u.length===0||u.length>120||(s.send(JSON.stringify({type:"ROOM_MSG",msg:u.trim()})),t(0,u=""))}function b(d){We[d?"unshift":"push"](()=>{m=d,t(1,m)})}function O(){u=this.value,t(0,u)}return[u,m,k,p,r,o,y,v,E,b,O]}class Tt extends ce{constructor(e){super(),ue(this,e,yt,vt,ne,{})}}export{Tt as component,At as universal};
